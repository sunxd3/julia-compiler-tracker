schema_version: "1.0"

pr:
  number: 59746
  title: "AGENTS.md: expand Revise example"
  url: "https://github.com/JuliaLang/julia/pull/59746"
  author: "IanButterworth"
  labels: []
  merged_at: "2025-10-09T00:20:42Z"
  merge_commit_sha: "7bafdc43171a59cfab0177d9fb483212c64f019f"
  diff_url: "https://github.com/JuliaLang/julia/pull/59746.diff"

scope:
  files_touched:
    - "AGENTS.md"
  components:
    - Documentation
  pipeline_stages: []

analysis:
  intent:
    summary: |
      Expands the AGENTS.md documentation with a concrete example showing how to test
      Base changes without rebuilding, using the JULIA_TEST_FAILFAST environment variable
      combined with Revise.track(Base).
    issue_links:
      - "https://github.com/timholy/Revise.jl/pull/959"
    pr_body_note: |
      PR body states: "Requires https://github.com/timholy/Revise.jl/pull/959 to actually
      work (without explicitly calling revise() after track)."
      This is an external dependency on Revise.jl, not on Julia itself.

  direct_changes:
    - summary: "Added example command for testing Base changes with Revise and failfast"
      component: "Documentation"
      evidence:
        - source: "diff"
          path: "AGENTS.md"
          loc: "43-46"
          url: "https://github.com/JuliaLang/julia/blob/7bafdc43171a59cfab0177d9fb483212c64f019f/AGENTS.md#L43-L46"
          snippet: |
            For instance testing Base changes without rebuilding, using failfast, you can run:
            ```
            JULIA_TEST_FAILFAST=1 ./julia -e 'using Revise; Revise.track(Base); include("test.jl")'
            ```
        - source: "context"
          path: "stdlib/Test/src/Test.jl"
          loc: "41-43"
          note: "JULIA_TEST_FAILFAST implementation (for reference only - not modified by PR)"
          snippet: |
            const global_fail_fast = OncePerProcess{Bool}() do
                return Base.get_bool_env("JULIA_TEST_FAILFAST", false)
            end
        - source: "context"
          path: "doc/src/devdocs/contributing/code-changes.md"
          loc: "40-46"
          note: "Related documentation for Revise workflow (not modified by PR)"
          snippet: |
            ### Modifying base more efficiently with Revise.jl

            [Revise](https://github.com/timholy/Revise.jl) is a package that
            tracks changes in source files and automatically updates function
            definitions in your running Julia session. Using it, you can make
            extensive changes to Base without needing to rebuild in order to test
            your changes.

  secondary_effects: []

  compatibility:
    internal_api: []
    behavioral: []

  performance:
    compile_time: []
    runtime: []

  risk:
    level: low
    rationale:
      - "Documentation-only change with no code modifications"
      - "No changes to compiler, runtime, or any Julia source code"
      - "Only affects AI agent guidance for development workflow"
      - "Example is contextually consistent with existing AGENTS.md content (lines 36-41 discuss Revise, line 77 mentions JULIA_TEST_FAILFAST)"

  downstream_impact:
    opaque_closure: "No impact - documentation only"
    generated_functions: "No impact - documentation only"
    world_age_invalidation: "No impact - documentation only"
    internal_api_consumers: "No impact - documentation only"
    effect_flags: "No impact - documentation only"

  open_questions: []

  recommendations:
    - "No action needed for downstream package maintainers - this is purely a developer documentation update"

  independent_verification:
    reviewer: "Second analyst"
    date: "2026-01-21"
    methodology:
      - "Examined PR metadata and patch from pr_59746.json"
      - "Read full AGENTS.md file (122 lines) to verify context"
      - "Searched codebase for JULIA_TEST_FAILFAST usage (found in 4 files)"
      - "Searched codebase for Revise.track(Base) usage (found in 4 files)"
      - "Verified JULIA_TEST_FAILFAST implementation in stdlib/Test/src/Test.jl"
      - "Cross-referenced with doc/src/devdocs/contributing/code-changes.md"
    findings:
      - "Confirmed documentation-only change - only AGENTS.md modified (5 additions, 0 deletions)"
      - "Example combines two existing, well-documented features"
      - "PR body correctly notes dependency on Revise.jl PR #959 for automatic tracking"
      - "No compiler, runtime, or test code modifications"
      - "Consistent with existing documentation patterns in code-changes.md"
    agreement_with_original: "Full agreement - original analysis is accurate and complete"

changelog:
  category: "Documentation"
  breaking: false
  summary: |
    Expanded AGENTS.md documentation for AI agents with a concrete example showing how to test
    Base changes without a full rebuild. The example demonstrates using JULIA_TEST_FAILFAST=1
    with Revise.track(Base) to run tests quickly during development.
  details: |
    This PR adds a practical example to the "Using Revise" section of AGENTS.md:

    ```bash
    JULIA_TEST_FAILFAST=1 ./julia -e 'using Revise; Revise.track(Base); include("test.jl")'
    ```

    The example is intended to help AI coding agents (and human developers) understand
    the recommended workflow for testing Base modifications without needing to rebuild
    the entire Julia system image. The PR body notes this workflow relies on
    Revise.jl PR #959 for the automatic tracking to work without explicit revise() calls.

  downstream_action: "none"
  downstream_notes: |
    This is a documentation-only change to AGENTS.md, which provides guidance for AI agents
    working on Julia development. It has no impact on:
    - Compiler behavior
    - Type inference
    - Code generation
    - Runtime behavior
    - Any APIs (internal or external)

    No changes are needed in downstream packages.
