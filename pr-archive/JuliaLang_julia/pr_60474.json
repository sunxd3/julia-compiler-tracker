{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60474",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60474/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60474/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60474/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60474",
  "id": 3760881863,
  "node_id": "PR_kwDOABkWpM66gja3",
  "number": 60474,
  "title": "Allow parsing to `Expr`-structured `SyntaxTree`",
  "user": {
    "login": "mlechu",
    "id": 61633163,
    "node_id": "MDQ6VXNlcjYxNjMzMTYz",
    "avatar_url": "https://avatars.githubusercontent.com/u/61633163?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mlechu",
    "html_url": "https://github.com/mlechu",
    "followers_url": "https://api.github.com/users/mlechu/followers",
    "following_url": "https://api.github.com/users/mlechu/following{/other_user}",
    "gists_url": "https://api.github.com/users/mlechu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mlechu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mlechu/subscriptions",
    "organizations_url": "https://api.github.com/users/mlechu/orgs",
    "repos_url": "https://api.github.com/users/mlechu/repos",
    "events_url": "https://api.github.com/users/mlechu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mlechu/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 9763847389,
      "node_id": "LA_kwDOABkWpM8AAAACRfh83Q",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/JuliaLowering",
      "name": "JuliaLowering",
      "color": "144fbf",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 2,
  "created_at": "2025-12-24T19:27:23Z",
  "updated_at": "2025-12-29T20:11:01Z",
  "closed_at": "2025-12-29T16:53:06Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60474",
    "html_url": "https://github.com/JuliaLang/julia/pull/60474",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60474.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60474.patch",
    "merged_at": "2025-12-29T16:53:06Z"
  },
  "body": "PR 3 in the list described in https://github.com/JuliaLang/julia/pull/60373.  One more to go!\r\nAtop https://github.com/JuliaLang/julia/pull/60431.\r\n\r\nThis change allows parsing to \"`EST`\" (`SyntaxTree` with Expr structure for\r\ncompatibility with macros) by adding a way to convert `RawGreenNode` to `EST`.\r\nThis is pretty similar to our existing `RawGreenNode`->`Expr` conversion\r\n`node_to_expr`, so there's some unfortunate duplication here, but I did this\r\nover making `node_to_expr`'s output generic for a few reasons:\r\n- `RawGreenNode`->`Expr` is production code we're using today and is the\r\n  reference I'm testing this change against, so I don't want to screw with it.\r\n- Producing `SyntaxTree` means working with different constraints:\r\n  - We can't efficiently mutate the list of children after the tree is created.\r\n  - Nodes that are created and never used will stick around in the graph.\r\n  - Each node needs to remember what node it was converted from.\r\n- I've cleaned up the algorithm by postponing recursion on child nodes until\r\n  after we decide what child nodes there will be in most cases.\r\n- In a future where we pass provenance from parsing to macro-expansion by\r\n  default, we can just delete the old conversion and use\r\n  `RawGreenNode`->`EST`->`Expr` in its place.\r\n\r\n## Reviewer notes:\r\n- I have attempted to automate your job as much as possible.  Conversion\r\n  `RawGreenNode->EST->Expr` is tested against the existing `RawGreenNode->Expr`\r\n  conversion by parsing all julia files in `./JuliaLowering`, `./base`, `./test`\r\n  and the stdlibs like how JuliaSyntax tests parsing to `Expr` against the\r\n  flisp parser.\r\n- Cases can be compared against the existing conversion in `JuliaSyntax/expr.jl`\r\n  mostly one-to-one, but algorithm changes have simplified or moved a few cases.\r\n  Any cases that handle macro expansion output (`:scope_layer`, `K\"meta\"`) can\r\n  be ignored; this new conversion (and the old one too, once I make PR 4) will only\r\n  need to deal with surface syntax.\r\n",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60474/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60474/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0
}