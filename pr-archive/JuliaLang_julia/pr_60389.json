{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60389",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60389/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60389/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60389/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60389",
  "id": 3732695940,
  "node_id": "PR_kwDOABkWpM65CxRP",
  "number": 60389,
  "title": "Fix `membarrier` usage on FreeBSD",
  "user": {
    "login": "ararslan",
    "id": 6396159,
    "node_id": "MDQ6VXNlcjYzOTYxNTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6396159?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ararslan",
    "html_url": "https://github.com/ararslan",
    "followers_url": "https://api.github.com/users/ararslan/followers",
    "following_url": "https://api.github.com/users/ararslan/following{/other_user}",
    "gists_url": "https://api.github.com/users/ararslan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ararslan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ararslan/subscriptions",
    "organizations_url": "https://api.github.com/users/ararslan/orgs",
    "repos_url": "https://api.github.com/users/ararslan/repos",
    "events_url": "https://api.github.com/users/ararslan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ararslan/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 414648058,
      "node_id": "MDU6TGFiZWw0MTQ2NDgwNTg=",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/bugfix",
      "name": "bugfix",
      "color": "15ff91",
      "default": false,
      "description": "This change fixes an existing bug"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 2,
  "created_at": "2025-12-16T01:13:35Z",
  "updated_at": "2025-12-31T05:36:26Z",
  "closed_at": "2025-12-16T12:02:11Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60389",
    "html_url": "https://github.com/JuliaLang/julia/pull/60389",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60389.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60389.patch",
    "merged_at": "2025-12-16T12:02:11Z"
  },
  "body": "`membarrier` on FreeBSD takes three arguments but we're only giving it two, which failed to compile. It can take three on Linux too, so let's give it three. Our FreeBSD CI runs 13.4, but `membarrier` was introduced in 14.1, so none of the code guarded by `HAVE_MEMBARRIER_SYSCALL` is compiled on CI; I observed the build failure locally on 14.3.",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60389/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60389/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "7c1d54fe18d1e871123ef4d833925d2b52515811",
      "filename": "src/signals-unix.c",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/JuliaLang/julia/blob/206d7b11f378e204c21f9e86fba9e97d819e7596/src%2Fsignals-unix.c",
      "raw_url": "https://github.com/JuliaLang/julia/raw/206d7b11f378e204c21f9e86fba9e97d819e7596/src%2Fsignals-unix.c",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fsignals-unix.c?ref=206d7b11f378e204c21f9e86fba9e97d819e7596",
      "patch": "@@ -1519,11 +1519,11 @@ enum membarrier_cmd {\n \n static enum membarrier_implementation jl_init_membarrier(void) {\n #ifdef HAVE_MEMBARRIER_SYSCALL\n-    int ret = membarrier(MEMBARRIER_CMD_QUERY, 0);\n+    int ret = membarrier(MEMBARRIER_CMD_QUERY, 0, 0);\n     int needed = MEMBARRIER_CMD_PRIVATE_EXPEDITED | MEMBARRIER_CMD_REGISTER_PRIVATE_EXPEDITED;\n     if (ret > 0 && ((ret & needed) == needed)) {\n         // supported\n-        if (membarrier(MEMBARRIER_CMD_REGISTER_PRIVATE_EXPEDITED, 0) == 0) {\n+        if (membarrier(MEMBARRIER_CMD_REGISTER_PRIVATE_EXPEDITED, 0, 0) == 0) {\n             // working\n             jl_atomic_store_relaxed(&membarrier_impl, MEMBARRIER_IMPLEMENTATION_SYS_MEMBARRIER);\n             return MEMBARRIER_IMPLEMENTATION_SYS_MEMBARRIER;\n@@ -1550,7 +1550,7 @@ JL_DLLEXPORT void jl_membarrier(void) {\n     switch (impl) {\n #ifdef HAVE_MEMBARRIER_SYSCALL\n     case MEMBARRIER_IMPLEMENTATION_SYS_MEMBARRIER: {\n-        int ret = membarrier(MEMBARRIER_CMD_PRIVATE_EXPEDITED, 0);\n+        int ret = membarrier(MEMBARRIER_CMD_PRIVATE_EXPEDITED, 0, 0);\n         assert(ret == 0);\n         (void)ret;\n         break;"
    }
  ]
}