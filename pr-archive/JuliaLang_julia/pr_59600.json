{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/59600",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/59600/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/59600/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/59600/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/59600",
  "id": 3433503736,
  "node_id": "PR_kwDOABkWpM6pdd_J",
  "number": 59600,
  "title": "Expose `Core.memoryrefoffset` as `Base.memoryindex`",
  "user": {
    "login": "jakobnissen",
    "id": 23193950,
    "node_id": "MDQ6VXNlcjIzMTkzOTUw",
    "avatar_url": "https://avatars.githubusercontent.com/u/23193950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jakobnissen",
    "html_url": "https://github.com/jakobnissen",
    "followers_url": "https://api.github.com/users/jakobnissen/followers",
    "following_url": "https://api.github.com/users/jakobnissen/following{/other_user}",
    "gists_url": "https://api.github.com/users/jakobnissen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jakobnissen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jakobnissen/subscriptions",
    "organizations_url": "https://api.github.com/users/jakobnissen/orgs",
    "repos_url": "https://api.github.com/users/jakobnissen/repos",
    "events_url": "https://api.github.com/users/jakobnissen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jakobnissen/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 62693664,
      "node_id": "MDU6TGFiZWw2MjY5MzY2NA==",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/arrays",
      "name": "arrays",
      "color": "006b75",
      "default": false,
      "description": "[a, r, r, a, y, s]"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "LilithHafner",
    "id": 60898866,
    "node_id": "MDQ6VXNlcjYwODk4ODY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/60898866?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LilithHafner",
    "html_url": "https://github.com/LilithHafner",
    "followers_url": "https://api.github.com/users/LilithHafner/followers",
    "following_url": "https://api.github.com/users/LilithHafner/following{/other_user}",
    "gists_url": "https://api.github.com/users/LilithHafner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LilithHafner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LilithHafner/subscriptions",
    "organizations_url": "https://api.github.com/users/LilithHafner/orgs",
    "repos_url": "https://api.github.com/users/LilithHafner/repos",
    "events_url": "https://api.github.com/users/LilithHafner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LilithHafner/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "LilithHafner",
      "id": 60898866,
      "node_id": "MDQ6VXNlcjYwODk4ODY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/60898866?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LilithHafner",
      "html_url": "https://github.com/LilithHafner",
      "followers_url": "https://api.github.com/users/LilithHafner/followers",
      "following_url": "https://api.github.com/users/LilithHafner/following{/other_user}",
      "gists_url": "https://api.github.com/users/LilithHafner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LilithHafner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LilithHafner/subscriptions",
      "organizations_url": "https://api.github.com/users/LilithHafner/orgs",
      "repos_url": "https://api.github.com/users/LilithHafner/repos",
      "events_url": "https://api.github.com/users/LilithHafner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LilithHafner/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2025-09-19T08:53:39Z",
  "updated_at": "2025-11-12T14:06:08Z",
  "closed_at": "2025-10-09T08:51:55Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/59600",
    "html_url": "https://github.com/JuliaLang/julia/pull/59600",
    "diff_url": "https://github.com/JuliaLang/julia/pull/59600.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/59600.patch",
    "merged_at": "2025-10-09T08:51:55Z"
  },
  "body": "This exposes Core.memoryrefoffset as API through a generic function - currently the public, unexported `Base.memoryindex`\r\n\r\nThis closes https://github.com/JuliaLang/julia/issues/59574.\r\n\r\nIn the issue, we did not reach consensus on what function should be used. The possibilities floated were:\r\n1. Make the built-in `Core.memoryrefoffset` public\r\n2. Define `Base.parentindices(::GenericMemoryRef)` (what this PR originally did)\r\n3. Create and export/make public a new generic function specifically for memoryrefs.\r\n\r\nI don't care much either way, but went with option 2 initially.",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/59600/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/59600/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "12d646411f837ebfbd658f245c5ca0d864ef96ff",
      "filename": "base/genericmemory.jl",
      "status": "modified",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/JuliaLang/julia/blob/aab3002a49d7467b57e6fec1c087a766f3db7d73/base%2Fgenericmemory.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/aab3002a49d7467b57e6fec1c087a766f3db7d73/base%2Fgenericmemory.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fgenericmemory.jl?ref=aab3002a49d7467b57e6fec1c087a766f3db7d73",
      "patch": "@@ -72,6 +72,27 @@ IndexStyle(::Type{<:GenericMemory}) = IndexLinear()\n \n parent(ref::GenericMemoryRef) = ref.mem\n \n+\"\"\"\n+    memoryindex(ref::GenericMemoryRef)::Int\n+\n+Get the 1-based index of `ref` in its `GenericMemory`.\n+\n+# Examples\n+```jldoctest\n+julia> mem = Memory{String}(undef, 10);\n+\n+julia> ref = Base.memoryindex(memoryref(mem, 3))\n+3\n+\n+julia> Base.memoryindex(memoryref(Memory{Nothing}(undef, 10), 8))\n+8\n+```\n+\n+!!! compat \"Julia 1.13\"\n+    This function requires at least Julia 1.13.\n+\"\"\"\n+memoryindex(ref::GenericMemoryRef) = memoryrefoffset(ref)\n+\n pointer(mem::GenericMemoryRef) = unsafe_convert(Ptr{Cvoid}, mem) # no bounds check, even for empty array\n \n _unsetindex!(A::Memory, i::Int) =  (@_propagate_inbounds_meta; _unsetindex!(memoryref(A, i)); A)"
    },
    {
      "sha": "0f5d4424417aeb094d38612031cef5aa22604f24",
      "filename": "base/public.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/aab3002a49d7467b57e6fec1c087a766f3db7d73/base%2Fpublic.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/aab3002a49d7467b57e6fec1c087a766f3db7d73/base%2Fpublic.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fpublic.jl?ref=aab3002a49d7467b57e6fec1c087a766f3db7d73",
      "patch": "@@ -34,6 +34,7 @@ public\n # arrays\n     has_offset_axes,\n     require_one_based_indexing,\n+    memoryindex,\n \n # collections\n     IteratorEltype,"
    },
    {
      "sha": "f142f675320174e67112fdc12626c009797d7257",
      "filename": "doc/src/base/arrays.md",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/aab3002a49d7467b57e6fec1c087a766f3db7d73/doc%2Fsrc%2Fbase%2Farrays.md",
      "raw_url": "https://github.com/JuliaLang/julia/raw/aab3002a49d7467b57e6fec1c087a766f3db7d73/doc%2Fsrc%2Fbase%2Farrays.md",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/doc%2Fsrc%2Fbase%2Farrays.md?ref=aab3002a49d7467b57e6fec1c087a766f3db7d73",
      "patch": "@@ -34,6 +34,7 @@ Base.GenericMemory\n Base.Memory\n Base.Memory(::UndefInitializer, ::Int)\n Base.memoryref\n+Base.memoryindex\n Base.Slices\n Base.RowSlices\n Base.ColumnSlices"
    },
    {
      "sha": "cbbc041a701ee6e5d19628e69b4202d46666c0a2",
      "filename": "test/arrayops.jl",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/JuliaLang/julia/blob/aab3002a49d7467b57e6fec1c087a766f3db7d73/test%2Farrayops.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/aab3002a49d7467b57e6fec1c087a766f3db7d73/test%2Farrayops.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Farrayops.jl?ref=aab3002a49d7467b57e6fec1c087a766f3db7d73",
      "patch": "@@ -3385,4 +3385,11 @@ end\n     mem = Memory{Float32}(undef, 3)\n     ref = memoryref(mem, 2)\n     @test parent(ref) === mem\n+    @test Base.memoryindex(ref) === 2\n+\n+    # Test for zero-sized structs\n+    mem = Memory{Nothing}(undef, 10)\n+    ref = memoryref(mem, 8)\n+    @test parent(ref) === mem\n+    @test Base.memoryindex(ref) === 8\n end"
    }
  ]
}