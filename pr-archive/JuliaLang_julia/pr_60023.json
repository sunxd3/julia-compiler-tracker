{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60023",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60023/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60023/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60023/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60023",
  "id": 3579772923,
  "node_id": "PR_kwDOABkWpM6xEixs",
  "number": 60023,
  "title": "Don't trigger full rebuild if git is dirty",
  "user": {
    "login": "IanButterworth",
    "id": 1694067,
    "node_id": "MDQ6VXNlcjE2OTQwNjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1694067?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/IanButterworth",
    "html_url": "https://github.com/IanButterworth",
    "followers_url": "https://api.github.com/users/IanButterworth/followers",
    "following_url": "https://api.github.com/users/IanButterworth/following{/other_user}",
    "gists_url": "https://api.github.com/users/IanButterworth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/IanButterworth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/IanButterworth/subscriptions",
    "organizations_url": "https://api.github.com/users/IanButterworth/orgs",
    "repos_url": "https://api.github.com/users/IanButterworth/repos",
    "events_url": "https://api.github.com/users/IanButterworth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/IanButterworth/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 210703,
      "node_id": "MDU6TGFiZWwyMTA3MDM=",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/building",
      "name": "building",
      "color": "444444",
      "default": false,
      "description": "Build system, or building Julia or its dependencies"
    },
    {
      "id": 5674040959,
      "node_id": "LA_kwDOABkWpM8AAAABUjL-fw",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/backport%201.10",
      "name": "backport 1.10",
      "color": "A49B65",
      "default": false,
      "description": "Change should be backported to the 1.10 release"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 3,
  "created_at": "2025-11-02T17:49:17Z",
  "updated_at": "2025-11-28T20:10:15Z",
  "closed_at": "2025-11-05T21:49:41Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60023",
    "html_url": "https://github.com/JuliaLang/julia/pull/60023",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60023.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60023.patch",
    "merged_at": "2025-11-05T21:49:41Z"
  },
  "body": "Fixes https://github.com/JuliaLang/julia/issues/54652\r\n\r\nNote no rebuild here, but the commit has the `*` when dirty. \r\nOn master this would've rebuild julia each time.\r\n\r\n```\r\n% ./julia --start=no\r\n               _\r\n   _       _ _(_)_     |  Documentation: https://docs.julialang.org\r\n  (_)     | (_) (_)    |\r\n   _ _   _| |_  __ _   |  Type \"?\" for help, \"]?\" for Pkg help.\r\n  | | | | | | |/ _` |  |\r\n  | | |_| | | | (_| |  |  Version 1.14.0-DEV.27 (2025-11-02)\r\n _/ |\\__'_|_|_|\\__'_|  |  ib/dont_dirty_rebuild/5ac34bb5dc (fork: 1 commits, 0 days)\r\n|__/                   |\r\n\r\njulia>\r\n```\r\nThen edited a test file.\r\n```\r\n% make -j6\r\n% ./julia --start=no\r\n               _\r\n   _       _ _(_)_     |  Documentation: https://docs.julialang.org\r\n  (_)     | (_) (_)    |\r\n   _ _   _| |_  __ _   |  Type \"?\" for help, \"]?\" for Pkg help.\r\n  | | | | | | |/ _` |  |\r\n  | | |_| | | | (_| |  |  Version 1.14.0-DEV.27 (2025-11-02)\r\n _/ |\\__'_|_|_|\\__'_|  |  ib/dont_dirty_rebuild/5ac34bb5dc* (fork: 1 commits, 0 days)\r\n|__/                   |\r\n\r\njulia>\r\n```\r\nThen reverted the edit.\r\n```\r\n% make -j6\r\n% ./julia --start=no\r\n               _\r\n   _       _ _(_)_     |  Documentation: https://docs.julialang.org\r\n  (_)     | (_) (_)    |\r\n   _ _   _| |_  __ _   |  Type \"?\" for help, \"]?\" for Pkg help.\r\n  | | | | | | |/ _` |  |\r\n  | | |_| | | | (_| |  |  Version 1.14.0-DEV.27 (2025-11-02)\r\n _/ |\\__'_|_|_|\\__'_|  |  ib/dont_dirty_rebuild/5ac34bb5dc (fork: 1 commits, 0 days)\r\n|__/                   |\r\n\r\njulia>\r\n```",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60023/reactions",
    "total_count": 2,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 2,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60023/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "4d02a98c010006a01e2c2eb4e2b213fee17ae6a2",
      "filename": "base/.gitignore",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/77c040ebef5ad3b476d51bc3f5858174aa20b3f9/base%2F.gitignore",
      "raw_url": "https://github.com/JuliaLang/julia/raw/77c040ebef5ad3b476d51bc3f5858174aa20b3f9/base%2F.gitignore",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2F.gitignore?ref=77c040ebef5ad3b476d51bc3f5858174aa20b3f9",
      "patch": "@@ -7,5 +7,6 @@\n /uv_constants.jl\n /version_git.jl\n /version_git.jl.phony\n+/version_git_dirty\n /userimg.jl\n /JuliaSyntax"
    },
    {
      "sha": "f748295c2e6fcbd4abbb51ba07b70de542a8996d",
      "filename": "base/Makefile",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/77c040ebef5ad3b476d51bc3f5858174aa20b3f9/base%2FMakefile",
      "raw_url": "https://github.com/JuliaLang/julia/raw/77c040ebef5ad3b476d51bc3f5858174aa20b3f9/base%2FMakefile",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2FMakefile?ref=77c040ebef5ad3b476d51bc3f5858174aa20b3f9",
      "patch": "@@ -306,4 +306,5 @@ clean:\n \t-rm -f $(BUILDDIR)/file_constants.jl\n \t-rm -f $(BUILDDIR)/version_git.jl\n \t-rm -f $(BUILDDIR)/version_git.jl.phony\n+\t-rm -f $(BUILDDIR)/version_git_dirty\n \t-rm -f $(build_private_libdir)/lib*.$(SHLIB_EXT)*"
    },
    {
      "sha": "b88fbcf04d0d1265f23db10095d7ef0b11afd996",
      "filename": "base/version_git.sh",
      "status": "modified",
      "additions": 26,
      "deletions": 3,
      "changes": 29,
      "blob_url": "https://github.com/JuliaLang/julia/blob/77c040ebef5ad3b476d51bc3f5858174aa20b3f9/base%2Fversion_git.sh",
      "raw_url": "https://github.com/JuliaLang/julia/raw/77c040ebef5ad3b476d51bc3f5858174aa20b3f9/base%2Fversion_git.sh",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fversion_git.sh?ref=77c040ebef5ad3b476d51bc3f5858174aa20b3f9",
      "patch": "@@ -6,7 +6,7 @@\n echo \"# This file was autogenerated by base/version_git.sh\"\n echo \"struct GitVersionInfo\"\n echo \"    commit::String\"\n-echo \"    commit_short::String\"\n+echo \"    commit_short_raw::String\"\n echo \"    branch::String\"\n echo \"    build_number::Int\"\n echo \"    date_string::String\"\n@@ -17,6 +17,24 @@ echo \"    build_system_commit::String\"\n echo \"    build_system_commit_short::String\"\n echo \"end\"\n echo \"\"\n+echo \"function Base.getproperty(info::GitVersionInfo, s::Symbol)\"\n+echo \"    if s === :commit_short\"\n+echo \"        commit = getfield(info, :commit_short_raw)\"\n+echo \"        dirty_file = joinpath(Sys.BINDIR, Base.DATAROOTDIR, \\\"julia\\\", \\\"base\\\", \\\"version_git_dirty\\\")\"\n+echo \"        dirty_str = try\"\n+echo \"            read(dirty_file, String)\"\n+echo \"        catch\"\n+echo \"            \\\"\\\"\"\n+echo \"        end\"\n+echo \"        if strip(dirty_str) == \\\"true\\\"\"\n+echo \"            return commit * \\\"*\\\"\"\n+echo \"        end\"\n+echo \"        return commit\"\n+echo \"    else\"\n+echo \"        return getfield(info, s)\"\n+echo \"    end\"\n+echo \"end\"\n+echo \"\"\n \n cd $1\n \n@@ -38,8 +56,9 @@ git_time=$(git log -1 --pretty=format:%ct)\n commit=$(git rev-parse HEAD)\n commit_short=$(git rev-parse --short HEAD)\n if [ -n \"$(git status --porcelain)\" ]; then\n-    # append dirty mark '*' if the repository has uncommitted changes\n-    commit_short=\"$commit_short\"*\n+    dirty=\"true\"\n+else\n+    dirty=\"false\"\n fi\n \n # Our CI system checks commits out as a detached head, and so we must\n@@ -117,3 +136,7 @@ echo \"    $fork_master_timestamp.0,\"\n echo \"    \\\"$build_system_commit\\\",\"\n echo \"    \\\"$build_system_commit_short\\\",\"\n echo \")\"\n+\n+# Write dirty status to a separate file to avoid triggering rebuilds\n+# when only the dirty status changes\n+echo \"$dirty\" > version_git_dirty"
    },
    {
      "sha": "60e2016cf910beeb68b538ae1cacfff37d865300",
      "filename": "stdlib/InteractiveUtils/src/InteractiveUtils.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/77c040ebef5ad3b476d51bc3f5858174aa20b3f9/stdlib%2FInteractiveUtils%2Fsrc%2FInteractiveUtils.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/77c040ebef5ad3b476d51bc3f5858174aa20b3f9/stdlib%2FInteractiveUtils%2Fsrc%2FInteractiveUtils.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FInteractiveUtils%2Fsrc%2FInteractiveUtils.jl?ref=77c040ebef5ad3b476d51bc3f5858174aa20b3f9",
      "patch": "@@ -102,7 +102,7 @@ See also: [`VERSION`](@ref).\n \"\"\"\n function versioninfo(io::IO=stdout; verbose::Bool=false)\n     println(io, \"Julia Version $VERSION\")\n-    if !isempty(Base.GIT_VERSION_INFO.commit_short)\n+    if !isempty(Base.GIT_VERSION_INFO.commit_short_raw)\n         println(io, \"Commit $(Base.GIT_VERSION_INFO.commit_short) ($(Base.GIT_VERSION_INFO.date_string))\")\n     end\n     official_release = Base.TAGGED_RELEASE_BANNER == \"Official https://julialang.org release\""
    }
  ]
}