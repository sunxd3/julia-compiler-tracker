{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60410",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60410/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60410/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60410/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60410",
  "id": 3740969002,
  "node_id": "PR_kwDOABkWpM65esDD",
  "number": 60410,
  "title": "[JuliaLowering] Add support for `Expr(:loopinfo, ...)`",
  "user": {
    "login": "topolarity",
    "id": 84105208,
    "node_id": "MDQ6VXNlcjg0MTA1MjA4",
    "avatar_url": "https://avatars.githubusercontent.com/u/84105208?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/topolarity",
    "html_url": "https://github.com/topolarity",
    "followers_url": "https://api.github.com/users/topolarity/followers",
    "following_url": "https://api.github.com/users/topolarity/following{/other_user}",
    "gists_url": "https://api.github.com/users/topolarity/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/topolarity/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/topolarity/subscriptions",
    "organizations_url": "https://api.github.com/users/topolarity/orgs",
    "repos_url": "https://api.github.com/users/topolarity/repos",
    "events_url": "https://api.github.com/users/topolarity/events{/privacy}",
    "received_events_url": "https://api.github.com/users/topolarity/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 9763847389,
      "node_id": "LA_kwDOABkWpM8AAAACRfh83Q",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/JuliaLowering",
      "name": "JuliaLowering",
      "color": "144fbf",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2025-12-18T00:45:13Z",
  "updated_at": "2025-12-18T13:39:29Z",
  "closed_at": "2025-12-18T13:39:23Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60410",
    "html_url": "https://github.com/JuliaLang/julia/pull/60410",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60410.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60410.patch",
    "merged_at": "2025-12-18T13:39:23Z"
  },
  "body": "Very trivial change, but this is enough to get Statistics precompiling.\r\n\r\nI also confirmed that we see the expected performance delta on our [performance-tips example](https://docs.julialang.org/en/v1/manual/performance-tips/#man-performance-annotations):\r\n```julia\r\njulia> timeit(1000, 1000)\r\nGFlop/sec        = 3.918357111230404\r\nGFlop/sec (SIMD) = 39.943280541630884\r\n```",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60410/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60410/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "dd5d777f2de17b751965599808ee7e05c430924a",
      "filename": "JuliaLowering/src/eval.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/e7ef2c15e0ee62a67475d21a47df3ad74608fd11/JuliaLowering%2Fsrc%2Feval.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/e7ef2c15e0ee62a67475d21a47df3ad74608fd11/JuliaLowering%2Fsrc%2Feval.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/JuliaLowering%2Fsrc%2Feval.jl?ref=e7ef2c15e0ee62a67475d21a47df3ad74608fd11",
      "patch": "@@ -435,6 +435,7 @@ function _to_lowered_expr(ex::SyntaxTree, stmt_offset::Int)\n                k == K\"=\"         ? :(=)        :\n                k == K\"leave\"     ? :leave      :\n                k == K\"isdefined\" ? :isdefined  :\n+               k == K\"loopinfo\"  ? :loopinfo   :\n                k == K\"latestworld\"       ? :latestworld       :\n                k == K\"pop_exception\"     ? :pop_exception     :\n                k == K\"captured_local\"    ? :captured_local    :"
    },
    {
      "sha": "91faacf872ff7ff7a9855c8872d874ee35a83fd9",
      "filename": "JuliaLowering/src/linear_ir.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/e7ef2c15e0ee62a67475d21a47df3ad74608fd11/JuliaLowering%2Fsrc%2Flinear_ir.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/e7ef2c15e0ee62a67475d21a47df3ad74608fd11/JuliaLowering%2Fsrc%2Flinear_ir.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/JuliaLowering%2Fsrc%2Flinear_ir.jl?ref=e7ef2c15e0ee62a67475d21a47df3ad74608fd11",
      "patch": "@@ -792,7 +792,7 @@ function compile(ctx::LinearIRContext, ex, needs_value, in_tail_pos)\n         end\n     elseif k == K\"gc_preserve_begin\"\n         makenode(ctx, ex, k, compile_args(ctx, children(ex)))\n-    elseif k == K\"gc_preserve_end\"\n+    elseif k == K\"gc_preserve_end\" || k == K\"loopinfo\"\n         if needs_value\n             throw(LoweringError(ex, \"misplaced kind $k in value position\"))\n         end"
    },
    {
      "sha": "568a10b3e87a5fece178a662e664bde38426b3f7",
      "filename": "JuliaLowering/test/macros.jl",
      "status": "modified",
      "additions": 53,
      "deletions": 0,
      "changes": 53,
      "blob_url": "https://github.com/JuliaLang/julia/blob/e7ef2c15e0ee62a67475d21a47df3ad74608fd11/JuliaLowering%2Ftest%2Fmacros.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/e7ef2c15e0ee62a67475d21a47df3ad74608fd11/JuliaLowering%2Ftest%2Fmacros.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/JuliaLowering%2Ftest%2Fmacros.jl?ref=e7ef2c15e0ee62a67475d21a47df3ad74608fd11",
      "patch": "@@ -560,4 +560,57 @@ code = JuliaLowering.include_string(test_mod, \"\"\"Mod1.@indirect_MODULE()\"\"\")\n         test_mod, \"@make_and_use_macro_toplevel()\"; expr_compat_mode=false) === 123\n end\n \n+@testset \"SIMD loopinfo\" begin\n+    @test JuliaLowering.include_string(test_mod, raw\"\"\"\n+    @eval let\n+        n = 10\n+        x = zeros(n)\n+        i = 1\n+        while i \u2264 n\n+            x[i] += 1\n+            i += 1\n+            $(Expr(:loopinfo, Symbol(\"julia.simdloop\"), nothing))  # Mark loop as SIMD loop\n+        end\n+        sum(x)\n+    end\n+    \"\"\"; expr_compat_mode=true) == 10.0\n+\n+    @test JuliaLowering.include_string(test_mod, raw\"\"\"\n+    @eval let\n+        n = 10\n+        x = zeros(n)\n+        i = 1\n+        while i \u2264 n\n+            x[i] += 1\n+            i += 1\n+            $(Expr(:loopinfo, Symbol(\"julia.simdloop\"), Symbol(\"julia.ivdep\")))  # Mark loop as SIMD loop\n+        end\n+        sum(x)\n+    end\n+    \"\"\"; expr_compat_mode=true) == 10.0\n+\n+    JuliaLowering.include_string(test_mod, \"\"\"\n+    @noinline function inner(x, y)\n+        s = zero(eltype(x))\n+        for i in eachindex(x, y)\n+            @inbounds s += x[i]*y[i]\n+        end\n+        return s\n+    end\n+    \"\"\")\n+\n+    JuliaLowering.include_string(test_mod, \"\"\"\n+    @noinline function innersimd(x, y)\n+        s = zero(eltype(x))\n+        @simd for i in eachindex(x, y)\n+            @inbounds s += x[i] * y[i]\n+        end\n+        return s\n+    end\n+    \"\"\")\n+\n+    @test test_mod.inner([1,2,3], [1,2,3]) == 14\n+    @test test_mod.innersimd([1,2,3], [1,2,3]) == 14\n+end\n+\n end"
    },
    {
      "sha": "946614dbfa13163d776629e3c385d3908b0ba53a",
      "filename": "test/JuliaLowering_stdlibs.jl",
      "status": "modified",
      "additions": 9,
      "deletions": 12,
      "changes": 21,
      "blob_url": "https://github.com/JuliaLang/julia/blob/e7ef2c15e0ee62a67475d21a47df3ad74608fd11/test%2FJuliaLowering_stdlibs.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/e7ef2c15e0ee62a67475d21a47df3ad74608fd11/test%2FJuliaLowering_stdlibs.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2FJuliaLowering_stdlibs.jl?ref=e7ef2c15e0ee62a67475d21a47df3ad74608fd11",
      "patch": "@@ -2,18 +2,15 @@ import Libdl\n \n # known precompilation failures under JL\n const INCOMPATIBLE_STDLIBS = String[\n-    \"InteractiveUtils\"\n-    \"LazyArtifacts\"\n-    \"LibGit2\"\n-    \"Pkg\"\n-    \"REPL\"\n-    \"REPLExt\"\n-    \"SparseArrays\"\n-    \"SparseArraysExt\"\n-    \"Statistics\"\n-    \"SuiteSparse\"\n-    \"TOML\"\n-    \"Test\"\n+    \"InteractiveUtils\", # Invalid function name\n+    \"LibGit2\", # op isa Symbol (JuliaLang/JuliaLowering.jl#126)\n+    \"SparseArrays\", # type-alias bug (JuliaLang/JuliaLowering.jl#123)\n+    \"TOML\", # @invokelatest / QuoteNode bug\n+    \"Test\", # depends on InteractiveUtils\n+    \"REPL\", # depends on InteractiveUtils\n+    \"Pkg\", # depends on TOML\n+    \"SuiteSparse\", # depends on SparseArrays\n+    \"LazyArtifacts\", # depends on Pkg\n ]\n \n const JULIA_EXECUTABLE = Base.unsafe_string(Base.JLOptions().julia_bin)"
    }
  ]
}