{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60627",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60627/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60627/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60627/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60627",
  "id": 3799237891,
  "node_id": "PR_kwDOABkWpM68ctCs",
  "number": 60627,
  "title": "Markdown: fix horizontal rules in code blocks",
  "user": {
    "login": "fingolfin",
    "id": 241512,
    "node_id": "MDQ6VXNlcjI0MTUxMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/241512?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fingolfin",
    "html_url": "https://github.com/fingolfin",
    "followers_url": "https://api.github.com/users/fingolfin/followers",
    "following_url": "https://api.github.com/users/fingolfin/following{/other_user}",
    "gists_url": "https://api.github.com/users/fingolfin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fingolfin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fingolfin/subscriptions",
    "organizations_url": "https://api.github.com/users/fingolfin/orgs",
    "repos_url": "https://api.github.com/users/fingolfin/repos",
    "events_url": "https://api.github.com/users/fingolfin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fingolfin/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2317339600,
      "node_id": "MDU6TGFiZWwyMzE3MzM5NjAw",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/markdown",
      "name": "markdown",
      "color": "D914CD",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2026-01-10T07:01:34Z",
  "updated_at": "2026-01-10T13:27:15Z",
  "closed_at": "2026-01-10T13:27:13Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60627",
    "html_url": "https://github.com/JuliaLang/julia/pull/60627",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60627.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60627.patch",
    "merged_at": "2026-01-10T13:27:13Z"
  },
  "body": "- adjust the horizontalrule rule to accept at most 3 spaces at the\n  start: this simplifies the code, and also makes sure a `***`\n  appearing with a code block indent is no longer turned into a\n  horizontal rule\n- run the `fencedcode` rule first, so that `***` appearing in a\n  fenced code block is also not turned into a horizontal rule\n",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60627/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60627/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "5132456b33a18c6e87c72bbb01b9035dbb32b2e4",
      "filename": "base/sort.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/da6a234b2f1731bd76de5258778af4f76e48d249/base%2Fsort.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/da6a234b2f1731bd76de5258778af4f76e48d249/base%2Fsort.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fsort.jl?ref=da6a234b2f1731bd76de5258778af4f76e48d249",
      "patch": "@@ -1894,7 +1894,7 @@ julia> partialsortperm!(ix, v, 2:3)\n  4\n  3\n ```\n- \"\"\"\n+\"\"\"\n function partialsortperm!(ix::AbstractVector{<:Integer}, v::AbstractVector,\n                           k::Union{Integer, OrdinalRange};\n                           lt::Function=isless,"
    },
    {
      "sha": "0093b32af09db1230e9e299dfeeff67ae759e2d4",
      "filename": "stdlib/Markdown/src/Common/Common.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/JuliaLang/julia/blob/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Fsrc%2FCommon%2FCommon.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Fsrc%2FCommon%2FCommon.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMarkdown%2Fsrc%2FCommon%2FCommon.jl?ref=da6a234b2f1731bd76de5258778af4f76e48d249",
      "patch": "@@ -5,8 +5,8 @@ abstract type MarkdownElement end\n include(\"block.jl\")\n include(\"inline.jl\")\n \n-@flavor common [horizontalrule, list, indentcode, blockquote, admonition, footnote, hashheader,\n-                fencedcode, setextheader, paragraph,\n+@flavor common [fencedcode, horizontalrule, list, indentcode, blockquote, admonition, footnote, hashheader,\n+                setextheader, paragraph,\n \n                 linebreak, escapes,\n                 inline_code,"
    },
    {
      "sha": "ad62db9923fa9339484a0b201902e4c42e90ba77",
      "filename": "stdlib/Markdown/src/Common/block.jl",
      "status": "modified",
      "additions": 7,
      "deletions": 7,
      "changes": 14,
      "blob_url": "https://github.com/JuliaLang/julia/blob/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Fsrc%2FCommon%2Fblock.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Fsrc%2FCommon%2Fblock.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMarkdown%2Fsrc%2FCommon%2Fblock.jl?ref=da6a234b2f1731bd76de5258778af4f76e48d249",
      "patch": "@@ -398,18 +398,18 @@ end\n @breaking true ->\n function horizontalrule(stream::IO, block::MD)\n    withstream(stream) do\n-       n, rule = 0, ' '\n+       eatindent(stream) || return false\n+       eof(stream) && return false\n+       rule = read(stream, Char)\n+       rule in \"*-_\" || return false\n+       n = 1\n        for char in readeach(stream, Char)\n            char == '\\n' && break\n            isspace(char) && continue\n-           if n == 0\n-               rule = char\n-           elseif char != rule\n-               return false\n-           end\n+           char == rule || return false\n            n += 1\n        end\n-       is_hr = (n \u2265 3 && rule in \"*-_\")\n+       is_hr = n \u2265 3\n        is_hr && push!(block, HorizontalRule())\n        return is_hr\n    end"
    },
    {
      "sha": "0adad3980e19bf7560ac8fef6949795656d5327b",
      "filename": "stdlib/Markdown/src/GitHub/GitHub.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/JuliaLang/julia/blob/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Fsrc%2FGitHub%2FGitHub.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Fsrc%2FGitHub%2FGitHub.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMarkdown%2Fsrc%2FGitHub%2FGitHub.jl?ref=da6a234b2f1731bd76de5258778af4f76e48d249",
      "patch": "@@ -23,8 +23,8 @@ function github_paragraph(stream::IO, md::MD)\n     return true\n end\n \n-@flavor github [horizontalrule, list, indentcode, blockquote, admonition, footnote, hashheader,\n-                fencedcode, github_table, github_paragraph,\n+@flavor github [fencedcode, horizontalrule, list, indentcode, blockquote, admonition, footnote, hashheader,\n+                github_table, github_paragraph,\n \n                 linebreak, escapes,\n                 en_or_em_dash, inline_code,"
    },
    {
      "sha": "c9f9c47a9f588e55bfce0a01ef1eef04001b1d6d",
      "filename": "stdlib/Markdown/src/Julia/Julia.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/JuliaLang/julia/blob/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Fsrc%2FJulia%2FJulia.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Fsrc%2FJulia%2FJulia.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMarkdown%2Fsrc%2FJulia%2FJulia.jl?ref=da6a234b2f1731bd76de5258778af4f76e48d249",
      "patch": "@@ -8,8 +8,8 @@\n include(\"interp.jl\")\n \n @flavor julia [blocktex, blockinterp,\n-               horizontalrule, list, indentcode, blockquote, admonition, footnote, hashheader,\n-               fencedcode, github_table, setextheader, paragraph,\n+               fencedcode, horizontalrule, list, indentcode, blockquote, admonition, footnote, hashheader,\n+               github_table, setextheader, paragraph,\n \n                linebreak, escapes,\n                tex, interp,"
    },
    {
      "sha": "907cd8502d4ea2a9ab6e3084d85d3e2d30e9c368",
      "filename": "stdlib/Markdown/test/test_spec_html_common.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Ftest%2Ftest_spec_html_common.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Ftest%2Ftest_spec_html_common.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMarkdown%2Ftest%2Ftest_spec_html_common.jl?ref=da6a234b2f1731bd76de5258778af4f76e48d249",
      "patch": "@@ -373,7 +373,7 @@ end\n     md = Markdown.parse(input; flavor=:common)\n     expected = \"<pre><code>***\\n</code></pre>\\n\"\n     actual = Markdown.html(md)\n-    @test_broken expected == actual\n+    @test expected == actual\n \n     # Example 49\n     input = \"Foo\\n    ***\\n\""
    },
    {
      "sha": "02fc807c17ea9d05821711aad4676a4dc6a3e5ff",
      "filename": "stdlib/Markdown/test/test_spec_html_github.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Ftest%2Ftest_spec_html_github.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Ftest%2Ftest_spec_html_github.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMarkdown%2Ftest%2Ftest_spec_html_github.jl?ref=da6a234b2f1731bd76de5258778af4f76e48d249",
      "patch": "@@ -373,7 +373,7 @@ end\n     md = Markdown.parse(input; flavor=:github)\n     expected = \"<pre><code>***\\n</code></pre>\\n\"\n     actual = Markdown.html(md)\n-    @test_broken expected == actual\n+    @test expected == actual\n \n     # Example 49\n     input = \"Foo\\n    ***\\n\""
    },
    {
      "sha": "4450371dba8b0fca999b94494efff723fef0d8c6",
      "filename": "stdlib/Markdown/test/test_spec_html_julia.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Ftest%2Ftest_spec_html_julia.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/da6a234b2f1731bd76de5258778af4f76e48d249/stdlib%2FMarkdown%2Ftest%2Ftest_spec_html_julia.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMarkdown%2Ftest%2Ftest_spec_html_julia.jl?ref=da6a234b2f1731bd76de5258778af4f76e48d249",
      "patch": "@@ -373,7 +373,7 @@ end\n     md = Markdown.parse(input; flavor=:julia)\n     expected = \"<pre><code>***\\n</code></pre>\\n\"\n     actual = Markdown.html(md)\n-    @test_broken expected == actual\n+    @test expected == actual\n \n     # Example 49\n     input = \"Foo\\n    ***\\n\""
    }
  ]
}