{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60490",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60490/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60490/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60490/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60490",
  "id": 3764019174,
  "node_id": "PR_kwDOABkWpM66qXvC",
  "number": 60490,
  "title": "Remove many `Core.Box` in stdlibs and Base.",
  "user": {
    "login": "KristofferC",
    "id": 1282691,
    "node_id": "MDQ6VXNlcjEyODI2OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1282691?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/KristofferC",
    "html_url": "https://github.com/KristofferC",
    "followers_url": "https://api.github.com/users/KristofferC/followers",
    "following_url": "https://api.github.com/users/KristofferC/following{/other_user}",
    "gists_url": "https://api.github.com/users/KristofferC/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/KristofferC/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/KristofferC/subscriptions",
    "organizations_url": "https://api.github.com/users/KristofferC/orgs",
    "repos_url": "https://api.github.com/users/KristofferC/repos",
    "events_url": "https://api.github.com/users/KristofferC/events{/privacy}",
    "received_events_url": "https://api.github.com/users/KristofferC/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 944193805,
      "node_id": "MDU6TGFiZWw5NDQxOTM4MDU=",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/latency",
      "name": "latency",
      "color": "76e8d8",
      "default": false,
      "description": "Latency"
    },
    {
      "id": 9546926682,
      "node_id": "LA_kwDOABkWpM8AAAACOQqKWg",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/backport%201.13",
      "name": "backport 1.13",
      "color": "699295",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2025-12-26T21:15:22Z",
  "updated_at": "2025-12-29T12:51:41Z",
  "closed_at": "2025-12-29T12:51:39Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60490",
    "html_url": "https://github.com/JuliaLang/julia/pull/60490",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60490.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60490.patch",
    "merged_at": "2025-12-29T12:51:39Z"
  },
  "body": "WIP on the list in  https://github.com/JuliaLang/julia/issues/60479",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60490/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60490/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "364850c251491901895a92f2d8411626f259349d",
      "filename": "base/array.jl",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Farray.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Farray.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Farray.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -2949,10 +2949,11 @@ end\n \n function indcopy(sz::Dims, I::Tuple{Vararg{RangeIndex}})\n     n = length(I)\n-    s = sz[n]\n+    _s = sz[n]\n     for i = n+1:length(sz)\n-        s *= sz[i]\n+        _s *= sz[i]\n     end\n+    s = _s\n     dst::typeof(I) = ntuple(i-> _findin(I[i], i < n ? (1:sz[i]) : (1:s)), n)::typeof(I)\n     src::typeof(I) = ntuple(i-> I[i][_findin(I[i], i < n ? (1:sz[i]) : (1:s))], n)::typeof(I)\n     dst, src"
    },
    {
      "sha": "69b67bf36953a8d01a842549048b6f360ab45106",
      "filename": "base/errorshow.jl",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Ferrorshow.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Ferrorshow.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Ferrorshow.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -1294,9 +1294,11 @@ function UndefVarError_hint(io::IO, ex::UndefVarError)\n         warned = _UndefVarError_warnfor(io, [Base], var)\n \n         if !warned\n-            modules_to_check = (m for m in Base.loaded_modules_order\n-                                if m !== Core && m !== Base && m !== Main && m !== scope)\n-            warned |= _UndefVarError_warnfor(io, modules_to_check, var)\n+            let scope = scope\n+                modules_to_check = (m for m in Base.loaded_modules_order\n+                                    if m !== Core && m !== Base && m !== Main && m !== scope)\n+                warned |= _UndefVarError_warnfor(io, modules_to_check, var)\n+            end\n         end\n \n         warned || _UndefVarError_warnfor(io, [Core, Main], var)"
    },
    {
      "sha": "e60a60c8f7f46e14c14fbc6607e9843a57dcfbcc",
      "filename": "base/loading.jl",
      "status": "modified",
      "additions": 6,
      "deletions": 5,
      "changes": 11,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Floading.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Floading.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Floading.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -185,9 +185,10 @@ const slug_chars = String(['A':'Z'; 'a':'z'; '0':'9'])\n \n function slug(x::UInt32, p::Int)\n     sprint(sizehint=p) do io\n+        y = x\n         n = UInt32(length(slug_chars))\n         for i = 1:p\n-            x, d = divrem(x, n)\n+            y, d = divrem(y, n)\n             write(io, slug_chars[1+d])\n         end\n     end\n@@ -1682,8 +1683,8 @@ function insert_extension_triggers(env::String, pkg::PkgId)::Union{Nothing,Missi\n                             if length(entries) != 1\n                                 error(\"expected a single entry for $(repr(dep_name)) in $(repr(project_file))\")\n                             end\n-                            entry = first(entries)::Dict{String, Any}\n-                            uuid = entry[\"uuid\"]::String\n+                            local entry = first(entries)::Dict{String, Any}\n+                            local uuid = entry[\"uuid\"]::String\n                             deps\u2032_expanded[dep_name] = uuid\n                         end\n                         return deps\u2032_expanded\n@@ -2868,7 +2869,7 @@ function __require_prelocked(pkg::PkgId, env)\n                     m = _require_search_from_serialized(pkg, spec, UInt128(0), true)\n                     m isa Module && return m\n \n-                    verbosity = isinteractive() ? CoreLogging.Info : CoreLogging.Debug\n+                    local verbosity = isinteractive() ? CoreLogging.Info : CoreLogging.Debug\n                     @logmsg verbosity \"Precompiling $(repr(\"text/plain\", pkg))$(list_reasons(reasons))\"\n \n                     unlock(require_lock)\n@@ -2910,7 +2911,7 @@ function __require_prelocked(pkg::PkgId, env)\n                 @goto load_from_cache # the new cachefile will have the newest mtime so will come first in the search\n             elseif isa(loaded, Exception)\n                 if precompilableerror(loaded)\n-                    verbosity = isinteractive() ? CoreLogging.Info : CoreLogging.Debug\n+                    local verbosity = isinteractive() ? CoreLogging.Info : CoreLogging.Debug\n                     @logmsg verbosity \"Skipping precompilation due to precompilable error. Importing $(repr(\"text/plain\", pkg)).\" exception=loaded\n                 else\n                     @warn \"The call to compilecache failed to create a usable precompiled cache file for $(repr(\"text/plain\", pkg))\" exception=loaded"
    },
    {
      "sha": "c116014094c3c372d1a383a2639dfa4f75489fe9",
      "filename": "base/module.jl",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Fmodule.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Fmodule.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fmodule.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -12,12 +12,12 @@ end\n function eval_import_path(at::Module, from::Union{Module, Nothing}, path::Expr, keyword::String)\n     isempty(path.args) && error(\"malformed import statement\")\n \n-    i::Int = 1\n+    i = RefValue(1)\n     function next!()\n         local v\n-        i <= length(path.args) || error(\"invalid module path\")\n-        v = path.args[i]\n-        i += 1\n+        i[] <= length(path.args) || error(\"invalid module path\")\n+        v = path.args[i[]]\n+        i[] += 1\n         v isa Symbol || throw(TypeError(Symbol(keyword), \"\", Symbol, v))\n         v\n     end\n@@ -36,7 +36,7 @@ function eval_import_path(at::Module, from::Union{Module, Nothing}, path::Expr,\n             m = require(at, v)\n             m isa Module || error(\"failed to load module $v\")\n         end\n-        i > lastindex(path.args) && return m, nothing\n+        i[] > lastindex(path.args) && return m, nothing\n         v = next!()\n     else\n         # `.A.B.C`: strip off leading dots by following parent links\n@@ -48,7 +48,7 @@ function eval_import_path(at::Module, from::Union{Module, Nothing}, path::Expr,\n \n     while true\n         v === :. && error(\"invalid $keyword path: \\\".\\\" in identifier path\")\n-        i > lastindex(path.args) && break\n+        i[] > lastindex(path.args) && break\n         m = getglobal(m, v)\n         m isa Module || error(\"invalid $keyword path: \\\"$v\\\" does not name a module\")\n         v = next!()"
    },
    {
      "sha": "c3769e2aabb6b83930432d14723c7d72285cd3eb",
      "filename": "base/runtime_internals.jl",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Fruntime_internals.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Fruntime_internals.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fruntime_internals.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -1874,11 +1874,11 @@ end\n length(specs::MethodSpecializations) = count(Returns(true), specs)\n \n function length(mt::Core.MethodTable)\n-    n = 0\n+    n = Ref(0)\n     visit(mt) do m\n-        n += 1\n+        n[] += 1\n     end\n-    return n::Int\n+    return n[]\n end\n isempty(mt::Core.MethodTable) = (mt.defs === nothing)\n "
    },
    {
      "sha": "c71692b70878a2b568f8ea2066e21979b8723557",
      "filename": "base/show.jl",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Fshow.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/base%2Fshow.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fshow.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -2586,11 +2586,11 @@ function type_depth_limit(str::String, n::Int; maxdepth = nothing)\n     levelcount = Int[]                     # number of nodes at each level\n     strwid = 0\n     st_0, st_backslash, st_squote, st_dquote = 0,1,2,4\n-    state::Int = st_0\n-    stateis(s) = (state & s) != 0\n+    state = Ref(st_0)\n+    stateis(s) = (state[] & s) != 0\n     quoted() = stateis(st_squote) || stateis(st_dquote)\n-    enter(s) = (state |= s)\n-    leave(s) = (state &= ~s)\n+    enter(s) = (state[] |= s)\n+    leave(s) = (state[] &= ~s)\n     for (i, c) in ANSIIterator(str)\n         if c isa ANSIDelimiter\n             depths[i] = depth"
    },
    {
      "sha": "7ebb7d7ddb085345800c35c1f2e4d0db2a510311",
      "filename": "stdlib/FileWatching/src/FileWatching.jl",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FFileWatching%2Fsrc%2FFileWatching.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FFileWatching%2Fsrc%2FFileWatching.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FFileWatching%2Fsrc%2FFileWatching.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -801,19 +801,19 @@ function poll_fd(s::Union{RawFD, Sys.iswindows() ? WindowsRawSocket : Union{}},\n     fdw = _FDWatcher(s, mask)\n     local timer\n     # we need this flag to explicitly track whether we call `close` already, to update the internal refcount correctly\n-    timedout = false # TODO: make this atomic\n+    timedout = Ref(false) # TODO: make this atomic\n     try\n         if timeout_s >= 0\n             # delay creating the timer until shortly before we start the poll wait\n             timer = Timer(timeout_s) do t\n-                timedout && return\n-                timedout = true\n+                timedout[] && return\n+                timedout[] = true\n                 close(fdw, mask)\n             end\n             try\n                 while true\n                     events = _wait(fdw, mask)\n-                    if timedout || !events.timedout\n+                    if timedout[] || !events.timedout\n                         @lock fdw.notify fdw.events &= ~events.events\n                         return events\n                     end\n@@ -827,8 +827,8 @@ function poll_fd(s::Union{RawFD, Sys.iswindows() ? WindowsRawSocket : Union{}},\n         end\n     finally\n         if @isdefined(timer)\n-            if !timedout\n-                timedout = true\n+            if !timedout[]\n+                timedout[] = true\n                 close(timer)\n                 close(fdw, mask)\n             end"
    },
    {
      "sha": "e7327ef5be331b1e081290c2a70427e0c0679f0f",
      "filename": "stdlib/InteractiveUtils/src/InteractiveUtils.jl",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FInteractiveUtils%2Fsrc%2FInteractiveUtils.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FInteractiveUtils%2Fsrc%2FInteractiveUtils.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FInteractiveUtils%2Fsrc%2FInteractiveUtils.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -351,8 +351,7 @@ function report_bug(kind)\n     BugReportingId = Base.PkgId(\n         Base.UUID((0xbcf9a6e7_4020_453c,0xb88e_690564246bb8)), \"BugReporting\")\n     # Check if the BugReporting package exists in the current environment\n-    local BugReporting\n-    if Base.locate_package(BugReportingId) === nothing\n+    BugReporting = if Base.locate_package(BugReportingId) === nothing\n         @info \"Package `BugReporting` not found - attempting temporary installation\"\n         # Create a temporary environment and add BugReporting\n         let Pkg = Base.require_stdlib(Base.PkgId(\n@@ -364,13 +363,14 @@ function report_bug(kind)\n                 Base.ACTIVE_PROJECT[] = nothing\n                 pkgspec = @invokelatest Pkg.PackageSpec(BugReportingId.name, BugReportingId.uuid)\n                 @invokelatest Pkg.add(pkgspec)\n-                BugReporting = Base.require(BugReportingId)\n+                _BugReporting = Base.require(BugReportingId)\n                 append!(empty!(LOAD_PATH), old_load_path)\n                 Base.ACTIVE_PROJECT[] = old_active_project\n+                _BugReporting\n             end\n         end\n     else\n-        BugReporting = Base.require(BugReportingId)\n+        Base.require(BugReportingId)\n     end\n     return @invokelatest BugReporting.make_interactive_report(kind, ARGS)\n end"
    },
    {
      "sha": "290f05eb86730f336ee2c2b0fa2d0fdd5cbac61a",
      "filename": "stdlib/InteractiveUtils/src/macros.jl",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FInteractiveUtils%2Fsrc%2Fmacros.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FInteractiveUtils%2Fsrc%2Fmacros.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FInteractiveUtils%2Fsrc%2Fmacros.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -388,10 +388,11 @@ function gen_call_with_extracted_types(__module__, fcn, ex0, kws = Expr[]; is_so\n     if isa(ex0, Expr) && ex0.head === :(=) && isa(ex0.args[1], Symbol)\n         return gen_call_with_extracted_types(__module__, fcn, ex0.args[2], kws; is_source_reflection, supports_binding_reflection, use_signature_tuple)\n     end\n-    where_params = nothing\n+    _where_params = nothing\n     if isa(ex0, Expr)\n-        ex0, where_params = extract_where_parameters(ex0)\n+        ex0, _where_params = extract_where_parameters(ex0)\n     end\n+    where_params = _where_params\n     if isa(ex0, Expr)\n         if ex0.head === :do && isexpr(get(ex0.args, 1, nothing), :call)\n             # Normalize `f(args...) do ... end` calls to `f(do_anonymous_function, args...)`"
    },
    {
      "sha": "861aebb9247bdc5443906bcbe0f0f035c204451e",
      "filename": "stdlib/LibGit2/src/LibGit2.jl",
      "status": "modified",
      "additions": 11,
      "deletions": 9,
      "changes": 20,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FLibGit2%2Fsrc%2FLibGit2.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FLibGit2%2Fsrc%2FLibGit2.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FLibGit2%2Fsrc%2FLibGit2.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -451,13 +451,15 @@ function branch!(repo::GitRepo, branch_name::AbstractString,\n             branch_ref = new_branch_ref\n         end\n     end\n+\n+    branch_ref\u2032 = branch_ref # Avoids boxing `branch_ref`\n     try\n         #TODO: what if branch tracks other then \"origin\" remote\n         if !isempty(track) # setup tracking\n             try\n                 with(GitConfig, repo) do cfg\n                     set!(cfg, \"branch.$branch_name.remote\", Consts.REMOTE_ORIGIN)\n-                    set!(cfg, \"branch.$branch_name.merge\", name(branch_ref))\n+                    set!(cfg, \"branch.$branch_name.merge\", name(branch_ref\u2032))\n                 end\n             catch\n                 @warn \"Please provide remote tracking for branch '$branch_name' in '$(path(repo))'\"\n@@ -466,15 +468,15 @@ function branch!(repo::GitRepo, branch_name::AbstractString,\n \n         if set_head\n             # checkout selected branch\n-            with(peel(GitTree, branch_ref)) do btree\n+            with(peel(GitTree, branch_ref\u2032)) do btree\n                 checkout_tree(repo, btree)\n             end\n \n             # switch head to the branch\n-            head!(repo, branch_ref)\n+            head!(repo, branch_ref\u2032)\n         end\n     finally\n-        close(branch_ref)\n+        close(branch_ref\u2032)\n     end\n     return\n end\n@@ -509,13 +511,13 @@ function checkout!(repo::GitRepo, commit::AbstractString = \"\";\n     isempty(commit) && return\n \n     # grab head name\n-    head_name = Consts.HEAD_FILE\n+    head_name = Ref(Consts.HEAD_FILE)\n     try\n         with(head(repo)) do head_ref\n-            head_name = shortname(head_ref)\n+            head_name[] = shortname(head_ref)\n             # if it is HEAD use short OID instead\n-            if head_name == Consts.HEAD_FILE\n-                head_name = string(GitHash(head_ref))\n+            if head_name[] == Consts.HEAD_FILE\n+                head_name[] = string(GitHash(head_ref))\n             end\n         end\n     catch\n@@ -530,7 +532,7 @@ function checkout!(repo::GitRepo, commit::AbstractString = \"\";\n     checkout_tree(repo, peeled, options = force ? CheckoutOptions(checkout_strategy = Consts.CHECKOUT_FORCE) : CheckoutOptions())\n \n     GitReference(repo, obj_oid, force=force,\n-                 msg=\"libgit2.checkout: moving from $head_name to $(obj_oid))\")\n+                 msg=\"libgit2.checkout: moving from $(head_name[]) to $(obj_oid))\")\n \n     return nothing\n end"
    },
    {
      "sha": "f2daddec9e814530d46f37d423406e06f82eed97",
      "filename": "stdlib/Markdown/src/render/html.jl",
      "status": "modified",
      "additions": 9,
      "deletions": 7,
      "changes": 16,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FMarkdown%2Fsrc%2Frender%2Fhtml.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FMarkdown%2Fsrc%2Frender%2Fhtml.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMarkdown%2Fsrc%2Frender%2Fhtml.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -65,11 +65,12 @@ function html(io::IO, header::Header{l}) where l\n     end\n end\n \n-function html(io::IO, code::Code)\n+function html(io::IO, code\u2032::Code)\n+    if code\u2032.language == \"styled\"\n+        code\u2032 = Code(\"\", String(styled(code\u2032.code)))\n+    end\n+    code = code\u2032\n     withtag(io, :pre) do\n-        if code.language == \"styled\"\n-            code = Code(\"\", String(styled(code.code)))\n-        end\n         maybe_lang = !isempty(code.language) ? Any[:class=>\"language-$(code.language)\"] : []\n         withtag(io, :code, maybe_lang...) do\n             htmlesc(io, code.code)\n@@ -136,10 +137,11 @@ function htmlinline(io::IO, content::Vector)\n     end\n end\n \n-function htmlinline(io::IO, code::Code)\n-    if code.language == \"styled\"\n-        code = Code(\"\", String(styled(code.code)))\n+function htmlinline(io::IO, code\u2032::Code)\n+    if code\u2032.language == \"styled\"\n+        code\u2032 = Code(\"\", String(styled(code\u2032.code)))\n     end\n+    code = code\u2032\n     withtag(io, :code) do\n         htmlesc(io, code.code)\n     end"
    },
    {
      "sha": "1d166af42c627dda3550cedf659c3f27bbbeac0c",
      "filename": "stdlib/Markdown/src/render/latex.jl",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FMarkdown%2Fsrc%2Frender%2Flatex.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FMarkdown%2Fsrc%2Frender%2Flatex.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMarkdown%2Fsrc%2Frender%2Flatex.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -32,10 +32,11 @@ function latex(io::IO, header::Header{l}) where l\n     println(io)\n end\n \n-function latex(io::IO, code::Code)\n-    if code.language == \"styled\"\n-        code = Code(\"\", String(styled(code.code)))\n+function latex(io::IO, code\u2032::Code)\n+    if code\u2032.language == \"styled\"\n+        code\u2032 = Code(\"\", String(styled(code\u2032.code)))\n     end\n+    code = code\u2032\n     occursin(\"\\\\end{verbatim}\", code.code) && error(\"Cannot include \\\"\\\\end{verbatim}\\\" in a latex code block\")\n     wrapblock(io, \"verbatim\") do\n         println(io, code.code)"
    },
    {
      "sha": "09dff9e367631af99b39d63d9f8174df0534ccb9",
      "filename": "stdlib/Markdown/src/render/terminal/formatting.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FMarkdown%2Fsrc%2Frender%2Fterminal%2Fformatting.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FMarkdown%2Fsrc%2Frender%2Fterminal%2Fformatting.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMarkdown%2Fsrc%2Frender%2Fterminal%2Fformatting.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -17,12 +17,13 @@ function with_output_annotations(f::Function, io::AnnotIO, annots::Pair{Symbol,\n     @nospecialize annots\n     aio = if io isa AnnotatedIOBuffer io else io.io end\n     start = position(aio) + 1\n-    f(io)\n+    v = f(io)\n     stop = position(aio)\n     sortedindex = searchsortedlast(aio.annotations, (region=start:stop,), by=a -> a.region)\n     for (i, annot) in enumerate(annots)\n         insert!(aio.annotations, sortedindex + i, (start:stop, annot...))\n     end\n+    return v\n end\n \n \"\"\""
    },
    {
      "sha": "119f27461066635c59137eec0246ca71a38fc13b",
      "filename": "stdlib/Markdown/src/render/terminal/render.jl",
      "status": "modified",
      "additions": 5,
      "deletions": 6,
      "changes": 11,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FMarkdown%2Fsrc%2Frender%2Fterminal%2Frender.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FMarkdown%2Fsrc%2Frender%2Fterminal%2Frender.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMarkdown%2Fsrc%2Frender%2Fterminal%2Frender.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -117,20 +117,19 @@ function term(io::AnnotIO, md::Header{l}, columns) where l\n     face = Symbol(\"markdown_h$l\")\n     underline = _header_underlines[l]\n     pre = ' '^margin\n-    local line_width\n-    with_output_annotations(io, :face => face) do io\n+    line_width = with_output_annotations(io, :face => face) do io\n         headline = annotprint(terminline, md.text)\n         lines = wraplines(headline, columns - 4margin)\n         for (i, line) in enumerate(lines)\n             print(io, pre, line)\n             i < length(lines) && println(io)\n         end\n-        line_width = if length(lines) == 1\n-            min(textwidth(lines[end]), columns)\n+        if length(lines) == 1\n+            return min(textwidth(lines[end]), columns)\n         elseif length(lines) > 1\n-            max(textwidth(lines[end]), div(columns, 3)+length(pre))\n+            return max(textwidth(lines[end]), div(columns, 3)+length(pre))\n         else\n-            0\n+            return 0\n         end\n     end\n     header_width = max(0, line_width)"
    },
    {
      "sha": "6f4894dcc059f3baf2e5bc33c85bdd1c5d6f4931",
      "filename": "stdlib/Serialization/src/Serialization.jl",
      "status": "modified",
      "additions": 5,
      "deletions": 6,
      "changes": 11,
      "blob_url": "https://github.com/JuliaLang/julia/blob/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FSerialization%2Fsrc%2FSerialization.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/dd5d7208d69b02554d6bb6ef35459a270432242f/stdlib%2FSerialization%2Fsrc%2FSerialization.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FSerialization%2Fsrc%2FSerialization.jl?ref=dd5d7208d69b02554d6bb6ef35459a270432242f",
      "patch": "@@ -1067,11 +1067,10 @@ function deserialize(s::AbstractSerializer, ::Type{Method})\n     nospecializeinfer = false\n     constprop = 0x00\n     purity = 0x0000\n-    local template_or_is_opaque, template\n-    with(current_module => mod) do\n-        template_or_is_opaque = deserialize(s)\n+    template_or_is_opaque = with(current_module => mod) do\n+        deserialize(s)\n     end\n-    if isa(template_or_is_opaque, Bool)\n+    template = if isa(template_or_is_opaque, Bool)\n         is_for_opaque_closure = template_or_is_opaque\n         if format_version(s) >= 24\n             nospecializeinfer = deserialize(s)::Bool\n@@ -1085,10 +1084,10 @@ function deserialize(s::AbstractSerializer, ::Type{Method})\n             purity = UInt16(deserialize(s)::UInt8)\n         end\n         with(current_module => mod) do\n-            template = deserialize(s)\n+            deserialize(s)\n         end\n     else\n-        template = template_or_is_opaque\n+        template_or_is_opaque\n     end\n     generator = deserialize(s)\n     recursion_relation = nothing"
    }
  ]
}