{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60012",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60012/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60012/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60012/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60012",
  "id": 3576941992,
  "node_id": "PR_kwDOABkWpM6w8Aqi",
  "number": 60012,
  "title": "loading: improve precompilation cache reason messages",
  "user": {
    "login": "vtjnash",
    "id": 330950,
    "node_id": "MDQ6VXNlcjMzMDk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/330950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vtjnash",
    "html_url": "https://github.com/vtjnash",
    "followers_url": "https://api.github.com/users/vtjnash/followers",
    "following_url": "https://api.github.com/users/vtjnash/following{/other_user}",
    "gists_url": "https://api.github.com/users/vtjnash/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vtjnash/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vtjnash/subscriptions",
    "organizations_url": "https://api.github.com/users/vtjnash/orgs",
    "repos_url": "https://api.github.com/users/vtjnash/repos",
    "events_url": "https://api.github.com/users/vtjnash/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vtjnash/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2025-11-01T01:09:25Z",
  "updated_at": "2025-11-28T20:10:04Z",
  "closed_at": "2025-11-03T16:56:30Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60012",
    "html_url": "https://github.com/JuliaLang/julia/pull/60012",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60012.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60012.patch",
    "merged_at": "2025-11-03T16:56:30Z"
  },
  "body": "Make cache invalidation reason messages clearer and more user-friendly by removing abbreviations and using more positive, informative language.\r\n\r\nChanges include:\r\n- Expanded all abbreviations (e.g., \"dep\" \u2192 \"dependency\", \"fsize\" \u2192 \"file size\")\r\n- Replaced negative-sounding terms like \"wrong\" with neutral \"different\"\r\n- Made technical terms clearer (e.g., \"ocachefile\" \u2192 \"native code cache file\")\r\n- Changed \"cache misses\" to \"caches not reused\" for more positive framing\r\n- Reordered format from \"reason (count)\" to \"count for reason\" for better readability\r\n\r\nFixes #59255\r\n\r\n\ud83e\udd16 Generated with [Claude Code](https://claude.com/claude-code)",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60012/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60012/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "7dfa1e8b1492e29c709f208e642b3280c09c952e",
      "filename": "base/loading.jl",
      "status": "modified",
      "additions": 22,
      "deletions": 22,
      "changes": 44,
      "blob_url": "https://github.com/JuliaLang/julia/blob/404f18b9c5a847988ac5c4715408cfcc6be6d5ba/base%2Floading.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/404f18b9c5a847988ac5c4715408cfcc6be6d5ba/base%2Floading.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Floading.jl?ref=404f18b9c5a847988ac5c4715408cfcc6be6d5ba",
      "patch": "@@ -4018,7 +4018,7 @@ end\n record_reason(::Nothing, ::String) = nothing\n function list_reasons(reasons::Dict{String,Int})\n     isempty(reasons) && return \"\"\n-    return \" (cache misses: $(join((\"$k ($v)\" for (k,v) in reasons), \", \")))\"\n+    return \" (caches not reused: $(join((\"$v for $k\" for (k,v) in reasons), \", \")))\"\n end\n list_reasons(::Nothing) = \"\"\n \n@@ -4027,7 +4027,7 @@ function any_includes_stale(includes::Vector{CacheHeaderIncludes}, cachefile::St\n         f, fsize_req, hash_req, ftime_req = chi.filename, chi.fsize, chi.hash, chi.mtime\n         if startswith(f, string(\"@depot\", Filesystem.pathsep()))\n             @debug(\"Rejecting stale cache file $cachefile because its depot could not be resolved\")\n-            record_reason(reasons, \"nonresolveable depot\")\n+            record_reason(reasons, \"file location uses unresolved depot path\")\n             return true\n         end\n         if !ispath(f)\n@@ -4036,7 +4036,7 @@ function any_includes_stale(includes::Vector{CacheHeaderIncludes}, cachefile::St\n                 continue\n             end\n             @debug \"Rejecting stale cache file $cachefile because file $f does not exist\"\n-            record_reason(reasons, \"missing sourcefile\")\n+            record_reason(reasons, \"source file not found\")\n             return true\n         end\n         if ftime_req >= 0.0\n@@ -4050,21 +4050,21 @@ function any_includes_stale(includes::Vector{CacheHeaderIncludes}, cachefile::St\n                        !( 0 < (ftime_req - ftime) < 1e-6 )        # PR #45552: Compensate for Windows tar giving mtimes that may be incorrect by up to one microsecond\n             if is_stale\n                 @debug \"Rejecting stale cache file $cachefile because mtime of include_dependency $f has changed (mtime $ftime, before $ftime_req)\"\n-                record_reason(reasons, \"include_dependency mtime change\")\n+                record_reason(reasons, \"file modification time changed\")\n                 return true\n             end\n         else\n             fstat = stat(f)\n             fsize = filesize(fstat)\n             if fsize != fsize_req\n                 @debug \"Rejecting stale cache file $cachefile because file size of $f has changed (file size $fsize, before $fsize_req)\"\n-                record_reason(reasons, \"include_dependency fsize change\")\n+                record_reason(reasons, \"file size changed\")\n                 return true\n             end\n             hash = isdir(fstat) ? _crc32c(join(readdir(f))) : open(_crc32c, f, \"r\")\n             if hash != hash_req\n                 @debug \"Rejecting stale cache file $cachefile because hash of $f has changed (hash $hash, before $hash_req)\"\n-                record_reason(reasons, \"include_dependency fhash change\")\n+                record_reason(reasons, \"file content changed\")\n                 return true\n             end\n         end\n@@ -4092,7 +4092,7 @@ end\n         checksum = isvalid_cache_header(io)\n         if iszero(checksum)\n             @debug \"Rejecting cache file $cachefile due to it containing an incompatible cache header\"\n-            record_reason(reasons, \"incompatible header\")\n+            record_reason(reasons, \"different Julia build configuration\")\n             return true # incompatible cache file\n         end\n         modules, (includes, _, requires), required_modules, srctextpos, prefs, prefs_hash, clone_targets, actual_flags = parse_cache_header(io, cachefile)\n@@ -4105,7 +4105,7 @@ end\n               requested flags: $(requested_flags) [$(_cacheflag_to_uint8(requested_flags))]\n               cache file:      $(CacheFlags(actual_flags)) [$actual_flags]\n             \"\"\"\n-            record_reason(reasons, \"mismatched flags\")\n+            record_reason(reasons, \"different compilation options\")\n             return true\n         end\n         pkgimage = !isempty(clone_targets)\n@@ -4114,7 +4114,7 @@ end\n             if JLOptions().use_pkgimages == 0\n                 # presence of clone_targets means native code cache\n                 @debug \"Rejecting cache file $cachefile for $modkey since it would require usage of pkgimage\"\n-                record_reason(reasons, \"requires pkgimages\")\n+                record_reason(reasons, \"native code caching disabled\")\n                 return true\n             end\n             rejection_reasons = check_clone_targets(clone_targets)\n@@ -4123,12 +4123,12 @@ end\n                     Reasons=rejection_reasons,\n                     var\"Image Targets\"=parse_image_targets(clone_targets),\n                     var\"Current Targets\"=current_image_targets())\n-                record_reason(reasons, \"target mismatch\")\n+                record_reason(reasons, \"different system or CPU target\")\n                 return true\n             end\n             if !isfile(ocachefile)\n                 @debug \"Rejecting cache file $cachefile for $modkey since pkgimage $ocachefile was not found\"\n-                record_reason(reasons, \"missing ocachefile\")\n+                record_reason(reasons, \"native code cache file not found\")\n                 return true\n             end\n         else\n@@ -4137,15 +4137,15 @@ end\n         id = first(modules)\n         if id.first != modkey && modkey != PkgId(\"\")\n             @debug \"Rejecting cache file $cachefile for $modkey since it is for $id instead\"\n-            record_reason(reasons, \"for different pkgid\")\n+            record_reason(reasons, \"different package identifier\")\n             return true\n         end\n         id_build = id.second\n         id_build = (UInt128(checksum) << 64) | (id_build % UInt64)\n         if build_id != UInt128(0)\n             if id_build != build_id\n                 @debug \"Ignoring cache file $cachefile for $modkey ($(UUID(id_build))) since it does not provide desired build_id ($((UUID(build_id))))\"\n-                record_reason(reasons, \"for different buildid\")\n+                record_reason(reasons, \"different build identifier\")\n                 return true\n             end\n         end\n@@ -4171,20 +4171,20 @@ end\n                     continue\n                 elseif M == Core\n                     @debug \"Rejecting cache file $cachefile because it was made with a different julia version\"\n-                    record_reason(reasons, \"wrong julia version\")\n+                    record_reason(reasons, \"different Julia version\")\n                     return true # Won't be able to fulfill dependency\n                 elseif ignore_loaded || !stalecheck\n                     # Used by Pkg.precompile given that there it's ok to precompile different versions of loaded packages\n                 else\n                     @debug \"Rejecting cache file $cachefile because module $req_key is already loaded and incompatible.\"\n-                    record_reason(reasons, \"wrong dep version loaded\")\n+                    record_reason(reasons, \"different dependency version already loaded\")\n                     return true # Won't be able to fulfill dependency\n                 end\n             end\n             path = locate_package(req_key) # TODO: add env and/or skip this when stalecheck is false\n             if path === nothing\n                 @debug \"Rejecting cache file $cachefile because dependency $req_key not found.\"\n-                record_reason(reasons, \"dep missing source\")\n+                record_reason(reasons, \"dependency source file not found\")\n                 return true # Won't be able to fulfill dependency\n             end\n             depmods[i] = (path, req_key, req_build_id)\n@@ -4203,7 +4203,7 @@ end\n                         break\n                     end\n                     @debug \"Rejecting cache file $cachefile because it provides the wrong build_id (got $((UUID(build_id)))) for $req_key (want $(UUID(req_build_id)))\"\n-                    record_reason(reasons, \"wrong dep buildid\")\n+                    record_reason(reasons, \"different dependency build identifier\")\n                     return true # cachefile doesn't provide the required version of the dependency\n                 end\n             end\n@@ -4219,7 +4219,7 @@ end\n                 if !(isreadable(stdlib_path) && samefile(stdlib_path, modpath))\n                     !samefile(fixup_stdlib_path(includes[1].filename), modpath)\n                     @debug \"Rejecting cache file $cachefile because it is for file $(includes[1].filename) not file $modpath\"\n-                    record_reason(reasons, \"wrong source\")\n+                    record_reason(reasons, \"different source file path\")\n                     return true # cache file was compiled from a different path\n                 end\n             end\n@@ -4228,7 +4228,7 @@ end\n                 pkg = identify_package(modkey, req_modkey.name)\n                 if pkg != req_modkey\n                     @debug \"Rejecting cache file $cachefile because uuid mapping for $modkey => $req_modkey has changed, expected $modkey => $(repr(\"text/plain\", pkg))\"\n-                    record_reason(reasons, \"dep uuid changed\")\n+                    record_reason(reasons, \"dependency identifier changed\")\n                     return true\n                 end\n             end\n@@ -4239,22 +4239,22 @@ end\n \n         if !isvalid_file_crc(io)\n             @debug \"Rejecting cache file $cachefile because it has an invalid checksum\"\n-            record_reason(reasons, \"invalid checksum\")\n+            record_reason(reasons, \"cache file checksum is invalid\")\n             return true\n         end\n \n         if pkgimage\n             if !isvalid_pkgimage_crc(io, ocachefile::String)\n                 @debug \"Rejecting cache file $cachefile because $ocachefile has an invalid checksum\"\n-                record_reason(reasons, \"ocachefile invalid checksum\")\n+                record_reason(reasons, \"native code cache checksum is invalid\")\n                 return true\n             end\n         end\n \n         curr_prefs_hash = get_preferences_hash(id.uuid, prefs)\n         if prefs_hash != curr_prefs_hash\n             @debug \"Rejecting cache file $cachefile because preferences hash does not match 0x$(string(prefs_hash, base=16)) != 0x$(string(curr_prefs_hash, base=16))\"\n-            record_reason(reasons, \"preferences hash mismatch\")\n+            record_reason(reasons, \"package preferences changed\")\n             return true\n         end\n "
    }
  ]
}