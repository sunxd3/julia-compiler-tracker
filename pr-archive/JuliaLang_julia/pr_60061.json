{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60061",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60061/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60061/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60061/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60061",
  "id": 3596105275,
  "node_id": "PR_kwDOABkWpM6x6kn5",
  "number": 60061,
  "title": "allow finding stdlibs that are normal packages in the manifest but are now stdlibs",
  "user": {
    "login": "KristofferC",
    "id": 1282691,
    "node_id": "MDQ6VXNlcjEyODI2OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1282691?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/KristofferC",
    "html_url": "https://github.com/KristofferC",
    "followers_url": "https://api.github.com/users/KristofferC/followers",
    "following_url": "https://api.github.com/users/KristofferC/following{/other_user}",
    "gists_url": "https://api.github.com/users/KristofferC/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/KristofferC/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/KristofferC/subscriptions",
    "organizations_url": "https://api.github.com/users/KristofferC/orgs",
    "repos_url": "https://api.github.com/users/KristofferC/repos",
    "events_url": "https://api.github.com/users/KristofferC/events{/privacy}",
    "received_events_url": "https://api.github.com/users/KristofferC/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 24139877,
      "node_id": "MDU6TGFiZWwyNDEzOTg3Nw==",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/packages",
      "name": "packages",
      "color": "D180FB",
      "default": false,
      "description": "Package management and loading"
    },
    {
      "id": 5674040959,
      "node_id": "LA_kwDOABkWpM8AAAABUjL-fw",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/backport%201.10",
      "name": "backport 1.10",
      "color": "A49B65",
      "default": false,
      "description": "Change should be backported to the 1.10 release"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 7,
  "created_at": "2025-11-06T14:39:57Z",
  "updated_at": "2025-12-17T11:18:11Z",
  "closed_at": "2025-11-10T21:32:35Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60061",
    "html_url": "https://github.com/JuliaLang/julia/pull/60061",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60061.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60061.patch",
    "merged_at": "2025-11-10T21:32:35Z"
  },
  "body": "This helps handling manifest from earlier julia versions. This is kind of the `locate` version of the `identify` fallback in https://github.com/JuliaLang/julia/pull/56148.\r\n\r\nNeed to write a test when this happens (and verify that this fix works).\r\n\r\nNoted in a slack #gripes comment.\r\n\r\n\r\n",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60061/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60061/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "eee0b820dcb0e12f1cdc535e9b4156fae4ebcda8",
      "filename": "base/loading.jl",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/8a9c5ea0922a901936b25690020e39e310260c48/base%2Floading.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/8a9c5ea0922a901936b25690020e39e310260c48/base%2Floading.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Floading.jl?ref=8a9c5ea0922a901936b25690020e39e310260c48",
      "patch": "@@ -463,6 +463,8 @@ function locate_package_env(pkg::PkgId, stopenv::Union{String, Nothing}=nothing)\n             path = manifest_uuid_path(env, pkg)\n             # missing is used as a sentinel to stop looking further down in envs\n             if path === missing\n+                # Before stopping, try stdlib fallback\n+                is_stdlib(pkg) && @goto stdlib_fallback\n                 path = nothing\n                 @goto done\n             end\n@@ -474,6 +476,7 @@ function locate_package_env(pkg::PkgId, stopenv::Union{String, Nothing}=nothing)\n                 stopenv == env && break\n             end\n         end\n+        @label stdlib_fallback\n         # Allow loading of stdlibs if the name/uuid are given\n         # e.g. if they have been explicitly added to the project/manifest\n         mbypath = manifest_uuid_path(Sys.STDLIB, pkg)"
    },
    {
      "sha": "f3201cc9bc9fe1db2566796587f4d97bc1fe730e",
      "filename": "test/loading.jl",
      "status": "modified",
      "additions": 10,
      "deletions": 1,
      "changes": 11,
      "blob_url": "https://github.com/JuliaLang/julia/blob/8a9c5ea0922a901936b25690020e39e310260c48/test%2Floading.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/8a9c5ea0922a901936b25690020e39e310260c48/test%2Floading.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Floading.jl?ref=8a9c5ea0922a901936b25690020e39e310260c48",
      "patch": "@@ -1539,12 +1539,21 @@ end\n     mktempdir() do depot\n         # This manifest has a LibGit2 entry that is missing LibGit2_jll, which should be\n         # handled by falling back to the stdlib Project.toml for dependency truth.\n-        badmanifest_test_dir = joinpath(@__DIR__, \"project\", \"deps\", \"BadStdlibDeps.jl\")\n+        badmanifest_test_dir = joinpath(@__DIR__, \"project\", \"deps\", \"BadStdlibDeps\")\n         @test success(addenv(\n             `$(Base.julia_cmd()) --project=$badmanifest_test_dir --startup-file=no -e 'using LibGit2'`,\n             \"JULIA_DEPOT_PATH\" => depot * Base.Filesystem.pathsep(),\n         ))\n     end\n+    mktempdir() do depot\n+        # This manifest has a LibGit2 entry that has a LibGit2_jll with a git-tree-hash1\n+        # which simulates an old manifest where LibGit2_jll was not a stdlib\n+        badmanifest_test_dir2 = joinpath(@__DIR__, \"project\", \"deps\", \"BadStdlibDeps2\")\n+        @test success(addenv(\n+            `$(Base.julia_cmd()) --project=$badmanifest_test_dir2 --startup-file=no -e 'using LibGit2'`,\n+            \"JULIA_DEPOT_PATH\" => depot * Base.Filesystem.pathsep(),\n+        ))\n+    end\n end\n \n @testset \"code coverage disabled during precompilation\" begin"
    },
    {
      "sha": "988efc8da56f3b388d1b08189b00f68ada995869",
      "filename": "test/project/deps/BadStdlibDeps2/Manifest.toml",
      "status": "added",
      "additions": 54,
      "deletions": 0,
      "changes": 54,
      "blob_url": "https://github.com/JuliaLang/julia/blob/8a9c5ea0922a901936b25690020e39e310260c48/test%2Fproject%2Fdeps%2FBadStdlibDeps2%2FManifest.toml",
      "raw_url": "https://github.com/JuliaLang/julia/raw/8a9c5ea0922a901936b25690020e39e310260c48/test%2Fproject%2Fdeps%2FBadStdlibDeps2%2FManifest.toml",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fproject%2Fdeps%2FBadStdlibDeps2%2FManifest.toml?ref=8a9c5ea0922a901936b25690020e39e310260c48",
      "patch": "@@ -0,0 +1,54 @@\n+# This file is machine-generated - editing it directly is not advised\n+\n+julia_version = \"1.12.0-DEV\"\n+manifest_format = \"2.0\"\n+project_hash = \"dc9d33b0ee13d9466bdb75b8d375808a534a79ec\"\n+\n+[[deps.Artifacts]]\n+uuid = \"56f22d72-fd6d-98f1-02f0-08ddc0907c33\"\n+version = \"1.11.0\"\n+\n+[[deps.LibGit2]]\n+deps = [\"NetworkOptions\", \"Printf\", \"SHA\", \"LibGit2_jll\"]\n+uuid = \"76f85450-5226-5b5a-8eaa-529ad045b433\"\n+version = \"1.11.0\"\n+\n+# This is an stdlib but intentionally has a git-tree-sha1 because\n+# we are emulating that the manifest comes from a version where\n+# LibGit2_jll was not an stdlib\n+[[deps.LibGit2_jll]]\n+deps = [\"Artifacts\", \"LibSSH2_jll\", \"Libdl\", \"MbedTLS_jll\"]\n+git-tree-sha1 = \"1111111111111111111111111111111111111111\"\n+uuid = \"e37daf67-58a4-590a-8e99-b0245dd2ffc5\"\n+version = \"1.8.0+0\"\n+\n+[[deps.LibSSH2_jll]]\n+deps = [\"Artifacts\", \"Libdl\", \"MbedTLS_jll\"]\n+uuid = \"29816b5a-b9ab-546f-933c-edad1886dfa8\"\n+version = \"1.11.0+1\"\n+\n+[[deps.Libdl]]\n+uuid = \"8f399da3-3557-5675-b5ff-fb832c97cbdb\"\n+version = \"1.11.0\"\n+\n+[[deps.MbedTLS_jll]]\n+deps = [\"Artifacts\", \"Libdl\"]\n+uuid = \"c8ffd9c3-330d-5841-b78e-0817d7145fa1\"\n+version = \"2.28.6+1\"\n+\n+[[deps.NetworkOptions]]\n+uuid = \"ca575930-c2e3-43a9-ace4-1e988b2c1908\"\n+version = \"1.2.0\"\n+\n+[[deps.Printf]]\n+deps = [\"Unicode\"]\n+uuid = \"de0858da-6303-5e67-8744-51eddeeeb8d7\"\n+version = \"1.11.0\"\n+\n+[[deps.SHA]]\n+uuid = \"ea8e919c-243c-51af-8825-aaa63cd721ce\"\n+version = \"0.7.0\"\n+\n+[[deps.Unicode]]\n+uuid = \"4ec0a83e-493e-50e2-b9ac-8f72acf5a8f5\"\n+version = \"1.11.0\""
    },
    {
      "sha": "223889185ea15b2d6c39ada53a92ff849bb0f3a8",
      "filename": "test/project/deps/BadStdlibDeps2/Project.toml",
      "status": "added",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/8a9c5ea0922a901936b25690020e39e310260c48/test%2Fproject%2Fdeps%2FBadStdlibDeps2%2FProject.toml",
      "raw_url": "https://github.com/JuliaLang/julia/raw/8a9c5ea0922a901936b25690020e39e310260c48/test%2Fproject%2Fdeps%2FBadStdlibDeps2%2FProject.toml",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fproject%2Fdeps%2FBadStdlibDeps2%2FProject.toml?ref=8a9c5ea0922a901936b25690020e39e310260c48",
      "patch": "@@ -0,0 +1,2 @@\n+[deps]\n+LibGit2 = \"76f85450-5226-5b5a-8eaa-529ad045b433\""
    }
  ]
}