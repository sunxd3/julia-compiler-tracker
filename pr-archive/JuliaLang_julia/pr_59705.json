{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/59705",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/59705/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/59705/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/59705/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/59705",
  "id": 3470014389,
  "node_id": "PR_kwDOABkWpM6rXfFP",
  "number": 59705,
  "title": "Backports for 1.12.1",
  "user": {
    "login": "KristofferC",
    "id": 1282691,
    "node_id": "MDQ6VXNlcjEyODI2OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1282691?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/KristofferC",
    "html_url": "https://github.com/KristofferC",
    "followers_url": "https://api.github.com/users/KristofferC/followers",
    "following_url": "https://api.github.com/users/KristofferC/following{/other_user}",
    "gists_url": "https://api.github.com/users/KristofferC/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/KristofferC/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/KristofferC/subscriptions",
    "organizations_url": "https://api.github.com/users/KristofferC/orgs",
    "repos_url": "https://api.github.com/users/KristofferC/repos",
    "events_url": "https://api.github.com/users/KristofferC/events{/privacy}",
    "received_events_url": "https://api.github.com/users/KristofferC/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1166579723,
      "node_id": "MDU6TGFiZWwxMTY2NTc5NzIz",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/release",
      "name": "release",
      "color": "9effb3",
      "default": false,
      "description": "Release management and versioning."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 15,
  "created_at": "2025-09-30T15:26:18Z",
  "updated_at": "2025-10-15T20:46:00Z",
  "closed_at": "2025-10-15T20:45:58Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/59705",
    "html_url": "https://github.com/JuliaLang/julia/pull/59705",
    "diff_url": "https://github.com/JuliaLang/julia/pull/59705.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/59705.patch",
    "merged_at": "2025-10-15T20:45:58Z"
  },
  "body": "Backported PRs:\r\n- [x] #59631 <!-- Set world bounds on `CodeInfo` created for `OpaqueClosure(::IRCode)` -->\r\n- [x] #59628 <!-- Fix gcdx and lcm with mixed signed/unsigned arguments -->\r\n- [x] #59706 \r\n- [x] #59063\r\n- [x] #59672\r\n- [x] #59722 \r\n- [x] #59720 \r\n- [x] #59680 <!-- fix `powermod` correctness on unsigned power of half typemax -->\r\n- [x] #59719 <!-- retain size for zero length multidimensional arrays in mmap -->\r\n- [x] #59709 <!-- improve compile-ability of method errors -->\r\n- [x] #59728 <!-- iobuffer: fix overflow OOB read/write bugs -->\r\n- [x] #59725 <!-- fix getting field docstrings for parametric structs -->\r\n- [x] #49637 <!-- Improve floating-point Euclidean division for Float16 and Float32 -->\r\n- [x] #59668 <!-- fix overflow in `prevfloat` with unsigned stepcount -->\r\n- [x] #59745 <!-- [NFC] add tests for typemin power of float -->\r\n- [x] #59730 <!-- [REPL] Do not corrupt input when using numbered_prompt! mode -->\r\n- [x] #59717 <!-- array: avoid overallocation when inserting at beginning of empty arrays -->\r\n- [x] #59736 <!-- Revert \"Restrict COFF to a single thread when symbol count is high (#50874)\" -->\r\n- [x] #59772 <!-- Avoid method instance normalization for opaque closure methods -->\r\n- [x] #59762 <!-- Allow globalref on lhs of op= -->\r\n- [x] #59782 <!-- fix prefix IntrusiveLinkedList with Base in a REPL test util -->\r\n\r\nNeed manual backport:\r\n- [ ] #59028 <!-- build: More msys2 fixes -->\r\n- [x] #59123 <!-- [REPL] Fix keyword arguments completions with do block -->\r\n- [x] #59598 <!-- specialize show of `:` to make `reshape` trimmable -->\r\n- [x] #59652 <!-- remove log spamming from precompilepkg code -->\r\n- [x] #59703 <!-- lowering: increment world age after toplevel expressions -->\r\n- [x] #59711 <!-- fix performance of ProductIterator for non-concrete iterators -->\r\n- [x] #59670 <!-- precompile: fix a myriad of concurrency and cache handling mistakes -->\r\n- [x] #59748 <!-- [libblastrampoline] Bump to v5.15.0 -->\r\n- [x] #59726 <!-- [InteractiveUtils] specify code_warntype vararg length -->\r\n- [x] #59766 <!-- Align interpreter and codegen error behavior of setglobal! and friends -->\r\n\r\nContains multiple commits, manual intervention needed:\r\n- [x] #57758 <!-- improve sysimage.mk more completely -->\r\n- [ ] #57143 <!-- Add JuliaLang/JuliaSyntax.jl#525 to NEWS.md, flisp parser, and REPL -->\r\n- [x] #59467 <!-- `CoreLogging`: prevent some `Annotated*`-related instability -->\r\n- [x] #59389 <!-- Print task backtraces on sigquit -->\r\n- [x] #59635 <!-- Change delayed delete mechanism to prevent cross-drive mv failure for in-use DLL -->\r\n- [ ] #58848 <!-- Set array size only when safe to do so -->\r\n\r\nNon-merged PRs with backport label:\r\n- [x] #59802 <!-- Add note about `@threads` threadpool -->\r\n- [x] #59793 <!-- [1.12] Backport (improve sysimage.mk more completely (#57758)) -->\r\n- [ ] #59735 <!-- Extend backdating checks to imports and globals -->\r\n- [ ] #59692 <!-- Remove restrictions on kwarg tab completion -->\r\n- [ ] #59450 <!-- Propagate Addrspaces: fix lift of memset -->\r\n- [ ] #58359 <!-- Use dwarf for symbol lookup if dladdr fails before doing linear search. -->\r\n- [ ] #57490 <!-- export `maxthreadid` from `Threads` -->\r\n- [ ] #57422 <!-- Fix performance regression in hvcat of simple matrices -->\r\n- [ ] #55601 <!-- inference: track reaching defs for slots -->\r\n- [ ] #54002 <!-- Switch supertype of CodeUnits from DenseVector to AbstractVector -->",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/59705/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/59705/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "9570137b1ef7934588448e61f59423ca11e72b4e",
      "filename": ".buildkite-external-version",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/.buildkite-external-version",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/.buildkite-external-version",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/.buildkite-external-version?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1 +1 @@\n-main\n+release-julia-1.12"
    },
    {
      "sha": "01f2dbe33b6742abd57cc4a51699150a5abe1958",
      "filename": "Compiler/src/Compiler.jl",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Fsrc%2FCompiler.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Fsrc%2FCompiler.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/Compiler%2Fsrc%2FCompiler.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -41,9 +41,8 @@ using Core: ABIOverride, Builtin, CodeInstance, IntrinsicFunction, MethodInstanc\n     MethodTable, MethodCache, PartialOpaque, SimpleVector, TypeofVararg,\n     _apply_iterate, apply_type, compilerbarrier, donotdelete, memoryref_isassigned,\n     memoryrefget, memoryrefnew, memoryrefoffset, memoryrefset!, print, println, show, svec,\n-    typename, unsafe_write, write\n+    typename, unsafe_write, write, stdout, stderr\n \n-using Base\n using Base: @_foldable_meta, @_gc_preserve_begin, @_gc_preserve_end, @nospecializeinfer,\n     PARTITION_KIND_GLOBAL, PARTITION_KIND_UNDEF_CONST, PARTITION_KIND_BACKDATED_CONST, PARTITION_KIND_DECLARED,\n     PARTITION_FLAG_DEPWARN,\n@@ -64,7 +63,10 @@ using Base: @_foldable_meta, @_gc_preserve_begin, @_gc_preserve_end, @nospeciali\n     partition_restriction, quoted, rename_unionall, rewrap_unionall, specialize_method,\n     structdiff, tls_world_age, unconstrain_vararg_length, unionlen, uniontype_layout,\n     uniontypes, unsafe_convert, unwrap_unionall, unwrapva, vect, widen_diagonal,\n-    _uncompressed_ir, maybe_add_binding_backedge!\n+    _uncompressed_ir, maybe_add_binding_backedge!,\n+    devnull, devnull as stdin\n+\n+using Base\n using Base.Order\n \n import Base: ==, _topmod, append!, convert, copy, copy!, findall, first, get, get!,"
    },
    {
      "sha": "10cbca8c0c3d8ae04b368de3e3fb94d4b3cf7b0d",
      "filename": "Compiler/src/abstractinterpretation.jl",
      "status": "modified",
      "additions": 12,
      "deletions": 7,
      "changes": 19,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Fsrc%2Fabstractinterpretation.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Fsrc%2Fabstractinterpretation.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/Compiler%2Fsrc%2Fabstractinterpretation.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -2488,7 +2488,7 @@ function abstract_eval_setglobal!(interp::AbstractInterpreter, sv::AbsIntState,\n             (rt, exct) = global_assignment_rt_exct(interp, sv, saw_latestworld, gr, v)\n             return CallMeta(rt, exct, Effects(setglobal!_effects, nothrow=exct===Bottom), GlobalAccessInfo(convert(Core.Binding, gr)))\n         end\n-        return CallMeta(Union{}, TypeError, EFFECTS_THROWS, NoCallInfo())\n+        return CallMeta(Union{}, Union{TypeError, ErrorException}, EFFECTS_THROWS, NoCallInfo())\n     end\n     \u2291 = partialorder(typeinf_lattice(interp))\n     if !(hasintersect(widenconst(M), Module) && hasintersect(widenconst(s), Symbol))\n@@ -3444,9 +3444,13 @@ function refine_partial_type(@nospecialize t)\n     return t\n end\n \n-abstract_eval_nonlinearized_foreigncall_name(interp::AbstractInterpreter, e, sstate::StatementState, sv::IRInterpretationState) = nothing\n+abstract_eval_nonlinearized_foreigncall_name(\n+        ::AbstractInterpreter, @nospecialize(e), ::StatementState, ::IRInterpretationState\n+    ) = nothing\n \n-function abstract_eval_nonlinearized_foreigncall_name(interp::AbstractInterpreter, e, sstate::StatementState, sv::AbsIntState)\n+function abstract_eval_nonlinearized_foreigncall_name(\n+        interp::AbstractInterpreter, @nospecialize(e), sstate::StatementState, sv::InferenceState\n+    )\n     if isexpr(e, :call)\n         n = length(e.args)\n         argtypes = Vector{Any}(undef, n)\n@@ -3728,7 +3732,7 @@ end\n \n function global_assignment_rt_exct(interp::AbstractInterpreter, sv::AbsIntState, saw_latestworld::Bool, g::GlobalRef, @nospecialize(newty))\n     if saw_latestworld\n-        return Pair{Any,Any}(newty, ErrorException)\n+        return Pair{Any,Any}(newty, Union{TypeError, ErrorException})\n     end\n     newty\u2032 = RefValue{Any}(newty)\n     (valid_worlds, ret) = scan_partitions(interp, g, sv.world) do interp::AbstractInterpreter, ::Core.Binding, partition::Core.BindingPartition\n@@ -3743,15 +3747,16 @@ function global_assignment_binding_rt_exct(interp::AbstractInterpreter, partitio\n     if is_some_guard(kind)\n         return Pair{Any,Any}(newty, ErrorException)\n     elseif is_some_const_binding(kind) || is_some_imported(kind)\n-        return Pair{Any,Any}(Bottom, ErrorException)\n+        # N.B.: Backdating should not improve inference in an earlier world\n+        return Pair{Any,Any}(kind == PARTITION_KIND_BACKDATED_CONST ? newty : Bottom, ErrorException)\n     end\n     ty = kind == PARTITION_KIND_DECLARED ? Any : partition_restriction(partition)\n     wnewty = widenconst(newty)\n     if !hasintersect(wnewty, ty)\n-        return Pair{Any,Any}(Bottom, ErrorException)\n+        return Pair{Any,Any}(Bottom, TypeError)\n     elseif !(wnewty <: ty)\n         retty = tmeet(typeinf_lattice(interp), newty, ty)\n-        return Pair{Any,Any}(retty, ErrorException)\n+        return Pair{Any,Any}(retty, TypeError)\n     end\n     return Pair{Any,Any}(newty, Bottom)\n end"
    },
    {
      "sha": "21f26400378930f1ae87ac79edfddc84484b7c48",
      "filename": "Compiler/src/opaque_closure.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Fsrc%2Fopaque_closure.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Fsrc%2Fopaque_closure.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/Compiler%2Fsrc%2Fopaque_closure.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -48,6 +48,8 @@ function Core.OpaqueClosure(ir::IRCode, @nospecialize env...;\n     end\n     src.slotflags = fill(zero(UInt8), nargtypes)\n     src.slottypes = copy(ir.argtypes)\n+    src.min_world = ir.valid_worlds.min_world\n+    src.max_world = ir.valid_worlds.max_world\n     src.isva = isva\n     src.nargs = UInt(nargtypes)\n     src = ir_to_codeinf!(src, ir)"
    },
    {
      "sha": "fcead89d0a151c4123463ddbdbfe0c2ba7e6421a",
      "filename": "Compiler/src/tfuncs.jl",
      "status": "modified",
      "additions": 15,
      "deletions": 4,
      "changes": 19,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Fsrc%2Ftfuncs.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Fsrc%2Ftfuncs.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/Compiler%2Fsrc%2Ftfuncs.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -586,15 +586,19 @@ add_tfunc(nfields, 1, 1, nfields_tfunc, 1)\n add_tfunc(Core._expr, 1, INT_INF, @nospecs((\ud835\udd43::AbstractLattice, args...)->Expr), 100)\n add_tfunc(svec, 0, INT_INF, @nospecs((\ud835\udd43::AbstractLattice, args...)->SimpleVector), 20)\n \n-@nospecs function _svec_len_tfunc(\ud835\udd43::AbstractLattice, s)\n+@nospecs function _svec_len_tfunc(::AbstractLattice, s)\n     if isa(s, Const) && isa(s.val, SimpleVector)\n         return Const(length(s.val))\n     end\n     return Int\n end\n add_tfunc(Core._svec_len, 1, 1, _svec_len_tfunc, 1)\n+@nospecs function _svec_len_nothrow(\ud835\udd43::AbstractLattice, s)\n+    \u2291 = partialorder(\ud835\udd43)\n+    return s \u2291 SimpleVector\n+end\n \n-@nospecs function _svec_ref_tfunc(\ud835\udd43::AbstractLattice, s, i)\n+@nospecs function _svec_ref_tfunc(::AbstractLattice, s, i)\n     if isa(s, Const) && isa(i, Const)\n         s, i = s.val, i.val\n         if isa(s, SimpleVector) && isa(i, Int)\n@@ -604,7 +608,7 @@ add_tfunc(Core._svec_len, 1, 1, _svec_len_tfunc, 1)\n     return Any\n end\n add_tfunc(Core._svec_ref, 2, 2, _svec_ref_tfunc, 1)\n-@nospecs function typevar_tfunc(\ud835\udd43::AbstractLattice, n, lb_arg, ub_arg)\n+@nospecs function typevar_tfunc(::AbstractLattice, n, lb_arg, ub_arg)\n     lb = Union{}\n     ub = Any\n     ub_certain = lb_certain = true\n@@ -2363,7 +2367,7 @@ function _builtin_nothrow(\ud835\udd43::AbstractLattice, @nospecialize(f::Builtin), argt\n         return compilerbarrier_nothrow(argtypes[1], nothing)\n     elseif f === Core._svec_len\n         na == 1 || return false\n-        return _svec_len_tfunc(\ud835\udd43, argtypes[1]) isa Const\n+        return _svec_len_nothrow(\ud835\udd43, argtypes[1])\n     elseif f === Core._svec_ref\n         na == 2 || return false\n         return _svec_ref_tfunc(\ud835\udd43, argtypes[1], argtypes[2]) isa Const\n@@ -2974,6 +2978,13 @@ function intrinsic_exct(\ud835\udd43::AbstractLattice, f::IntrinsicFunction, argtypes::V\n         return Union{}\n     end\n \n+    if f === Intrinsics.add_ptr || f === Intrinsics.sub_ptr\n+        if !(argtypes[1] \u2291 Ptr && argtypes[2] \u2291 UInt)\n+            return TypeError\n+        end\n+        return Union{}\n+    end\n+\n     # The remaining intrinsics are math/bits/comparison intrinsics.\n     # All the non-floating point intrinsics work on primitive values of the same type.\n     isshift = f === shl_int || f === lshr_int || f === ashr_int"
    },
    {
      "sha": "e06d885fcefd7967b76dbf94ad4516c24742059f",
      "filename": "Compiler/test/effects.jl",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Ftest%2Feffects.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Ftest%2Feffects.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/Compiler%2Ftest%2Feffects.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1438,6 +1438,11 @@ let effects = Base.infer_effects(Core.Intrinsics.pointerset, Tuple{Vararg{Any}})\n     @test Compiler.is_consistent(effects)\n     @test !Compiler.is_effect_free(effects)\n end\n+@test Compiler.intrinsic_nothrow(Core.Intrinsics.add_ptr, Any[Ptr{Int}, UInt])\n+@test Compiler.intrinsic_nothrow(Core.Intrinsics.sub_ptr, Any[Ptr{Int}, UInt])\n+@test !Compiler.intrinsic_nothrow(Core.Intrinsics.add_ptr, Any[UInt, UInt])\n+@test !Compiler.intrinsic_nothrow(Core.Intrinsics.sub_ptr, Any[UInt, UInt])\n+@test Compiler.is_nothrow(Base.infer_effects(+, Tuple{Ptr{UInt8}, UInt}))\n # effects modeling for atomic intrinsics\n # these functions especially need to be marked !effect_free since they imply synchronization\n for atomicfunc = Any[\n@@ -1471,3 +1476,5 @@ let effects = Base.infer_effects((Core.SimpleVector,Int); optimize=false) do sve\n     @test !Compiler.is_nothrow(effects)\n     @test Compiler.is_terminates(effects)\n end\n+\n+@test Compiler.is_nothrow(Base.infer_effects(length, (Core.SimpleVector,)))"
    },
    {
      "sha": "6b1b9648051496b7827ead42c728ee191439df2b",
      "filename": "Compiler/test/inference.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Ftest%2Finference.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Ftest%2Finference.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/Compiler%2Ftest%2Finference.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -6235,7 +6235,7 @@ g57292(xs::String...) = getfield((\"abc\",), 1, :not_atomic, xs...)\n global invalid_setglobal!_exct_modeling::Int\n @test Base.infer_exception_type((Float64,)) do x\n     setglobal!(@__MODULE__, :invalid_setglobal!_exct_modeling, x)\n-end == ErrorException\n+end == TypeError\n \n # Issue #58257 - Hang in inference during BindingPartition resolution\n module A58257"
    },
    {
      "sha": "6b7865e12f58edc237a0e8090fda3fa58a1eb56a",
      "filename": "Compiler/test/special_loading.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Ftest%2Fspecial_loading.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Ftest%2Fspecial_loading.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/Compiler%2Ftest%2Fspecial_loading.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1,6 +1,7 @@\n # This file is a part of Julia. License is MIT: https://julialang.org/license\n \n-mktempdir() do dir\n+include(joinpath(Sys.BINDIR, Base.DATAROOTDIR, \"julia\", \"test\", \"tempdepot.jl\"))\n+mkdepottempdir() do dir\n     withenv(\"JULIA_DEPOT_PATH\" => dir * (Sys.iswindows() ? \";\" : \":\"), \"JULIA_LOAD_PATH\" => nothing) do\n         cd(joinpath(@__DIR__, \"CompilerLoadingTest\")) do\n             @test success(pipeline(`$(Base.julia_cmd()[1]) --startup-file=no --project=. compiler_loading_test.jl`; stdout, stderr))"
    },
    {
      "sha": "766f887c05860d2dde5e0d99815fce9141036c1c",
      "filename": "Compiler/test/validation.jl",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Ftest%2Fvalidation.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/Compiler%2Ftest%2Fvalidation.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/Compiler%2Ftest%2Fvalidation.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -4,6 +4,15 @@ using Test, Core.IR\n \n include(\"setup_Compiler.jl\")\n \n+@testset \"stdio validation\" begin\n+    for s in (:stdout, :stderr, :print, :println, :write)\n+        @test getglobal(Compiler, s) === getglobal(Core, s)\n+        @test isconst(Compiler, s)\n+    end\n+    @test Compiler.stdin === devnull\n+    @test isconst(Compiler, :stdin)\n+end\n+\n function f22938(a, b, x...)\n     nothing\n     nothing"
    },
    {
      "sha": "f58fda5ec855860677e2925ce317614a01a0d434",
      "filename": "Makefile",
      "status": "modified",
      "additions": 1,
      "deletions": 7,
      "changes": 8,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/Makefile",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/Makefile",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/Makefile?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -110,13 +110,7 @@ julia-src-release julia-src-debug : julia-src-% : julia-deps julia_flisp.boot.in\n julia-cli-release julia-cli-debug: julia-cli-% : julia-deps\n \t@$(MAKE) $(QUIET_MAKE) -C $(BUILDROOT)/cli $*\n \n-julia-sysimg-ji : $(TOP_LEVEL_PKG_LINK_TARGETS) julia-stdlib julia-base julia-cli-$(JULIA_BUILD_MODE) julia-src-$(JULIA_BUILD_MODE) | $(build_private_libdir)\n-\t@$(MAKE) $(QUIET_MAKE) -C $(BUILDROOT) -f sysimage.mk sysimg-ji JULIA_EXECUTABLE='$(JULIA_EXECUTABLE)'\n-\n-julia-sysimg-bc : $(TOP_LEVEL_PKG_LINK_TARGETS) julia-stdlib julia-base julia-cli-$(JULIA_BUILD_MODE) julia-src-$(JULIA_BUILD_MODE) | $(build_private_libdir)\n-\t@$(MAKE) $(QUIET_MAKE) -C $(BUILDROOT) -f sysimage.mk sysimg-bc JULIA_EXECUTABLE='$(JULIA_EXECUTABLE)'\n-\n-julia-sysimg-release julia-sysimg-debug : julia-sysimg-% : julia-sysimg-ji julia-src-%\n+julia-sysimg-release julia-sysimg-debug : julia-sysimg-% : julia-src-% $(TOP_LEVEL_PKG_LINK_TARGETS) julia-stdlib julia-base julia-cli-% julia-src-% | $(build_private_libdir)\n \t@$(MAKE) $(QUIET_MAKE) -C $(BUILDROOT) -f sysimage.mk sysimg-$*\n \n julia-debug julia-release : julia-% : julia-sysimg-% julia-src-% julia-symlink julia-libccalltest \\"
    },
    {
      "sha": "7fe5ff626f448c639432d1c7440ad1379f995812",
      "filename": "base/array.jl",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Farray.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Farray.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Farray.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1053,14 +1053,14 @@ end\n # Specifically we are wasting ~10% of memory for small arrays\n # by not picking memory sizes that max out a GC pool\n function overallocation(maxsize)\n-    maxsize < 8 && return 8;\n-    # compute maxsize = maxsize + 4*maxsize^(7/8) + maxsize/8\n+    # compute maxsize = maxsize + 3*maxsize^(7/8) + maxsize/8\n     # for small n, we grow faster than O(n)\n     # for large n, we grow at O(n/8)\n     # and as we reach O(memory) for memory>>1MB,\n     # this means we end by adding about 10% of memory each time\n+    # most commonly, this will take steps of 0-3-9-34 or 1-4-16-66 or 2-8-33\n     exp2 = sizeof(maxsize) * 8 - Core.Intrinsics.ctlz_int(maxsize)\n-    maxsize += (1 << div(exp2 * 7, 8)) * 4 + div(maxsize, 8)\n+    maxsize += (1 << div(exp2 * 7, 8)) * 3 + div(maxsize, 8)\n     return maxsize\n end\n "
    },
    {
      "sha": "e211ac763fcadbf742cc043c8fb466034e162af9",
      "filename": "base/binaryplatforms.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fbinaryplatforms.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fbinaryplatforms.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fbinaryplatforms.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1044,7 +1044,7 @@ function platforms_match(a::AbstractPlatform, b::AbstractPlatform)\n \n         # Call the comparator, passing in which objects requested this comparison (one, the other, or both)\n         # For some comparators this doesn't matter, but for non-symmetrical comparisons, it does.\n-        if !(comparator(ak, bk, a_comp === comparator, b_comp === comparator)::Bool)\n+        if !(@invokelatest(comparator(ak, bk, a_comp === comparator, b_comp === comparator))::Bool)\n             return false\n         end\n     end"
    },
    {
      "sha": "e1af7383fbb81b1e808e5c9709e1d58979f87bab",
      "filename": "base/boot.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fboot.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fboot.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fboot.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -410,7 +410,7 @@ struct TypeError <: Exception\n     # `context` optionally adds extra detail, e.g. the name of the type parameter\n     # that got a bad value.\n     func::Symbol\n-    context::Union{AbstractString,Symbol}\n+    context::Union{AbstractString,GlobalRef,Symbol}\n     expected::Type\n     got\n     TypeError(func, context, @nospecialize(expected::Type), @nospecialize(got)) ="
    },
    {
      "sha": "0ec852ff045c7135de2c8de6c6e0d7ef0a682e6b",
      "filename": "base/div.jl",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fdiv.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fdiv.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fdiv.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -385,3 +385,9 @@ end\n # NOTE: C89 fmod() and x87 FPREM implicitly provide truncating float division,\n # so it is used here as the basis of float div().\n div(x::T, y::T, r::RoundingMode) where {T<:AbstractFloat} = convert(T, round((x - rem(x, y, r)) / y))\n+\n+# Vincent Lef\u00e8vre: \"The Euclidean Division Implemented with a Floating-Point Division and a Floor\"\n+# https://inria.hal.science/inria-00070403\n+# Theorem 1 implies that the following are exact if eps(x/y) <= 1\n+div(x::Float32, y::Float32, r::RoundingMode) = Float32(round(Float64(x) / Float64(y), r))\n+div(x::Float16, y::Float16, r::RoundingMode) = Float16(round(Float32(x) / Float32(y), r))"
    },
    {
      "sha": "d8d94d6f1fb94097be2f8932347e168d4c7a7137",
      "filename": "base/errorshow.jl",
      "status": "modified",
      "additions": 11,
      "deletions": 8,
      "changes": 19,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Ferrorshow.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Ferrorshow.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Ferrorshow.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -91,6 +91,9 @@ function showerror(io::IO, ex::TypeError)\n         end\n         if ex.context == \"\"\n             ctx = \"in $(ex.func)\"\n+        elseif isa(ex.context, Core.GlobalRef)\n+            gr = ex.context\n+            ctx = \"in $(ex.func) of global binding `$(gr.mod).$(gr.name)`\"\n         elseif ex.func === :var\"keyword argument\"\n             ctx = \"in keyword argument $(ex.context)\"\n         else\n@@ -259,7 +262,7 @@ function showerror(io::IO, ex::MethodError)\n     is_arg_types = !isa(ex.args, Tuple)\n     arg_types = is_arg_types ? ex.args : typesof(ex.args...)\n     arg_types_param::SimpleVector = (unwrap_unionall(arg_types)::DataType).parameters\n-    san_arg_types_param = Any[rewrap_unionall(a, arg_types) for a in arg_types_param]\n+    san_arg_types_param = Any[rewrap_unionall(arg_types_param[i], arg_types) for i in 1:length(arg_types_param)]\n     f = ex.f\n     meth = methods_including_ambiguous(f, arg_types)\n     if isa(meth, MethodList) && length(meth) > 1\n@@ -399,10 +402,10 @@ function showerror_ambiguous(io::IO, meths, f, args::Type)\n         sigfix = typeintersect(m.sig, sigfix)\n     end\n     if isa(unwrap_unionall(sigfix), DataType) && sigfix <: Tuple\n-        let sigfix=sigfix\n-            if all(m->morespecific(sigfix, m.sig), meths)\n+        let sigfix=Core.Box(sigfix)\n+            if all(m->morespecific(sigfix.contents, m.sig), meths)\n                 print(io, \"\\nPossible fix, define\\n  \")\n-                show_tuple_as_call(io, :function,  sigfix)\n+                show_tuple_as_call(io, :function,  sigfix.contents)\n             else\n                 print(io, \"To resolve the ambiguity, try making one of the methods more specific, or \")\n                 print(io, \"adding a new method more specific than any of the existing applicable methods.\")\n@@ -487,10 +490,10 @@ function show_method_candidates(io::IO, ex::MethodError, kwargs=[])\n                 # If isvarargtype then it checks whether the rest of the input arguments matches\n                 # the varargtype\n                 if Base.isvarargtype(sig[i])\n-                    sigstr = (unwrapva(unwrap_unionall(sig[i])), \"...\")\n+                    sigstr = Core.svec(unwrapva(unwrap_unionall(sig[i])), \"...\")\n                     j = length(t_i)\n                 else\n-                    sigstr = (sig[i],)\n+                    sigstr = Core.svec(sig[i],)\n                     j = i\n                 end\n                 # Checks if the type of arg 1:i of the input intersects with the current method\n@@ -536,9 +539,9 @@ function show_method_candidates(io::IO, ex::MethodError, kwargs=[])\n                 for (k, sigtype) in enumerate(sig[length(t_i)+1:end])\n                     sigtype = isvarargtype(sigtype) ? unwrap_unionall(sigtype) : sigtype\n                     if Base.isvarargtype(sigtype)\n-                        sigstr = (unwrapva(sigtype::Core.TypeofVararg), \"...\")\n+                        sigstr = Core.svec(unwrapva(sigtype::Core.TypeofVararg), \"...\")\n                     else\n-                        sigstr = (sigtype,)\n+                        sigstr = Core.svec(sigtype,)\n                     end\n                     if !((min(length(t_i), length(sig)) == 0) && k==1)\n                         print(iob, \", \")"
    },
    {
      "sha": "66400d88fd1ab4ff2770d89228f09a32205b8f3d",
      "filename": "base/essentials.jl",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fessentials.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fessentials.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fessentials.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1009,6 +1009,10 @@ struct Colon <: Function\n end\n const (:) = Colon()\n \n+function show(io::IO, ::Colon)\n+    show_type_name(io, Colon.name)\n+    print(io, \"()\")\n+end\n \n \"\"\"\n     Val(c)"
    },
    {
      "sha": "8500d8c3ea91ae9a416afda5004e50b157275b85",
      "filename": "base/experimental.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fexperimental.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fexperimental.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fexperimental.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -315,6 +315,7 @@ the handler for that type.\n     This interface is experimental and subject to change or removal without notice.\n \"\"\"\n function show_error_hints(io, ex, args...)\n+    @nospecialize\n     hinters = get(_hint_handlers, typeof(ex), nothing)\n     isnothing(hinters) && return\n     for handler in hinters"
    },
    {
      "sha": "ed686fb92bf34064d94be507031b87925dc48ea9",
      "filename": "base/fastmath.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Ffastmath.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Ffastmath.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Ffastmath.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -297,7 +297,7 @@ exp10_fast(x::Union{Float32,Float64}) = Base.Math.exp10_fast(x)\n \n # builtins\n \n-function pow_fast(x::Float64, y::Integer)\n+@inline function pow_fast(x::Float64, y::Integer)\n     z = y % Int32\n     z == y ? pow_fast(x, z) : x^y\n end"
    },
    {
      "sha": "ce9bc76256fd31943aa75c76af28794ec9247bc5",
      "filename": "base/file.jl",
      "status": "modified",
      "additions": 48,
      "deletions": 11,
      "changes": 59,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Ffile.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Ffile.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Ffile.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -253,9 +253,9 @@ function mkpath(path::AbstractString; mode::Integer = 0o777)\n     return path\n end\n \n-# Files that were requested to be deleted but can't be by the current process\n-# i.e. loaded DLLs on Windows\n-delayed_delete_dir() = joinpath(tempdir(), \"julia_delayed_deletes\")\n+# Files that were requested to be deleted but can't be by the current process,\n+# i.e. loaded DLLs on Windows, are listed in the directory below\n+delayed_delete_ref() = joinpath(tempdir(), \"julia_delayed_deletes_ref\")\n \n \"\"\"\n     rm(path::AbstractString; force::Bool=false, recursive::Bool=false)\n@@ -288,13 +288,7 @@ function rm(path::AbstractString; force::Bool=false, recursive::Bool=false, allo\n                 force && err.code==Base.UV_ENOENT && return\n                 @static if Sys.iswindows()\n                     if allow_delayed_delete && err.code==Base.UV_EACCES && endswith(path, \".dll\")\n-                        # Loaded DLLs cannot be deleted on Windows, even with posix delete mode\n-                        # but they can be moved. So move out to allow the dir to be deleted.\n-                        # Pkg.gc() cleans up this dir when possible\n-                        dir = mkpath(delayed_delete_dir())\n-                        temp_path = tempname(dir, cleanup = false, suffix = string(\"_\", basename(path)))\n-                        @debug \"Could not delete DLL most likely because it is loaded, moving to tempdir\" path temp_path\n-                        mv(path, temp_path)\n+                        delayed_delete_dll(path)\n                         return\n                     end\n                 end\n@@ -330,6 +324,22 @@ function rm(path::AbstractString; force::Bool=false, recursive::Bool=false, allo\n end\n \n \n+# Loaded DLLs cannot be deleted on Windows, even with posix delete mode but they can be renamed.\n+# delayed_delete_dll(path) does so temporarily, until later cleanup by Pkg.gc().\n+function delayed_delete_dll(path)\n+    # in-use DLL must be kept on the same drive\n+    temp_path = tempname(abspath(dirname(path)); cleanup=false, suffix=string(\"_\", basename(path)))\n+    @debug \"Could not delete DLL most likely because it is loaded, moving to a temporary path\" path temp_path\n+    mkpath(delayed_delete_ref())\n+    io = last(mktemp(delayed_delete_ref(); cleanup=false))\n+    try\n+        print(io, temp_path) # record the temporary path for Pkg.gc()\n+    finally\n+        close(io)\n+    end\n+    rename(path, temp_path) # do not call mv which could recursively call rm(path)\n+end\n+\n # The following use Unix command line facilities\n function checkfor_mv_cp_cptree(src::AbstractString, dst::AbstractString, txt::AbstractString;\n                                                           force::Bool=false)\n@@ -678,8 +688,35 @@ end\n # deprecated internal function used by some packages\n temp_cleanup_purge(; force=false) = force ? temp_cleanup_purge_all() : @lock TEMP_CLEANUP_LOCK temp_cleanup_purge_prelocked(false)\n \n+function temp_cleanup_postprocess(cleanup_dirs)\n+    if !isempty(cleanup_dirs)\n+        rmcmd = \"\"\"\n+        cleanuplist = readlines(stdin) # This loop won't start running until stdin is closed, which is supposed to be sequenced after the process exits\n+        sleep(1) # Wait for the operating system to hopefully be ready, since the OS implementation is probably incorrect, given the history of buggy work-arounds like this that have existed for ages in dotNet and libuv\n+        for path in cleanuplist\n+            try\n+                rm(path, force=true, recursive=true)\n+            catch ex\n+                @warn \"Failed to clean up temporary path \\$(repr(path))\\n\\$ex\" _group=:file\n+            end\n+        end\n+        \"\"\"\n+        cmd = Cmd(Base.cmd_gen(((Base.julia_cmd(),), (\"--startup-file=no\",), (\"-e\",), (rmcmd,))); ignorestatus = true, detach = true)\n+        pw = Base.PipeEndpoint()\n+        run(cmd, pw, devnull, stderr; wait=false)\n+        join(pw, cleanup_dirs, \"\\n\")\n+        Base.dup(Base._fd(pw)) # intentionally leak a reference, until the process exits\n+        close(pw)\n+    end\n+end\n+\n+function temp_cleanup_atexit()\n+    temp_cleanup_purge_all()\n+    @lock TEMP_CLEANUP_LOCK temp_cleanup_postprocess(keys(TEMP_CLEANUP))\n+end\n+\n function __postinit__()\n-    Base.atexit(temp_cleanup_purge_all)\n+    Base.atexit(temp_cleanup_atexit)\n end\n \n const temp_prefix = \"jl_\""
    },
    {
      "sha": "d660c6d0a8ecc71403c6aab80ac77d4e34d31ff3",
      "filename": "base/intfuncs.jl",
      "status": "modified",
      "additions": 24,
      "deletions": 10,
      "changes": 34,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fintfuncs.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fintfuncs.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fintfuncs.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -148,6 +148,8 @@ gcd(a::Rational) = checked_abs(a.num) // a.den\n lcm(a::Union{Integer,Rational}) = gcd(a)\n gcd(a::Unsigned, b::Signed) = gcd(promote(a, abs(b))...)\n gcd(a::Signed, b::Unsigned) = gcd(promote(abs(a), b)...)\n+lcm(a::Unsigned, b::Signed) = lcm(promote(a, abs(b))...)\n+lcm(a::Signed, b::Unsigned) = lcm(promote(abs(a), b)...)\n gcd(a::Real, b::Real) = gcd(promote(a,b)...)\n lcm(a::Real, b::Real) = lcm(promote(a,b)...)\n gcd(a::Real, b::Real, c::Real...) = gcd(a, gcd(b, c...))\n@@ -252,6 +254,16 @@ function gcdx(a::Real, b::Real, cs::Real...)\n     d\u2032, x, ys... = gcdx(d, cs...)\n     return d\u2032, i*x, j*x, ys...\n end\n+function gcdx(a::Signed, b::Unsigned)\n+    R = promote_type(typeof(a), typeof(b))\n+    _a = a % signed(R) # handle the case a == typemin(typeof(a)) if R != typeof(a)\n+    d, u, v = gcdx(promote(abs(_a), b)...)\n+    d, flipsign(u, a), v\n+end\n+function gcdx(a::Unsigned, b::Signed)\n+    d, v, u = gcdx(b, a)\n+    d, u, v\n+end\n \n # multiplicative inverse of n mod m, error if none\n \n@@ -477,18 +489,20 @@ julia> powermod(5, 3, 19)\n function powermod(x::Integer, p::Integer, m::T) where T<:Integer\n     p == 0 && return mod(one(m),m)\n     # When the concrete type of p is signed and has the lowest value,\n-    # `p != 0 && p == -p` is equivalent to `p == typemin(typeof(p))` for 2's complement representation.\n+    # `p < 0 && p == -p` is equivalent to `p == typemin(typeof(p))` for 2's complement representation.\n     # but will work for integer types like `BigInt` that don't have `typemin` defined\n     # It needs special handling otherwise will cause overflow problem.\n-    if p == -p\n-        imod = invmod(x, m)\n-        rhalf = powermod(imod, -(p\u00f72), m)\n-        r::T = mod(widemul(rhalf, rhalf), m)\n-        isodd(p) && (r = mod(widemul(r, imod), m))\n-        #else odd\n-        return r\n-    elseif p < 0\n-        return powermod(invmod(x, m), -p, m)\n+    if p < 0\n+        if p == -p\n+            imod = invmod(x, m)\n+            rhalf = powermod(imod, -(p\u00f72), m)\n+            r::T = mod(widemul(rhalf, rhalf), m)\n+            isodd(p) && (r = mod(widemul(r, imod), m))\n+            #else odd\n+            return r\n+        else\n+            return powermod(invmod(x, m), -p, m)\n+        end\n     end\n     (m == 1 || m == -1) && return zero(m)\n     b = oftype(m,mod(x,m))  # this also checks for divide by zero"
    },
    {
      "sha": "fee699287705bfc93e3ceafd93bf41012cb1a8b6",
      "filename": "base/iobuffer.jl",
      "status": "modified",
      "additions": 6,
      "deletions": 4,
      "changes": 10,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fiobuffer.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fiobuffer.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fiobuffer.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -604,7 +604,8 @@ end\n     end\n     # The fast path here usually checks there is already room, then does nothing.\n     # When append is true, new data is added after io.size, not io.ptr\n-    existing_space = min(lastindex(io.data), io.maxsize + get_offset(io)) - (io.append ? io.size : io.ptr - 1)\n+    start_offset = io.append ? io.size : io.ptr - 1\n+    existing_space = min(lastindex(io.data) - start_offset, io.maxsize - (start_offset - get_offset(io)))\n     if existing_space < nshort % Int\n         # Outline this function to make it more likely that ensureroom inlines itself\n         return ensureroom_slowpath(io, nshort, existing_space)\n@@ -824,12 +825,13 @@ function unsafe_write(to::GenericIOBuffer, p::Ptr{UInt8}, nb::UInt)\n     append = to.append\n     ptr = append ? size+1 : to.ptr\n     data = to.data\n-    to_write = min(nb, (min(Int(length(data))::Int, to.maxsize + get_offset(to)) - ptr + 1) % UInt) % Int\n+    start_offset = ptr - 1\n+    to_write = max(0, min(nb, (min(Int(length(data))::Int - start_offset, to.maxsize - (start_offset - get_offset(to)))) % UInt) % Int)\n     # Dispatch based on the type of data, to possibly allow using memcpy\n     _unsafe_write(data, p, ptr, to_write % UInt)\n     # Update to.size only if the ptr has advanced to higher than\n     # the previous size. Otherwise, we just overwrote existing data\n-    to.size = max(size, ptr + to_write - 1)\n+    to.size = max(size, start_offset + to_write)\n     # If to.append, we only update size, not ptr.\n     if !append\n         to.ptr = ptr + to_write\n@@ -867,7 +869,7 @@ end\n     ptr = (to.append ? to.size+1 : to.ptr)\n     # We have just ensured there is room for 1 byte, EXCEPT if we were to exceed\n     # maxsize. So, we just need to check that here.\n-    if ptr > to.maxsize + get_offset(to)\n+    if ptr - get_offset(to) > to.maxsize\n         return 0\n     else\n         to.data[ptr] = a"
    },
    {
      "sha": "47e365f5c7a8670a0a1a3850da5fc7033699c342",
      "filename": "base/iterators.jl",
      "status": "modified",
      "additions": 6,
      "deletions": 3,
      "changes": 9,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fiterators.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fiterators.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fiterators.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -16,7 +16,7 @@ using .Base:\n     (:), |, +, -, *, !==, !, ==, !=, <=, <, >, >=, =>, missing,\n     any, _counttuple, eachindex, ntuple, zero, prod, reduce, in, firstindex, lastindex,\n     tail, fieldtypes, min, max, minimum, zero, oneunit, promote, promote_shape, LazyString,\n-    afoldl\n+    afoldl, @default_eltype\n using Core\n using Core: @doc\n \n@@ -1140,6 +1140,8 @@ end\n     next === nothing && return nothing\n     restnext = _piterate(rest...)\n     restnext === nothing && return nothing\n+    VS = @default_eltype(iter1)\n+    next = Pair{VS, typeof(next[2])}(next[1], next[2])\n     return (next, restnext...)\n end\n @inline function iterate(P::ProductIterator)\n@@ -1152,15 +1154,16 @@ end\n @inline _piterate1(::Tuple{}, ::Tuple{}) = nothing\n @inline function _piterate1(iters, states)\n     iter1 = first(iters)\n-    next = iterate(iter1, first(states)[2])\n-    restnext = tail(states)\n+    state1, restnext... = states\n+    next = iterate(iter1, state1[2])\n     if next === nothing\n         isdone(iter1) === true && return nothing\n         restnext = _piterate1(tail(iters), restnext)\n         restnext === nothing && return nothing\n         next = iterate(iter1)\n         next === nothing && return nothing\n     end\n+    next = Pair{fieldtype(typeof(state1), 1), typeof(next[2])}(next[1], next[2])\n     return (next, restnext...)\n end\n @inline function iterate(P::ProductIterator, states)"
    },
    {
      "sha": "428b106aa08eea36a1cad319566e0d12945317e0",
      "filename": "base/loading.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Floading.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Floading.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Floading.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -2622,12 +2622,11 @@ function __require_prelocked(pkg::PkgId, env)\n     if JLOptions().use_compiled_modules == 1\n         if !generating_output(#=incremental=#false)\n             project = active_project()\n-            if !generating_output() && !parallel_precompile_attempted && !disable_parallel_precompile && @isdefined(Precompilation) && project !== nothing &&\n-                    isfile(project) && project_file_manifest_path(project) !== nothing\n+            if !generating_output() && !parallel_precompile_attempted && !disable_parallel_precompile && @isdefined(Precompilation)\n                 parallel_precompile_attempted = true\n                 unlock(require_lock)\n                 try\n-                    Precompilation.precompilepkgs([pkg.name]; _from_loading=true, ignore_loaded=false)\n+                    Precompilation.precompilepkgs([pkg]; _from_loading=true, ignore_loaded=false)\n                 finally\n                     lock(require_lock)\n                 end"
    },
    {
      "sha": "b6dc01f4f326cf43ccb0d4e98e15530b959561c5",
      "filename": "base/logging/ConsoleLogger.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Flogging%2FConsoleLogger.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Flogging%2FConsoleLogger.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Flogging%2FConsoleLogger.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -124,8 +124,8 @@ function handle_message(logger::ConsoleLogger, level::LogLevel, message, _module\n     # split into lines.  This is specialised to improve type inference,\n     # and reduce the risk of resulting method invalidations.\n     message = string(message)\n-    msglines = if Base._isannotated(message) && !isempty(Base.annotations(message))\n-        message = Base.AnnotatedString(String(message), Base.annotations(message))\n+    msglines = if Base._isannotated(message) && !isempty(Base.annotations(message)::Vector{Base.RegionAnnotation})\n+        message = Base.AnnotatedString(String(message)::String, Base.annotations(message)::Vector{Base.RegionAnnotation})\n         @NamedTuple{indent::Int, msg::Union{SubString{Base.AnnotatedString{String}}, SubString{String}}}[\n             (indent=0, msg=l) for l in split(chomp(message), '\\n')]\n     else"
    },
    {
      "sha": "cd73506c9e96f34c0083df006537fd40138c21b1",
      "filename": "base/mpfr.jl",
      "status": "modified",
      "additions": 7,
      "deletions": 1,
      "changes": 8,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fmpfr.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fmpfr.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fmpfr.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -391,12 +391,18 @@ BigFloat(x::Union{Float16,Float32}, r::MPFRRoundingMode=rounding_raw(BigFloat);\n     BigFloat(Float64(x), r; precision=precision)\n \n function BigFloat(x::Rational, r::MPFRRoundingMode=rounding_raw(BigFloat); precision::Integer=_precision_with_base_2(BigFloat))\n+    r_den = _opposite_round(r)\n     setprecision(BigFloat, precision) do\n         setrounding_raw(BigFloat, r) do\n-            BigFloat(numerator(x))::BigFloat / BigFloat(denominator(x))::BigFloat\n+            BigFloat(numerator(x))::BigFloat / BigFloat(denominator(x), r_den)::BigFloat\n         end\n     end\n end\n+function _opposite_round(r::MPFRRoundingMode)\n+    r == MPFRRoundUp && return MPFRRoundDown\n+    r == MPFRRoundDown && return MPFRRoundUp\n+    return r\n+end\n \n function tryparse(::Type{BigFloat}, s::AbstractString; base::Integer=0, precision::Integer=_precision_with_base_2(BigFloat), rounding::MPFRRoundingMode=rounding_raw(BigFloat))\n     !isempty(s) && isspace(s[end]) && return tryparse(BigFloat, rstrip(s), base = base)"
    },
    {
      "sha": "45634d877115fa5aecea70feede8f7cd743ea843",
      "filename": "base/precompilation.jl",
      "status": "modified",
      "additions": 82,
      "deletions": 18,
      "changes": 100,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fprecompilation.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fprecompilation.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fprecompilation.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -26,9 +26,24 @@ struct ExplicitEnv\n     #local_prefs::Union{Nothing, Dict{String, Any}}\n end\n \n-function ExplicitEnv(envpath::String=Base.active_project())\n-    if !isfile(envpath)\n-        error(\"expected a project file at $(repr(envpath))\")\n+ExplicitEnv() = ExplicitEnv(Base.active_project())\n+function ExplicitEnv(::Nothing, envpath::String=\"\")\n+    ExplicitEnv(envpath,\n+        Dict{String, UUID}(),     # project_deps\n+        Dict{String, UUID}(),     # project_weakdeps\n+        Dict{String, UUID}(),     # project_extras\n+        Dict{String, Vector{UUID}}(), # project_extensions\n+        Dict{UUID, Vector{UUID}}(),   # deps\n+        Dict{UUID, Vector{UUID}}(),   # weakdeps\n+        Dict{UUID, Dict{String, Vector{UUID}}}(), # extensions\n+        Dict{UUID, String}(),     # names\n+        Dict{UUID, Union{SHA1, String, Nothing, Missing}}())\n+end\n+function ExplicitEnv(envpath::String)\n+    # Handle missing project file by creating an empty environment\n+    if !isfile(envpath) || project_file_manifest_path(envpath) === nothing\n+        envpath = abspath(envpath)\n+        return ExplicitEnv(nothing, envpath)\n     end\n     envpath = abspath(envpath)\n     project_d = parsed_toml(envpath)\n@@ -456,7 +471,7 @@ function collect_all_deps(direct_deps, dep, alldeps=Set{Base.PkgId}())\n end\n \n \n-function precompilepkgs(pkgs::Vector{String}=String[];\n+function precompilepkgs(pkgs::Union{Vector{String}, Vector{PkgId}}=String[];\n                         internal_call::Bool=false,\n                         strict::Bool = false,\n                         warn_loaded::Bool = true,\n@@ -468,13 +483,14 @@ function precompilepkgs(pkgs::Vector{String}=String[];\n                         fancyprint::Bool = can_fancyprint(io) && !timing,\n                         manifest::Bool=false,\n                         ignore_loaded::Bool=true)\n+    @debug \"precompilepkgs called with\" pkgs internal_call strict warn_loaded timing _from_loading configs fancyprint manifest ignore_loaded\n     # monomorphize this to avoid latency problems\n     _precompilepkgs(pkgs, internal_call, strict, warn_loaded, timing, _from_loading,\n                    configs isa Vector{Config} ? configs : [configs],\n                    IOContext{IO}(io), fancyprint, manifest, ignore_loaded)\n end\n \n-function _precompilepkgs(pkgs::Vector{String},\n+function _precompilepkgs(pkgs::Union{Vector{String}, Vector{PkgId}},\n                          internal_call::Bool,\n                          strict::Bool,\n                          warn_loaded::Bool,\n@@ -486,6 +502,23 @@ function _precompilepkgs(pkgs::Vector{String},\n                          manifest::Bool,\n                          ignore_loaded::Bool)\n     requested_pkgs = copy(pkgs) # for understanding user intent\n+    pkg_names = pkgs isa Vector{String} ? copy(pkgs) : String[pkg.name for pkg in pkgs]\n+    if pkgs isa Vector{PkgId}\n+        requested_pkgids = copy(pkgs)\n+    else\n+        requested_pkgids = PkgId[]\n+        for name in pkgs\n+            pkgid = Base.identify_package(name)\n+            if pkgid === nothing\n+                if _from_loading\n+                    return # leave it up to loading to handle this\n+                else\n+                    throw(PkgPrecompileError(\"Unknown package: $name\"))\n+                end\n+            end\n+            push!(requested_pkgids, pkgid)\n+        end\n+    end\n \n     time_start = time_ns()\n \n@@ -518,9 +551,12 @@ function _precompilepkgs(pkgs::Vector{String},\n     # inverse map of `parent_to_ext` above (ext \u2192 parent)\n     ext_to_parent = Dict{Base.PkgId, Base.PkgId}()\n \n-    function describe_pkg(pkg::PkgId, is_project_dep::Bool, flags::Cmd, cacheflags::Base.CacheFlags)\n+    function describe_pkg(pkg::PkgId, is_project_dep::Bool, is_serial_dep::Bool, flags::Cmd, cacheflags::Base.CacheFlags)\n         name = full_name(ext_to_parent, pkg)\n         name = is_project_dep ? name : color_string(name, :light_black)\n+        if is_serial_dep\n+            name *= color_string(\" (serial)\", :light_black)\n+        end\n         if nconfigs > 1 && !isempty(flags)\n             config_str = join(flags, \" \")\n             name *= color_string(\" `$config_str`\", :light_black)\n@@ -630,15 +666,27 @@ function _precompilepkgs(pkgs::Vector{String},\n     end\n     @debug \"precompile: extensions collected\"\n \n+    serial_deps = Base.PkgId[] # packages that are being precompiled in serial\n+\n+    if _from_loading\n+        # if called from loading precompilation it may be a package from another environment stack\n+        # where we don't have access to the dep graph, so just add as a single package and do serial\n+        # precompilation of its deps within the job.\n+        for pkgid in requested_pkgids # In case loading asks for multiple packages\n+            pkgid === nothing && continue\n+            if !haskey(direct_deps, pkgid)\n+                @debug \"precompile: package `$(pkgid)` is outside of the environment, so adding as single package serial job\"\n+                direct_deps[pkgid] = Base.PkgId[] # no deps, do them in serial in the job\n+                push!(project_deps, pkgid) # add to project_deps so it doesn't show up in gray\n+                push!(serial_deps, pkgid)\n+            end\n+        end\n+    end\n+\n     # return early if no deps\n     if isempty(direct_deps)\n         if isempty(pkgs)\n             return\n-        elseif _from_loading\n-            # if called from loading precompilation it may be a package from another environment stack so\n-            # don't error and allow serial precompilation to try\n-            # TODO: actually handle packages from other envs in the stack\n-            return\n         else\n             error(\"No direct dependencies outside of the sysimage found matching $(pkgs)\")\n         end\n@@ -672,6 +720,7 @@ function _precompilepkgs(pkgs::Vector{String},\n     circular_deps = Base.PkgId[]\n     for pkg in keys(direct_deps)\n         @assert isempty(stack)\n+        pkg in serial_deps && continue # skip serial deps as we don't have their dependency graph\n         if scan_pkg!(stack, could_be_cycle, cycles, pkg, direct_deps)\n             push!(circular_deps, pkg)\n             for pkg_config in keys(was_processed)\n@@ -685,18 +734,31 @@ function _precompilepkgs(pkgs::Vector{String},\n     end\n     @debug \"precompile: circular dep check done\"\n \n+    # If you have a workspace and want to precompile all projects in it, look through all packages in the manifest\n+    # instead of collecting from a project i.e. not filter out packages that are in the current project.\n+    # i.e. Pkg sets manifest to true for workspace precompile requests\n+    # TODO: rename `manifest`?\n     if !manifest\n-        if isempty(pkgs)\n-            pkgs = [pkg.name for pkg in project_deps]\n+        if isempty(pkg_names)\n+            pkg_names = [pkg.name for pkg in project_deps]\n         end\n         keep = Set{Base.PkgId}()\n         for dep in direct_deps\n             dep_pkgid = first(dep)\n-            if dep_pkgid.name in pkgs\n+            if dep_pkgid.name in pkg_names\n                 push!(keep, dep_pkgid)\n                 collect_all_deps(direct_deps, dep_pkgid, keep)\n             end\n         end\n+        # Also keep packages that were explicitly requested as PkgIds (for extensions)\n+        if pkgs isa Vector{PkgId}\n+            for requested_pkgid in requested_pkgids\n+                if haskey(direct_deps, requested_pkgid)\n+                    push!(keep, requested_pkgid)\n+                    collect_all_deps(direct_deps, requested_pkgid, keep)\n+                end\n+            end\n+        end\n         for ext in keys(ext_to_parent)\n             if issubset(collect_all_deps(direct_deps, ext), keep) # if all extension deps are kept\n                 push!(keep, ext)\n@@ -846,7 +908,7 @@ function _precompilepkgs(pkgs::Vector{String},\n                             dep, config = pkg_config\n                             loaded = warn_loaded && haskey(Base.loaded_modules, dep)\n                             flags, cacheflags = config\n-                            name = describe_pkg(dep, dep in project_deps, flags, cacheflags)\n+                            name = describe_pkg(dep, dep in project_deps, dep in serial_deps, flags, cacheflags)\n                             line = if pkg_config in precomperr_deps\n                                 string(color_string(\"  ? \", Base.warn_color()), name)\n                             elseif haskey(failed_deps, pkg_config)\n@@ -904,7 +966,8 @@ function _precompilepkgs(pkgs::Vector{String},\n     for (pkg, deps) in direct_deps\n         cachepaths = get!(() -> Base.find_all_in_cache_path(pkg), cachepath_cache, pkg)\n         sourcepath = Base.locate_package(pkg)\n-        single_requested_pkg = length(requested_pkgs) == 1 && only(requested_pkgs) == pkg.name\n+        single_requested_pkg = length(requested_pkgs) == 1 &&\n+            (pkg in requested_pkgids || pkg.name in pkg_names)\n         for config in configs\n             pkg_config = (pkg, config)\n             if sourcepath === nothing\n@@ -929,12 +992,13 @@ function _precompilepkgs(pkgs::Vector{String},\n                     if !circular && is_stale\n                         Base.acquire(parallel_limiter)\n                         is_project_dep = pkg in project_deps\n+                        is_serial_dep = pkg in serial_deps\n \n                         # std monitoring\n                         std_pipe = Base.link_pipe!(Pipe(); reader_supports_async=true, writer_supports_async=true)\n                         t_monitor = @async monitor_std(pkg_config, std_pipe; single_requested_pkg)\n \n-                        name = describe_pkg(pkg, is_project_dep, flags, cacheflags)\n+                        name = describe_pkg(pkg, is_project_dep, is_serial_dep, flags, cacheflags)\n                         @lock print_lock begin\n                             if !fancyprint && isempty(pkg_queue)\n                                 printpkgstyle(io, :Precompiling, something(target[], \"packages...\"))\n@@ -1030,7 +1094,7 @@ function _precompilepkgs(pkgs::Vector{String},\n         str = sprint(context=io) do iostr\n             if !quick_exit\n                 if fancyprint # replace the progress bar\n-                    what = isempty(requested_pkgs) ? \"packages finished.\" : \"$(join(requested_pkgs, \", \", \" and \")) finished.\"\n+                    what = isempty(requested_pkgids) ? \"packages finished.\" : \"$(join((p.name for p in requested_pkgids), \", \", \" and \")) finished.\"\n                     printpkgstyle(iostr, :Precompiling, what)\n                 end\n                 plural = length(configs) > 1 ? \"dependency configurations\" : ndeps == 1 ? \"dependency\" : \"dependencies\""
    },
    {
      "sha": "836fe8391302e3d5e9924b3ff8ca6be3da6b3a1b",
      "filename": "base/stream.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fstream.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fstream.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fstream.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -617,7 +617,8 @@ end\n function alloc_request(buffer::IOBuffer, recommended_size::UInt)\n     ensureroom(buffer, recommended_size)\n     ptr = buffer.append ? buffer.size + 1 : buffer.ptr\n-    nb = min(length(buffer.data), buffer.maxsize + get_offset(buffer)) - ptr + 1\n+    start_offset = ptr - 1\n+    nb = max(0, min(length(buffer.data) - start_offset, buffer.maxsize - (start_offset - get_offset(buffer))))\n     return (Ptr{Cvoid}(pointer(buffer.data, ptr)), nb)\n end\n "
    },
    {
      "sha": "bb45219c60a88009fcb0c1e73ded86b722ab0250",
      "filename": "base/threadingconstructs.jl",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fthreadingconstructs.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/base%2Fthreadingconstructs.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Fthreadingconstructs.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -287,8 +287,14 @@ A macro to execute a `for` loop in parallel. The iteration space is distributed\n coarse-grained tasks. This policy can be specified by the `schedule` argument. The\n execution of the loop waits for the evaluation of all iterations.\n \n+Tasks spawned by `@threads` are scheduled on the `:default` threadpool. This means that\n+`@threads` will not use threads from the `:interactive` threadpool, even if called from\n+the main thread or from a task in the interactive pool. The `:default` threadpool is\n+intended for compute-intensive parallel workloads.\n+\n See also: [`@spawn`](@ref Threads.@spawn) and\n `pmap` in [`Distributed`](@ref man-distributed).\n+For more information on threadpools, see the chapter on [threadpools](@ref man-threadpools).\n \n # Extended help\n "
    },
    {
      "sha": "6300633eef8fe5bf7bca74f6119302657231725c",
      "filename": "contrib/juliac/juliac-trim-base.jl",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/contrib%2Fjuliac%2Fjuliac-trim-base.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/contrib%2Fjuliac%2Fjuliac-trim-base.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/contrib%2Fjuliac%2Fjuliac-trim-base.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -77,7 +77,6 @@ end\n             print(io, T.var.name)\n         end\n     end\n-    show_type_name(io::IO, tn::Core.TypeName) = print(io, tn.name)\n \n     mapreduce(f::F, op::F2, A::AbstractArrayOrBroadcasted; dims=:, init=_InitialValue()) where {F, F2} =\n     _mapreduce_dim(f, op, init, A, dims)"
    },
    {
      "sha": "4f9dc0aff07415ff1e0fb04f143611b4dad1a407",
      "filename": "deps/blastrampoline.version",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/deps%2Fblastrampoline.version",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/deps%2Fblastrampoline.version",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Fblastrampoline.version?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -4,6 +4,6 @@\n BLASTRAMPOLINE_JLL_NAME := libblastrampoline\n \n ## source build\n-BLASTRAMPOLINE_VER := 5.13.1\n-BLASTRAMPOLINE_BRANCH=v5.13.1\n-BLASTRAMPOLINE_SHA1=f26278e83ddc9035ae7695da597f1a5b26a4c62b\n+BLASTRAMPOLINE_VER := 5.15.0\n+BLASTRAMPOLINE_BRANCH=v5.15.0\n+BLASTRAMPOLINE_SHA1=072b5f67895bec0b92f8c83194567c1c48e9833d"
    },
    {
      "sha": "faee08623f2881c95fbe3d0674a6281b0be55201",
      "filename": "deps/checksums/Pkg-69926e385c878253d62e2588a19b252277196ebf.tar.gz/md5",
      "status": "removed",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/b907bd0600f7041cce39a028cd63a1e154b42d62/deps%2Fchecksums%2FPkg-69926e385c878253d62e2588a19b252277196ebf.tar.gz%2Fmd5",
      "raw_url": "https://github.com/JuliaLang/julia/raw/b907bd0600f7041cce39a028cd63a1e154b42d62/deps%2Fchecksums%2FPkg-69926e385c878253d62e2588a19b252277196ebf.tar.gz%2Fmd5",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Fchecksums%2FPkg-69926e385c878253d62e2588a19b252277196ebf.tar.gz%2Fmd5?ref=b907bd0600f7041cce39a028cd63a1e154b42d62",
      "patch": "@@ -1 +0,0 @@\n-6e3a44c3870f135953b325a155fecd65"
    },
    {
      "sha": "e09a59d4feb836833fa98438140c051de4f5d93d",
      "filename": "deps/checksums/Pkg-69926e385c878253d62e2588a19b252277196ebf.tar.gz/sha512",
      "status": "removed",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/b907bd0600f7041cce39a028cd63a1e154b42d62/deps%2Fchecksums%2FPkg-69926e385c878253d62e2588a19b252277196ebf.tar.gz%2Fsha512",
      "raw_url": "https://github.com/JuliaLang/julia/raw/b907bd0600f7041cce39a028cd63a1e154b42d62/deps%2Fchecksums%2FPkg-69926e385c878253d62e2588a19b252277196ebf.tar.gz%2Fsha512",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Fchecksums%2FPkg-69926e385c878253d62e2588a19b252277196ebf.tar.gz%2Fsha512?ref=b907bd0600f7041cce39a028cd63a1e154b42d62",
      "patch": "@@ -1 +0,0 @@\n-565bdb1a4e8bda374d08a49b2ba70130762ca06004cc50d07ca58ca9a3741195977f563bc990bd627735b6464162a15a7bfb08570e812abf2f22151713de2210"
    },
    {
      "sha": "480f2f77c5cb88af07667e2dff42a1e29727e6f1",
      "filename": "deps/checksums/Pkg-f571edda902c848382517503665fea6aa275ceb9.tar.gz/md5",
      "status": "added",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/deps%2Fchecksums%2FPkg-f571edda902c848382517503665fea6aa275ceb9.tar.gz%2Fmd5",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/deps%2Fchecksums%2FPkg-f571edda902c848382517503665fea6aa275ceb9.tar.gz%2Fmd5",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Fchecksums%2FPkg-f571edda902c848382517503665fea6aa275ceb9.tar.gz%2Fmd5?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -0,0 +1 @@\n+1f7f4710e3216abc3109024c41051ae8"
    },
    {
      "sha": "5c3356eb58bc0c2bcedac2f1b524f3c98fe8969f",
      "filename": "deps/checksums/Pkg-f571edda902c848382517503665fea6aa275ceb9.tar.gz/sha512",
      "status": "added",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/deps%2Fchecksums%2FPkg-f571edda902c848382517503665fea6aa275ceb9.tar.gz%2Fsha512",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/deps%2Fchecksums%2FPkg-f571edda902c848382517503665fea6aa275ceb9.tar.gz%2Fsha512",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Fchecksums%2FPkg-f571edda902c848382517503665fea6aa275ceb9.tar.gz%2Fsha512?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -0,0 +1 @@\n+47286eb6d32836b34524833e0461dabc2e25fd917f2cf552242c6807da1cb2b637c60a2e3b40e457bc5296ae932ba4432ec2c5647dc1861407031f74bdb674fc"
    },
    {
      "sha": "d4c42a32024f9f27ccc79afa21ebed1375c0b3e6",
      "filename": "deps/checksums/blastrampoline",
      "status": "modified",
      "additions": 38,
      "deletions": 38,
      "changes": 76,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/deps%2Fchecksums%2Fblastrampoline",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/deps%2Fchecksums%2Fblastrampoline",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Fchecksums%2Fblastrampoline?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1,38 +1,38 @@\n-blastrampoline-f26278e83ddc9035ae7695da597f1a5b26a4c62b.tar.gz/md5/855b7723a6e9eb8885876eb675d48329\n-blastrampoline-f26278e83ddc9035ae7695da597f1a5b26a4c62b.tar.gz/sha512/29cbd060c8f5eb17ef486d0a10ee4b221eeceec3a2ab0f9f98f60880f3d19a2247d93ac0dc0d32ec568ef876acd30f6c0642aaf704757580c2e17884e425607f\n-libblastrampoline.v5.13.1+1.aarch64-apple-darwin.tar.gz/md5/d8dc0f092f86b379b2fb9da97382be70\n-libblastrampoline.v5.13.1+1.aarch64-apple-darwin.tar.gz/sha512/d9fc0439565afaabe53f56f64c20aeddb846c991dafeafdef6c2369bd7a359c1a6b49cdf8d63eaae2730a336509854b5c306e630eb520445712efc4e41c0263e\n-libblastrampoline.v5.13.1+1.aarch64-linux-gnu.tar.gz/md5/c181e51a6ca4cde0da3d036d561e24dc\n-libblastrampoline.v5.13.1+1.aarch64-linux-gnu.tar.gz/sha512/fe4a86bb4c94ef86c2307adad528bb58d0508a33c194c64190fffe7902f5b915592567d9e0cc35414633c5ab9067def2fa20cf669a2f4309265744180a5ec51a\n-libblastrampoline.v5.13.1+1.aarch64-linux-musl.tar.gz/md5/6f9eb8d73a0e61f3a2b97dba7105086e\n-libblastrampoline.v5.13.1+1.aarch64-linux-musl.tar.gz/sha512/9c3db080155729a91b5dd47df91d3852539aefc331d4dc51167fccaf3b01e601b36911ec259c53e211fe192c108e839a1f14b837009fa4f7d88ed82d658f80ff\n-libblastrampoline.v5.13.1+1.aarch64-unknown-freebsd.tar.gz/md5/68f65db9da9938929d510eea3540335b\n-libblastrampoline.v5.13.1+1.aarch64-unknown-freebsd.tar.gz/sha512/2fc7b375a751f3bb201504e0417828602fe014a2c8626137779c09ca7264ac6d39d44db0d1d32e0dc506284f56b49e23791922b0cc1237021473fb505fbf06bd\n-libblastrampoline.v5.13.1+1.armv6l-linux-gnueabihf.tar.gz/md5/a377fa4e5751fbeb3c42f319cb6341de\n-libblastrampoline.v5.13.1+1.armv6l-linux-gnueabihf.tar.gz/sha512/9ddb1e2f4daab45d65b66dafc00df6ca7f788cb919cd6699c4aa0deca3e99a86d9ced10c3741610a6e480093d483e8a02c1d9165f91a7179632c1e2ae1abcfb7\n-libblastrampoline.v5.13.1+1.armv6l-linux-musleabihf.tar.gz/md5/42c841baa05f80f17ea1b1d4f3405bef\n-libblastrampoline.v5.13.1+1.armv6l-linux-musleabihf.tar.gz/sha512/0c3ed42bd48f8f1ee9b1dc18faa7afa6e2fb27cffc59b9a420e29b5e6cdf8fb3bde36b82f3086075f8f7f329614aeb91ca5f173b1683e30e9530076f341ea2e0\n-libblastrampoline.v5.13.1+1.armv7l-linux-gnueabihf.tar.gz/md5/61e515ec1223c99705175a26e6fbaf87\n-libblastrampoline.v5.13.1+1.armv7l-linux-gnueabihf.tar.gz/sha512/92260dcc563ece74719f21921a7cb51266884ed01b50c97fa997b4a98737e900ec9eaa8012d2c4c67ab479c4080bd1cf2708612eaaaddbba28e4f9147f3708ea\n-libblastrampoline.v5.13.1+1.armv7l-linux-musleabihf.tar.gz/md5/d45816d705dd46572d85105567bc060e\n-libblastrampoline.v5.13.1+1.armv7l-linux-musleabihf.tar.gz/sha512/45cba07050b818cd85c67acdfc29515e1fe416eb4e0c219171f2c0c026f7412903c3a9367d48258259a16e89f36c1e8f9fa054e455759720f1c6c5e8e27be476\n-libblastrampoline.v5.13.1+1.i686-linux-gnu.tar.gz/md5/c8d3fd5f314353133934396361857c92\n-libblastrampoline.v5.13.1+1.i686-linux-gnu.tar.gz/sha512/a949b3c0655ad9d6f8d53fd8a3f0b4ab504046e49a373039defc94e832b7faf90c77520f3912c4d6db8b0829951d85b4fc2a4021b3d8bb2c399d1ad04ce77ab0\n-libblastrampoline.v5.13.1+1.i686-linux-musl.tar.gz/md5/a7bbd2233366d180ce8aa61fd3568c11\n-libblastrampoline.v5.13.1+1.i686-linux-musl.tar.gz/sha512/e78cbef5b3bcfa93a86e14eebf0d704a94ac7b1f5c7030706d1f4a960de888c42e3daddb65395c7102e08dfd444efbfb40273e58a5f1de199d44ad55fd3ae658\n-libblastrampoline.v5.13.1+1.i686-w64-mingw32.tar.gz/md5/35bf0e9d253d3bbd188c1feba5635e1d\n-libblastrampoline.v5.13.1+1.i686-w64-mingw32.tar.gz/sha512/6b28e83265b6bd7337ccf7784c74f0490fcf5089bb9c21e2333dace8801f94f09b46ef683d2bd4f2c885b64a26ec4e8755bab21a6e81098e287c15de27d66293\n-libblastrampoline.v5.13.1+1.powerpc64le-linux-gnu.tar.gz/md5/8be947c20f7d35ec22247f9a11ccce43\n-libblastrampoline.v5.13.1+1.powerpc64le-linux-gnu.tar.gz/sha512/56f4246f96d2f49b03f5e5f3b996660a48d50b3784f89df7cd1dc52bab6efea0c120a65015040041a51d18fc6f361f89486f77317d771fbf588a1ba7565d77a2\n-libblastrampoline.v5.13.1+1.riscv64-linux-gnu.tar.gz/md5/85e1f70a3235097158b4884a58a58154\n-libblastrampoline.v5.13.1+1.riscv64-linux-gnu.tar.gz/sha512/11f1f5c2a409dbdab11d6bc968610b5700e9b0cb95094e348fe43ddca5586eda47bda1c382fb1f4b5a15aa741a6fc2b31f58f9b08bfe46631b5471e864bc009b\n-libblastrampoline.v5.13.1+1.x86_64-apple-darwin.tar.gz/md5/c6756ca8b6778ce2a4a440f63355c32e\n-libblastrampoline.v5.13.1+1.x86_64-apple-darwin.tar.gz/sha512/895d9bba75a9a0861809dca48b3dae7b5ffc5d866a518729ffd52f70fa1742a41a4b8b4e03bb354cba12d9ad11a33f3f112fa69a30ab3f945a9dede0d59d92b3\n-libblastrampoline.v5.13.1+1.x86_64-linux-gnu.tar.gz/md5/1326a406aa98b6045f7459d7fb237894\n-libblastrampoline.v5.13.1+1.x86_64-linux-gnu.tar.gz/sha512/4965baa1de5532425ea57b8100e369cf44b55963340cd144c0359f845560f27a1bea1597e4c72ec541917f71aaff8a4863f47d01a095c2e761a68212bfb08d1e\n-libblastrampoline.v5.13.1+1.x86_64-linux-musl.tar.gz/md5/5103983b7fecc7b87f495cd3b6c4d7a5\n-libblastrampoline.v5.13.1+1.x86_64-linux-musl.tar.gz/sha512/f3243d84a0a0a191abad9e3850c37be78892eb5905b63b47bfb3e5a4148e0dae672ee72d311c5c764ad0fffe57d39c10dfd2086466efd76b5030118941d36a00\n-libblastrampoline.v5.13.1+1.x86_64-unknown-freebsd.tar.gz/md5/a001ecd07b5178ce724a4f78996dc43e\n-libblastrampoline.v5.13.1+1.x86_64-unknown-freebsd.tar.gz/sha512/508866d54a9a49df2ef7eaa5d807173016c6dfaec59c4c89d5b37cd3faa7384302d2d4d39aca1975d79a948414657b7ec048a3ebdf6bf5c938037aa89303013a\n-libblastrampoline.v5.13.1+1.x86_64-w64-mingw32.tar.gz/md5/b7c51c8e1a11accc5c5097042da646d9\n-libblastrampoline.v5.13.1+1.x86_64-w64-mingw32.tar.gz/sha512/24bc32f0dabc886898ca0e5fd2b3d7250fc67f7bd962ec2aae8c946f405826967a8b8623e524bf22c201bc7e6c55d16c4a5fb2a2250cbbefaf73e383fc080aba\n+blastrampoline-072b5f67895bec0b92f8c83194567c1c48e9833d.tar.gz/md5/aa445967f00e19fef56c7072c72a6832\n+blastrampoline-072b5f67895bec0b92f8c83194567c1c48e9833d.tar.gz/sha512/3185a39b553c9cb9f6171755462f52f1d164ec3d7ad83274cb4557e6cf5d6cef3bd7447f85c27ebcb3b1c76da0a547f978099bd554688bc769dd8ded654a2ad2\n+libblastrampoline.v5.15.0+0.aarch64-apple-darwin.tar.gz/md5/d816e41ff36472e67d9d815f8db5b75d\n+libblastrampoline.v5.15.0+0.aarch64-apple-darwin.tar.gz/sha512/b4c844f6f7f4d917629fb27dcaabb70f46f362b2fc0b4686df56c39e46251328ee323d01e09609988ebfa76d123eac033641fae14f4a48bfbe4b20b77ef745a9\n+libblastrampoline.v5.15.0+0.aarch64-linux-gnu.tar.gz/md5/375e826ab5bdaf34b71c61eafc9deac8\n+libblastrampoline.v5.15.0+0.aarch64-linux-gnu.tar.gz/sha512/2f8503aea3454136800f51fd3edf3b26efd1bab194d33fc9a302b00cff00b237462bd2a9409016656ac8e9904244004f4725d3388f29da4512b962f018af0609\n+libblastrampoline.v5.15.0+0.aarch64-linux-musl.tar.gz/md5/f1c90626a26885bac905ad6ed9c26b46\n+libblastrampoline.v5.15.0+0.aarch64-linux-musl.tar.gz/sha512/0cd900176f4b5e628b54fdfb4f9504fb6b352f92b97a1b3cb102343c94ffddb37b564a5d682d36631af3b03f6b4a49ad7e33f473f8450d95f74e3f986f39b780\n+libblastrampoline.v5.15.0+0.aarch64-unknown-freebsd.tar.gz/md5/b9025566d8ba21fa10f55065bd9e3795\n+libblastrampoline.v5.15.0+0.aarch64-unknown-freebsd.tar.gz/sha512/97ef1dd8116c4fc89cfa35d8f8674885e3b425d30cd45ab727ae98cf5f9b2b481352217bf2a01e6d3e0f5a95700c1771c15db4dcd73312c6d3286895c04c6f6b\n+libblastrampoline.v5.15.0+0.armv6l-linux-gnueabihf.tar.gz/md5/24e043853904f395436db5045add7e2c\n+libblastrampoline.v5.15.0+0.armv6l-linux-gnueabihf.tar.gz/sha512/8948720cc3cf46ec0c7489ea90e8defd24eaebaaf0c9a98a0de13bdfffdd732311f1e1608078573a30e3170ad543eb0caf31a500255827482af526957bccacbb\n+libblastrampoline.v5.15.0+0.armv6l-linux-musleabihf.tar.gz/md5/3cbbb1c09d1731e9dd29dd9350110aae\n+libblastrampoline.v5.15.0+0.armv6l-linux-musleabihf.tar.gz/sha512/f1806cb4a1b59a78027291ca01481f2d6acf74340c3bc9534af93c3874aa6774dd4c6b5cf7b1bf98b028602d74b9301b0250fad9d2c2e0e02188c604f63e1559\n+libblastrampoline.v5.15.0+0.armv7l-linux-gnueabihf.tar.gz/md5/da36360de121353b213c488158c264ed\n+libblastrampoline.v5.15.0+0.armv7l-linux-gnueabihf.tar.gz/sha512/25883ac30da9a14816e295545a7f8135c20adc3e2e3ab7b374a8796bcfef31b57ab1bc8f4788aef53e2f02d2b795ee89181f143b30132a8af531f019a0219a72\n+libblastrampoline.v5.15.0+0.armv7l-linux-musleabihf.tar.gz/md5/7062e23f7549d790cb2c6ff5ef96aff6\n+libblastrampoline.v5.15.0+0.armv7l-linux-musleabihf.tar.gz/sha512/06f3da585d720801c840ded52cb29b25364e892b1c1b895ee49a37bde721063757da0f7da4336c9dd518b6269f3c47b2b109d6d37d0a578d805fffe814c239f1\n+libblastrampoline.v5.15.0+0.i686-linux-gnu.tar.gz/md5/fe7d22677ec883261429c0201210e35c\n+libblastrampoline.v5.15.0+0.i686-linux-gnu.tar.gz/sha512/b99713ae9a00bffdca3001a1a8a84b99e1b3194a755d1a52eb7a73cd8d0571adfb8746b182cb62b3a3e8f7584ae49ece89d503af032b0485b3e6e832bd17de83\n+libblastrampoline.v5.15.0+0.i686-linux-musl.tar.gz/md5/3a54aba695352019a507a44d49d4b73a\n+libblastrampoline.v5.15.0+0.i686-linux-musl.tar.gz/sha512/9a3baeb75551ec14b58eb370730a50bd0023aa63610d47e492d08dd4d54ff8afca4b8c9b34501ba5eaf2dab02922b88cfeb6ea9383b58783337999eb966f2f0e\n+libblastrampoline.v5.15.0+0.i686-w64-mingw32.tar.gz/md5/f8424745959e7bce3a804ccee41b30bf\n+libblastrampoline.v5.15.0+0.i686-w64-mingw32.tar.gz/sha512/1b0e877098e666a0ffa7d057f60a1063d710d598ee8a53094815237d98119f5101c4e643fce7190ce22ce3787249920ab7dc6ff2dc1e3088cd95779b19e17bf7\n+libblastrampoline.v5.15.0+0.powerpc64le-linux-gnu.tar.gz/md5/927bb0e1a4b5e3ceb225bd8c0f75ec77\n+libblastrampoline.v5.15.0+0.powerpc64le-linux-gnu.tar.gz/sha512/a414a84fb45d2666dfd72cd9d6e013481e95c8d6d7cae40939bef779c14fe50d0a8473ddeb7d6060fcc8c4531cd34bd06ff6bbc7a44a6b106b8d0e2c8d62bdbd\n+libblastrampoline.v5.15.0+0.riscv64-linux-gnu.tar.gz/md5/3369a45ed2b52482ca2a83ddb515e08b\n+libblastrampoline.v5.15.0+0.riscv64-linux-gnu.tar.gz/sha512/68ceb3dea1ebb1689892f05b6c7ab5a088b5249cab5a70bba8164d6290b74634deaa9aa3cfa5c84de836313ac0569542280a48623f95b3744746b2f8984c1d37\n+libblastrampoline.v5.15.0+0.x86_64-apple-darwin.tar.gz/md5/07e63e6ef01f2bde3f80b724170991fb\n+libblastrampoline.v5.15.0+0.x86_64-apple-darwin.tar.gz/sha512/361689ede0771148e353a4b911fef76839754ddf8f735a60d597b8c523569e206b5daede3885e3ec1302e9e4ca5488b6ea203bd3ed384ccd607934d813b27ba7\n+libblastrampoline.v5.15.0+0.x86_64-linux-gnu.tar.gz/md5/e7bcbd90bb3f7d4f197269b3f64cfc4c\n+libblastrampoline.v5.15.0+0.x86_64-linux-gnu.tar.gz/sha512/5a55c9b10460bf9472c18fc381cf941d10443b9a089c7e774b4e9456c11a100dd61788c9c5139f77504f0b0bce7e4567b1e002386c402695c968632280b4d316\n+libblastrampoline.v5.15.0+0.x86_64-linux-musl.tar.gz/md5/bb8bacb2748137adfb0aa83834bc72d0\n+libblastrampoline.v5.15.0+0.x86_64-linux-musl.tar.gz/sha512/5d683868e377d2aee34fb2699f8c3733714d2c7cf0ac7ddb1d35a78460015d784b9e00f8d30e8bc6ee570a47de6baaa7f7efd90790588cc2953cd19897c56a92\n+libblastrampoline.v5.15.0+0.x86_64-unknown-freebsd.tar.gz/md5/60e6833b6e7656db680032c0d1b5d5b7\n+libblastrampoline.v5.15.0+0.x86_64-unknown-freebsd.tar.gz/sha512/ca155fcc0b66889fe608291738e5e4c8506d28c42e03a948e4e56d441949be1d1dcbd201ba0f2536c862da3d8fdf7c7ee77a9b0b715dc1b9893767510ff0ffb9\n+libblastrampoline.v5.15.0+0.x86_64-w64-mingw32.tar.gz/md5/950ec7ca747e8f13cfb7bd1967af5db6\n+libblastrampoline.v5.15.0+0.x86_64-w64-mingw32.tar.gz/sha512/6dbcde726cf3b1e2ecc91913b3ff954881706381fcd97907173fd8c21aff6708a9f6998f510356c7f284f826ee67264509831752399efe7163a4baaeb071c3c8"
    },
    {
      "sha": "9b17518d328828e66e19c00824b6805a86bfa307",
      "filename": "doc/src/manual/code-loading.md",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/doc%2Fsrc%2Fmanual%2Fcode-loading.md",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/doc%2Fsrc%2Fmanual%2Fcode-loading.md",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/doc%2Fsrc%2Fmanual%2Fcode-loading.md?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -42,6 +42,9 @@ These environment each serve a different purpose:\n * Package directories provide **convenience** when a full carefully-tracked project environment is unnecessary. They are useful when you want to put a set of packages somewhere and be able to directly use them, without needing to create a project environment for them.\n * Stacked environments allow for **adding** tools to the primary environment. You can push an environment of development tools onto the end of the stack to make them available from the REPL and scripts, but not from inside packages.\n \n+!!! note\n+    When loading a package from another environment in the stack other than the active environment the package is loaded in the context of the active environment. This means that the package will be loaded as if it were imported in the active environment, which may affect how its dependencies versions are resolved. When such a package is precompiling it will be marked as a `(serial)` precompile job, which means that its dependencies will be precompiled in series within the same job, which will likely be slower.\n+\n At a high-level, each environment conceptually defines three maps: roots, graph and paths. When resolving the meaning of `import X`, the roots and graph maps are used to determine the identity of `X`, while the paths map is used to locate the source code of `X`. The specific roles of the three maps are:\n \n - **roots:** `name::Symbol` \u27f6 `uuid::UUID`"
    },
    {
      "sha": "6009bd435534c6ec292f093120db3ef41e475bc9",
      "filename": "src/aotcompile.cpp",
      "status": "modified",
      "additions": 0,
      "deletions": 8,
      "changes": 8,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Faotcompile.cpp",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Faotcompile.cpp",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Faotcompile.cpp?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1083,7 +1083,6 @@ static FunctionInfo getFunctionWeight(const Function &F)\n }\n \n struct ModuleInfo {\n-    Triple triple;\n     size_t globals;\n     size_t funcs;\n     size_t bbs;\n@@ -1094,7 +1093,6 @@ struct ModuleInfo {\n \n ModuleInfo compute_module_info(Module &M) {\n     ModuleInfo info;\n-    info.triple = Triple(M.getTargetTriple());\n     info.globals = 0;\n     info.funcs = 0;\n     info.bbs = 0;\n@@ -1895,12 +1893,6 @@ static unsigned compute_image_thread_count(const ModuleInfo &info) {\n #endif\n     if (jl_is_timing_passes) // LLVM isn't thread safe when timing the passes https://github.com/llvm/llvm-project/issues/44417\n         return 1;\n-    // COFF has limits on external symbols (even hidden) up to 65536. We reserve the last few\n-    // for any of our other symbols that we insert during compilation.\n-    if (info.triple.isOSBinFormatCOFF() && info.globals > 64000) {\n-        LLVM_DEBUG(dbgs() << \"COFF is restricted to a single thread for large images\\n\");\n-        return 1;\n-    }\n     // This is not overridable because empty modules do occasionally appear, but they'll be very small and thus exit early to\n     // known easy behavior. Plus they really don't warrant multiple threads\n     if (info.weight < 1000) {"
    },
    {
      "sha": "8f0644c0cff7f296004219867f85fbe4a2d47c64",
      "filename": "src/codegen.cpp",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fcodegen.cpp",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fcodegen.cpp",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fcodegen.cpp?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -3251,8 +3251,7 @@ static jl_cgval_t emit_globalop(jl_codectx_t &ctx, jl_module_t *mod, jl_sym_t *s\n             if (ty != nullptr) {\n                 const std::string fname = issetglobal ? \"setglobal!\" : isreplaceglobal ? \"replaceglobal!\" : isswapglobal ? \"swapglobal!\" : ismodifyglobal ? \"modifyglobal!\" : \"setglobalonce!\";\n                 if (!ismodifyglobal) {\n-                    // TODO: use typeassert in jl_check_binding_assign_value too\n-                    emit_typecheck(ctx, rval, ty, \"typeassert\");\n+                    emit_typecheck(ctx, rval, ty, fname.c_str());\n                     rval = update_julia_type(ctx, rval, ty);\n                     if (rval.typ == jl_bottom_type)\n                         return jl_cgval_t();"
    },
    {
      "sha": "4cf2c6d780bbdd2ee8dd02ff0a0890e88d888901",
      "filename": "src/datatype.c",
      "status": "modified",
      "additions": 6,
      "deletions": 7,
      "changes": 13,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fdatatype.c",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fdatatype.c",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fdatatype.c?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1981,11 +1981,11 @@ jl_value_t *swap_nth_field(jl_datatype_t *st, jl_value_t *v, size_t i, jl_value_\n     }\n }\n \n-inline jl_value_t *modify_value(jl_value_t *ty, _Atomic(jl_value_t*) *p, jl_value_t *parent, jl_value_t *op, jl_value_t *rhs, int isatomic, jl_module_t *mod, jl_sym_t *name)\n+inline jl_value_t *modify_value(jl_value_t *ty, _Atomic(jl_value_t*) *p, jl_value_t *parent, jl_value_t *op, jl_value_t *rhs, int isatomic, jl_binding_t *b, jl_module_t *mod, jl_sym_t *name)\n {\n     jl_value_t *r = isatomic ? jl_atomic_load(p) : jl_atomic_load_relaxed(p);\n     if (__unlikely(r == NULL)) {\n-        if (mod && name)\n+        if (b)\n             jl_undefined_var_error(name, (jl_value_t*)mod);\n         jl_throw(jl_undefref_exception);\n     }\n@@ -1996,11 +1996,10 @@ inline jl_value_t *modify_value(jl_value_t *ty, _Atomic(jl_value_t*) *p, jl_valu\n         args[1] = rhs;\n         jl_value_t *y = jl_apply_generic(op, args, 2);\n         args[1] = y;\n-        if (!jl_isa(y, ty)) {\n-            if (mod && name)\n-                jl_errorf(\"cannot assign an incompatible value to the global %s.%s.\", jl_symbol_name(mod->name), jl_symbol_name(name));\n+        if (b)\n+            jl_check_binding_assign_value(b, mod, name, y, \"modifyglobal!\");\n+        else if (!jl_isa(y, ty))\n             jl_type_error(jl_is_genericmemory(parent) ? \"memoryrefmodify!\" : \"modifyfield!\", ty, y);\n-        }\n         if (isatomic ? jl_atomic_cmpswap(p, &r, y) : jl_atomic_cmpswap_release(p, &r, y)) {\n             jl_gc_wb(parent, y);\n             break;\n@@ -2114,7 +2113,7 @@ jl_value_t *modify_nth_field(jl_datatype_t *st, jl_value_t *v, size_t i, jl_valu\n     jl_value_t *ty = jl_field_type_concrete(st, i);\n     char *p = (char*)v + offs;\n     if (jl_field_isptr(st, i)) {\n-        return modify_value(ty, (_Atomic(jl_value_t*)*)p, v, op, rhs, isatomic, NULL, NULL);\n+        return modify_value(ty, (_Atomic(jl_value_t*)*)p, v, op, rhs, isatomic, NULL, NULL, NULL);\n     }\n     else {\n         uint8_t *psel = jl_is_uniontype(ty) ? (uint8_t*)&p[jl_field_size(st, i) - 1] : NULL;"
    },
    {
      "sha": "32adc1add3d06b958e2180b68f889dec34e135a4",
      "filename": "src/genericmemory.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fgenericmemory.c",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fgenericmemory.c",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fgenericmemory.c?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -543,7 +543,7 @@ JL_DLLEXPORT jl_value_t *jl_memoryrefmodify(jl_genericmemoryref_t m, jl_value_t\n     char *data = (char*)m.ptr_or_offset;\n     if (layout->flags.arrayelem_isboxed) {\n         assert(data - (char*)m.mem->ptr < sizeof(jl_value_t*) * m.mem->length);\n-        return modify_value(eltype, (_Atomic(jl_value_t*)*)data, owner, op, rhs, isatomic, NULL, NULL);\n+        return modify_value(eltype, (_Atomic(jl_value_t*)*)data, owner, op, rhs, isatomic, NULL, NULL, NULL);\n     }\n     size_t fsz = layout->size;\n     uint8_t *psel = NULL;"
    },
    {
      "sha": "47db5474701ac90734f49e119e558c95e44888b5",
      "filename": "src/gf.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fgf.c",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fgf.c",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fgf.c?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -3683,7 +3683,7 @@ JL_DLLEXPORT jl_value_t *jl_normalize_to_compilable_sig(jl_tupletype_t *ti, jl_s\n jl_method_instance_t *jl_normalize_to_compilable_mi(jl_method_instance_t *mi JL_PROPAGATES_ROOT)\n {\n     jl_method_t *def = mi->def.method;\n-    if (!jl_is_method(def) || !jl_is_datatype(mi->specTypes))\n+    if (!jl_is_method(def) || !jl_is_datatype(mi->specTypes) || def->is_for_opaque_closure)\n         return mi;\n     jl_value_t *compilationsig = jl_normalize_to_compilable_sig((jl_datatype_t*)mi->specTypes, mi->sparam_vals, def, 1);\n     if (compilationsig == jl_nothing || jl_egal(compilationsig, mi->specTypes))"
    },
    {
      "sha": "aad8105b34308ad901e92fa9b389facec9dbfcf8",
      "filename": "src/julia-syntax.scm",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fjulia-syntax.scm",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fjulia-syntax.scm",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fjulia-syntax.scm?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1895,7 +1895,7 @@\n                    ,(expand-update-operator op op= (car e) rhs T))))\n         (else\n          (if (and (pair? lhs) (eq? op= '=)\n-                  (not (memq (car lhs) '(|.| tuple vcat ncat typed_hcat typed_vcat typed_ncat))))\n+                  (not (memq (car lhs) '(|.| globalref tuple vcat ncat typed_hcat typed_vcat typed_ncat))))\n              (error (string \"invalid assignment location \\\"\" (deparse lhs) \"\\\"\")))\n          (expand-update-operator- op op= lhs rhs declT))))\n \n@@ -5032,6 +5032,7 @@ f(x) = yt(x)\n              (check-top-level e)\n              (let ((val (make-ssavalue)))\n                (emit `(= ,val ,e))\n+               (emit `(latestworld))\n                (if tail (emit-return tail val))\n                val))\n "
    },
    {
      "sha": "7cda8fd456f7412c739c01564866f4b437b4d449",
      "filename": "src/julia.h",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fjulia.h",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fjulia.h",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fjulia.h?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -2121,7 +2121,7 @@ JL_DLLEXPORT jl_value_t *jl_get_module_binding_or_nothing(jl_module_t *m, jl_sym\n \n // get binding for reading\n JL_DLLEXPORT jl_binding_t *jl_get_binding(jl_module_t *m JL_PROPAGATES_ROOT, jl_sym_t *var);\n-JL_DLLEXPORT jl_value_t *jl_module_globalref(jl_module_t *m, jl_sym_t *var);\n+JL_DLLEXPORT jl_value_t *jl_module_globalref(jl_module_t *m, jl_sym_t *var) JL_GLOBALLY_ROOTED;\n JL_DLLEXPORT jl_value_t *jl_get_binding_type(jl_module_t *m, jl_sym_t *var);\n // get binding for assignment\n JL_DLLEXPORT void jl_check_binding_currently_writable(jl_binding_t *b, jl_module_t *m, jl_sym_t *s);\n@@ -2197,6 +2197,10 @@ JL_DLLEXPORT void JL_NORETURN jl_type_error_rt(const char *fname,\n                                                const char *context,\n                                                jl_value_t *ty JL_MAYBE_UNROOTED,\n                                                jl_value_t *got JL_MAYBE_UNROOTED);\n+JL_DLLEXPORT void JL_NORETURN jl_type_error_global(const char *fname,\n+                                               jl_module_t *mod, jl_sym_t *sym,\n+                                               jl_value_t *ty JL_MAYBE_UNROOTED,\n+                                               jl_value_t *got JL_MAYBE_UNROOTED);\n JL_DLLEXPORT void JL_NORETURN jl_undefined_var_error(jl_sym_t *var, jl_value_t *scope JL_MAYBE_UNROOTED);\n JL_DLLEXPORT void JL_NORETURN jl_has_no_field_error(jl_datatype_t *t, jl_sym_t *var);\n JL_DLLEXPORT void JL_NORETURN jl_argument_error(char *str);"
    },
    {
      "sha": "c9e1b0e204df67d3755989b82a392ed83068d34b",
      "filename": "src/julia_internal.h",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fjulia_internal.h",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fjulia_internal.h",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fjulia_internal.h?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -851,7 +851,7 @@ int set_nth_fieldonce(jl_datatype_t *st, jl_value_t *v, size_t i, jl_value_t *rh\n jl_value_t *swap_bits(jl_value_t *ty, char *v, uint8_t *psel, jl_value_t *parent, jl_value_t *rhs, enum atomic_kind isatomic);\n jl_value_t *replace_value(jl_value_t *ty, _Atomic(jl_value_t*) *p, jl_value_t *parent, jl_value_t *expected, jl_value_t *rhs, int isatomic, jl_module_t *mod, jl_sym_t *name);\n jl_value_t *replace_bits(jl_value_t *ty, char *p, uint8_t *psel, jl_value_t *parent, jl_value_t *expected, jl_value_t *rhs, enum atomic_kind isatomic);\n-jl_value_t *modify_value(jl_value_t *ty, _Atomic(jl_value_t*) *p, jl_value_t *parent, jl_value_t *op, jl_value_t *rhs, int isatomic, jl_module_t *mod, jl_sym_t *name);\n+jl_value_t *modify_value(jl_value_t *ty, _Atomic(jl_value_t*) *p, jl_value_t *parent, jl_value_t *op, jl_value_t *rhs, int isatomic, jl_binding_t *b, jl_module_t *mod, jl_sym_t *name);\n jl_value_t *modify_bits(jl_value_t *ty, char *p, uint8_t *psel, jl_value_t *parent, jl_value_t *op, jl_value_t *rhs, enum atomic_kind isatomic);\n int setonce_bits(jl_datatype_t *rty, char *p, jl_value_t *owner, jl_value_t *rhs, enum atomic_kind isatomic);\n jl_expr_t *jl_exprn(jl_sym_t *head, size_t n);\n@@ -865,6 +865,7 @@ JL_DLLEXPORT int jl_datatype_isinlinealloc(jl_datatype_t *ty, int pointerfree);\n int jl_type_equality_is_identity(jl_value_t *t1, jl_value_t *t2) JL_NOTSAFEPOINT;\n \n JL_DLLEXPORT void jl_eval_const_decl(jl_module_t *m, jl_value_t *arg, jl_value_t *val);\n+jl_value_t *jl_check_binding_assign_value(jl_binding_t *b JL_PROPAGATES_ROOT, jl_module_t *mod, jl_sym_t *var, jl_value_t *rhs JL_MAYBE_UNROOTED, const char *msg);\n void jl_binding_set_type(jl_binding_t *b, jl_module_t *mod, jl_sym_t *sym, jl_value_t *ty);\n void jl_eval_global_expr(jl_module_t *m, jl_expr_t *ex, int set_type);\n JL_DLLEXPORT void jl_declare_global(jl_module_t *m, jl_value_t *arg, jl_value_t *set_type, int strong);\n@@ -1500,6 +1501,7 @@ JL_DLLEXPORT void jl_raise_debugger(void) JL_NOTSAFEPOINT;\n JL_DLLEXPORT void jl_gdblookup(void* ip) JL_NOTSAFEPOINT;\n void jl_print_native_codeloc(uintptr_t ip) JL_NOTSAFEPOINT;\n void jl_print_bt_entry_codeloc(jl_bt_element_t *bt_data) JL_NOTSAFEPOINT;\n+JL_DLLEXPORT void jl_print_task_backtraces(int show_done) JL_NOTSAFEPOINT;\n #ifdef _OS_WINDOWS_\n JL_DLLEXPORT void jl_refresh_dbg_module_list(void);\n #endif"
    },
    {
      "sha": "60d2652ddfaaad44ae13e33b808c25c8c7262a76",
      "filename": "src/module.c",
      "status": "modified",
      "additions": 8,
      "deletions": 10,
      "changes": 18,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fmodule.c",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fmodule.c",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fmodule.c?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1877,34 +1877,32 @@ void jl_binding_deprecation_warning(jl_binding_t *b)\n \n // For a generally writable binding (checked using jl_check_binding_currently_writable in this world age), check whether\n // we can actually write the value `rhs` to it.\n-jl_value_t *jl_check_binding_assign_value(jl_binding_t *b JL_PROPAGATES_ROOT, jl_module_t *mod, jl_sym_t *var, jl_value_t *rhs JL_MAYBE_UNROOTED)\n+jl_value_t *jl_check_binding_assign_value(jl_binding_t *b JL_PROPAGATES_ROOT, jl_module_t *mod, jl_sym_t *var, jl_value_t *rhs JL_MAYBE_UNROOTED, const char *msg)\n {\n     JL_GC_PUSH1(&rhs); // callee-rooted\n     jl_binding_partition_t *bpart = jl_get_binding_partition(b, jl_current_task->world_age);\n     enum jl_partition_kind kind = jl_binding_kind(bpart);\n     assert(kind == PARTITION_KIND_DECLARED || kind == PARTITION_KIND_GLOBAL);\n     jl_value_t *old_ty = kind == PARTITION_KIND_DECLARED ? (jl_value_t*)jl_any_type : bpart->restriction;\n     JL_GC_PROMISE_ROOTED(old_ty);\n-    if (old_ty != (jl_value_t*)jl_any_type && jl_typeof(rhs) != old_ty) {\n-        if (!jl_isa(rhs, old_ty))\n-            jl_errorf(\"cannot assign an incompatible value to the global %s.%s.\",\n-                        jl_symbol_name(mod->name), jl_symbol_name(var));\n+    if (old_ty != (jl_value_t*)jl_any_type && jl_typeof(rhs) != old_ty && !jl_isa(rhs, old_ty)) {\n+        jl_type_error_global(msg, mod, var, old_ty, rhs);\n     }\n     JL_GC_POP();\n     return old_ty;\n }\n \n JL_DLLEXPORT void jl_checked_assignment(jl_binding_t *b, jl_module_t *mod, jl_sym_t *var, jl_value_t *rhs)\n {\n-    if (jl_check_binding_assign_value(b, mod, var, rhs) != NULL) {\n+    if (jl_check_binding_assign_value(b, mod, var, rhs, \"setglobal!\") != NULL) {\n         jl_atomic_store_release(&b->value, rhs);\n         jl_gc_wb(b, rhs);\n     }\n }\n \n JL_DLLEXPORT jl_value_t *jl_checked_swap(jl_binding_t *b, jl_module_t *mod, jl_sym_t *var, jl_value_t *rhs)\n {\n-    jl_check_binding_assign_value(b, mod, var, rhs);\n+    jl_check_binding_assign_value(b, mod, var, rhs, \"swapglobal!\");\n     jl_value_t *old = jl_atomic_exchange(&b->value, rhs);\n     jl_gc_wb(b, rhs);\n     if (__unlikely(old == NULL))\n@@ -1914,7 +1912,7 @@ JL_DLLEXPORT jl_value_t *jl_checked_swap(jl_binding_t *b, jl_module_t *mod, jl_s\n \n JL_DLLEXPORT jl_value_t *jl_checked_replace(jl_binding_t *b, jl_module_t *mod, jl_sym_t *var, jl_value_t *expected, jl_value_t *rhs)\n {\n-    jl_value_t *ty = jl_check_binding_assign_value(b, mod, var, rhs);\n+    jl_value_t *ty = jl_check_binding_assign_value(b, mod, var, rhs, \"replaceglobal!\");\n     return replace_value(ty, &b->value, (jl_value_t*)b, expected, rhs, 1, mod, var);\n }\n \n@@ -1928,12 +1926,12 @@ JL_DLLEXPORT jl_value_t *jl_checked_modify(jl_binding_t *b, jl_module_t *mod, jl\n                   jl_symbol_name(mod->name), jl_symbol_name(var));\n     jl_value_t *ty = bpart->restriction;\n     JL_GC_PROMISE_ROOTED(ty);\n-    return modify_value(ty, &b->value, (jl_value_t*)b, op, rhs, 1, mod, var);\n+    return modify_value(ty, &b->value, (jl_value_t*)b, op, rhs, 1, b, mod, var);\n }\n \n JL_DLLEXPORT jl_value_t *jl_checked_assignonce(jl_binding_t *b, jl_module_t *mod, jl_sym_t *var, jl_value_t *rhs )\n {\n-    jl_check_binding_assign_value(b, mod, var, rhs);\n+    jl_check_binding_assign_value(b, mod, var, rhs, \"setglobalonce!\");\n     jl_value_t *old = NULL;\n     if (jl_atomic_cmpswap(&b->value, &old, rhs))\n         jl_gc_wb(b, rhs);"
    },
    {
      "sha": "6d4a375017bf26f9c15ead2bc9cb35fb1bad4379",
      "filename": "src/rtutils.c",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Frtutils.c",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Frtutils.c",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Frtutils.c?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -121,6 +121,16 @@ JL_DLLEXPORT void JL_NORETURN jl_type_error_rt(const char *fname, const char *co\n     jl_throw(ex);\n }\n \n+JL_DLLEXPORT void JL_NORETURN jl_type_error_global(const char *fname, jl_module_t *mod, jl_sym_t *sym,\n+                                               jl_value_t *expected JL_MAYBE_UNROOTED,\n+                                               jl_value_t *got JL_MAYBE_UNROOTED)\n+{\n+    jl_value_t *gr = jl_module_globalref(mod, sym);\n+    jl_value_t *ex = jl_new_struct(jl_typeerror_type, jl_symbol(fname), gr, expected, got);\n+    jl_throw(ex);\n+}\n+\n+\n // with function name or description only\n JL_DLLEXPORT void JL_NORETURN jl_type_error(const char *fname,\n                                             jl_value_t *expected JL_MAYBE_UNROOTED,"
    },
    {
      "sha": "b03f0c1a430cdd01a65d3c9d9297d1d35dd020e3",
      "filename": "src/signal-handling.c",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fsignal-handling.c",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fsignal-handling.c",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fsignal-handling.c?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -636,6 +636,9 @@ void jl_critical_error(int sig, int si_code, bt_context_t *context, jl_task_t *c\n             jl_safe_printf(\"\\n[%d] signal %d (%d): %s\\n\", getpid(), sig, si_code, strsignal(sig));\n         else\n             jl_safe_printf(\"\\n[%d] signal %d: %s\\n\", getpid(), sig, strsignal(sig));\n+        if (sig == SIGQUIT) {\n+            jl_print_task_backtraces(0);\n+        }\n     }\n     jl_safe_printf(\"in expression starting at %s:%d\\n\", jl_filename, jl_lineno);\n     if (context && ct) {"
    },
    {
      "sha": "50566b46ff45ab307237f5fe7b9a095dec4ccf9e",
      "filename": "src/stackwalk.c",
      "status": "modified",
      "additions": 13,
      "deletions": 5,
      "changes": 18,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fstackwalk.c",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/src%2Fstackwalk.c",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fstackwalk.c?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1383,11 +1383,19 @@ JL_DLLEXPORT void jlbacktrace(void) JL_NOTSAFEPOINT\n // Print backtrace for specified task to jl_safe_printf stderr\n JL_DLLEXPORT void jlbacktracet(jl_task_t *t) JL_NOTSAFEPOINT\n {\n-    jl_task_t *ct = jl_current_task;\n-    jl_ptls_t ptls = ct->ptls;\n-    ptls->bt_size = 0;\n-    jl_bt_element_t *bt_data = ptls->bt_data;\n-    jl_record_backtrace_result_t r = jl_record_backtrace(t, bt_data, JL_MAX_BT_SIZE, 0);\n+    jl_bt_element_t *bt_data;\n+    jl_task_t *ct = jl_get_current_task();\n+    size_t max_bt_size;\n+    if (ct && ct->ptls != NULL) {\n+        jl_ptls_t ptls = ct->ptls;\n+        ptls->bt_size = 0;\n+        bt_data = ptls->bt_data;\n+        max_bt_size = JL_MAX_BT_SIZE;\n+    } else {\n+        max_bt_size = 1024; //8kb of stack should be safe\n+        bt_data = (jl_bt_element_t *)alloca(max_bt_size * sizeof(jl_bt_element_t));\n+    }\n+    jl_record_backtrace_result_t r = jl_record_backtrace(t, bt_data, max_bt_size, 0);\n     size_t bt_size = r.bt_size;\n     size_t i;\n     for (i = 0; i < bt_size; i += jl_bt_entry_size(bt_data + i)) {"
    },
    {
      "sha": "a93a00dd4f0a61252b66b5816494ad9256243c7e",
      "filename": "stdlib/InteractiveUtils/src/codeview.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FInteractiveUtils%2Fsrc%2Fcodeview.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FInteractiveUtils%2Fsrc%2Fcodeview.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FInteractiveUtils%2Fsrc%2Fcodeview.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -176,7 +176,8 @@ function code_warntype(io::IO, @nospecialize(f), @nospecialize(tt=Base.default_t\n     end\n     nothing\n end\n-code_warntype(args...; kwargs...) = (@nospecialize; code_warntype(stdout, args...; kwargs...))\n+code_warntype(f; kwargs...) = (@nospecialize; code_warntype(stdout, f; kwargs...))\n+code_warntype(f, argtypes; kwargs...) = (@nospecialize; code_warntype(stdout, f, argtypes; kwargs...))\n \n using Base: CodegenParams\n "
    },
    {
      "sha": "fb6bb7202658838adc86a9afdadbf5936e35fd3d",
      "filename": "stdlib/Mmap/src/Mmap.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FMmap%2Fsrc%2FMmap.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FMmap%2Fsrc%2FMmap.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMmap%2Fsrc%2FMmap.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -199,7 +199,7 @@ function mmap(io::IO,\n         overflow && throw(ArgumentError(\"requested size prod($((len, dims...))) too large, would overflow typeof(size(T)) == $(typeof(len))\"))\n     end\n     len >= 0 || throw(ArgumentError(\"requested size must be \u2265 0, got $len\"))\n-    len == 0 && return Array{T}(undef, ntuple(x->0,Val(N)))\n+    len == 0 && return Array{T}(undef, dims)\n     len < typemax(Int) - PAGESIZE || throw(ArgumentError(\"requested size must be < $(typemax(Int)-PAGESIZE), got $len\"))\n \n     offset >= 0 || throw(ArgumentError(\"requested offset must be \u2265 0, got $offset\"))"
    },
    {
      "sha": "d129c0ee942953362b89221bcc7a8d9a1e550bd0",
      "filename": "stdlib/Mmap/test/runtests.jl",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FMmap%2Ftest%2Fruntests.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FMmap%2Ftest%2Fruntests.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FMmap%2Ftest%2Fruntests.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -11,12 +11,13 @@ GC.gc(); GC.gc()\n GC.gc(); GC.gc()\n @test mmap(file, Array{UInt8,3}, (1,1,11)) == reshape(t,(1,1,11))\n GC.gc(); GC.gc()\n-@test mmap(file, Array{UInt8,3}, (11,0,1)) == Array{UInt8}(undef, (0,0,0))\n+@test size(mmap(file, Array{UInt8,3}, (11,0,1))) == (11,0,1)\n @test mmap(file, Vector{UInt8}, (11,)) == t\n GC.gc(); GC.gc()\n @test mmap(file, Array{UInt8,2}, (1,11)) == t'\n GC.gc(); GC.gc()\n-@test mmap(file, Array{UInt8,2}, (0,12)) == Array{UInt8}(undef, (0,0))\n+@test size(mmap(file, Array{UInt8,2}, (0,12))) == (0,12)\n+@test size(mmap(file, Matrix{Float32}, (10,0))) == (10,0)\n m = mmap(file, Array{UInt8,3}, (1,2,1))\n @test m == reshape(b\"He\",(1,2,1))\n finalize(m); m=nothing; GC.gc()"
    },
    {
      "sha": "7f2e0b664dcc18b3f8b2dd07eaf4575bae6954da",
      "filename": "stdlib/Pkg.version",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FPkg.version",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FPkg.version",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FPkg.version?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1,4 +1,4 @@\n PKG_BRANCH = release-1.12\n-PKG_SHA1 = 69926e385c878253d62e2588a19b252277196ebf\n+PKG_SHA1 = f571edda902c848382517503665fea6aa275ceb9\n PKG_GIT_URL := https://github.com/JuliaLang/Pkg.jl.git\n PKG_TAR_URL = https://api.github.com/repos/JuliaLang/Pkg.jl/tarball/$1"
    },
    {
      "sha": "f82068c372b3bf7b399981803233261020d167c0",
      "filename": "stdlib/REPL/src/REPL.jl",
      "status": "modified",
      "additions": 4,
      "deletions": 19,
      "changes": 23,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Fsrc%2FREPL.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Fsrc%2FREPL.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FREPL%2Fsrc%2FREPL.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1845,25 +1845,10 @@ function repl_eval_counter(hp)\n end\n \n function out_transform(@nospecialize(x), n::Ref{Int})\n-    return Expr(:toplevel, get_usings!([], x)..., quote\n-        let __temp_val_a72df459 = $x\n-            $capture_result($n, __temp_val_a72df459)\n-            __temp_val_a72df459\n-        end\n-    end)\n-end\n-\n-function get_usings!(usings, ex)\n-    ex isa Expr || return usings\n-    # get all `using` and `import` statements which are at the top level\n-    for (i, arg) in enumerate(ex.args)\n-        if Base.isexpr(arg, :toplevel)\n-            get_usings!(usings, arg)\n-        elseif Base.isexpr(arg, [:using, :import])\n-            push!(usings, popat!(ex.args, i))\n-        end\n-    end\n-    return usings\n+    return Expr(:block, # avoid line numbers or scope that would leak into the output and change the meaning of x\n+        :(local __temp_val_a72df459 = $x),\n+        Expr(:call, capture_result, n, :__temp_val_a72df459),\n+        :__temp_val_a72df459)\n end\n \n function create_global_out!(mod)"
    },
    {
      "sha": "8c39231153fcc733a47bae5774144632f9b93002",
      "filename": "stdlib/REPL/src/REPLCompletions.jl",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Fsrc%2FREPLCompletions.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Fsrc%2FREPLCompletions.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FREPL%2Fsrc%2FREPLCompletions.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -698,6 +698,15 @@ code_typed(CC.typeinf, (REPLInterpreter, CC.InferenceState))\n MAX_METHOD_COMPLETIONS::Int = 40\n function _complete_methods(ex_org::Expr, context_module::Module, shift::Bool)\n     isempty(ex_org.args) && return 2, nothing, [], Set{Symbol}()\n+    # Desugar do block call into call with lambda\n+    if ex_org.head === :do && length(ex_org.args) >= 2\n+        ex_call = ex_org.args[1]\n+        ex_args = [x for x in ex_call.args if !(x isa Expr && x.head === :parameters)]\n+        ex_params = findfirst(x -> x isa Expr && x.head === :parameters, ex_call.args)\n+        new_args = [ex_args[1], ex_org.args[end], ex_args[2:end]...]\n+        ex_params !== nothing && push!(new_args, ex_call.args[ex_params])\n+        ex_org = Expr(:call, new_args...)\n+    end\n     funct = repl_eval_ex(ex_org.args[1], context_module)\n     funct === nothing && return 2, nothing, [], Set{Symbol}()\n     funct = CC.widenconst(funct)"
    },
    {
      "sha": "52153a12f606f3f14179a352174d1c30ce95d639",
      "filename": "stdlib/REPL/src/docview.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Fsrc%2Fdocview.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Fsrc%2Fdocview.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FREPL%2Fsrc%2Fdocview.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -640,7 +640,7 @@ function _repl(x, brief::Bool=true, mod::Module=Main, internal_accesses::Union{N\n     docs = esc(:(@doc $x))\n     docs = if isfield(x)\n         quote\n-            if isa($(esc(x.args[1])), DataType)\n+            if $(esc(x.args[1])) isa Type\n                 fielddoc($(esc(x.args[1])), $(esc(x.args[2])))\n             else\n                 $docs\n@@ -684,6 +684,7 @@ function fielddoc(binding::Binding, field::Symbol)\n end\n \n # As with the additional `doc` methods, this converts an object to a `Binding` first.\n+fielddoc(obj::UnionAll, field::Symbol) = fielddoc(Base.unwrap_unionall(obj), field)\n fielddoc(object, field::Symbol) = fielddoc(aliasof(object, typeof(object)), field)\n \n "
    },
    {
      "sha": "0ac6f88d12ed6d73cbc02a78be28d3d7e670cd65",
      "filename": "stdlib/REPL/test/docview.jl",
      "status": "modified",
      "additions": 18,
      "deletions": 0,
      "changes": 18,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Ftest%2Fdocview.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Ftest%2Fdocview.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FREPL%2Ftest%2Fdocview.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -111,6 +111,24 @@ end\n     @test endswith(get_help_standard(\"Int.not_a_field\"), \"`$Int` has no fields.\\n\")\n end\n \n+@testset \"Parametric struct field help (#59524)\" begin\n+    \"NonParametricStruct docstring\"\n+    struct NonParametricStruct\n+        \"field_x docstring\"\n+        field_x::Float64\n+    end\n+\n+    \"ParametricStruct docstring\"\n+    struct ParametricStruct{T<:Real}\n+        \"field_y docstring\"\n+        field_y::T\n+    end\n+\n+    @test occursin(\"field_x docstring\", get_help_standard(\"NonParametricStruct.field_x\"))\n+    @test occursin(\"field_y docstring\", get_help_standard(\"ParametricStruct.field_y\"))\n+    @test endswith(get_help_standard(\"ParametricStruct.not_a_field\"), \"ParametricStruct` has field `field_y`.\\n\")\n+end\n+\n module InternalWarningsTests\n \n     module A"
    },
    {
      "sha": "0ca3788d2b460fbf5393ebcdb6c8d3d0b20e3a82",
      "filename": "stdlib/REPL/test/repl.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Ftest%2Frepl.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Ftest%2Frepl.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FREPL%2Ftest%2Frepl.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -32,7 +32,7 @@ function kill_timer(delay)\n         # **DON'T COPY ME.**\n         # The correct way to handle timeouts is to close the handle:\n         # e.g. `close(stdout_read); close(stdin_write)`\n-        test_task.queue === nothing || Base.list_deletefirst!(test_task.queue::IntrusiveLinkedList{Task}, test_task)\n+        test_task.queue === nothing || Base.list_deletefirst!(test_task.queue::Base.IntrusiveLinkedList{Task}, test_task)\n         schedule(test_task, \"hard kill repl test\"; error=true)\n         print(stderr, \"WARNING: attempting hard kill of repl test after exceeding timeout\\n\")\n     end"
    },
    {
      "sha": "736f6fb405a41c7b495b6a4c8ff765808f1d3fab",
      "filename": "stdlib/REPL/test/replcompletions.jl",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Ftest%2Freplcompletions.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2FREPL%2Ftest%2Freplcompletions.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2FREPL%2Ftest%2Freplcompletions.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -139,6 +139,7 @@ let ex =\n             kwtest4(a::SubString; x23, _something) = pass\n             kwtest5(a::Int, b, x...; somekwarg, somekotherkwarg) = pass\n             kwtest5(a::Char, b; xyz) = pass\n+            kwtest6(f::Function, arg1; somekwarg) = pass\n \n             const named = (; len2=3)\n             const fmsoebelkv = (; len2=3)\n@@ -198,6 +199,8 @@ test_scomplete(s) =  map_completion_text(@inferred(shell_completions(s, lastinde\n test_complete_pos(s) = map_completion_text(@inferred(completions(replace(s, '|' => \"\"), findfirst('|', s)-1)))\n test_complete_context(s, m=@__MODULE__; shift::Bool=true) =\n     map_completion_text(@inferred(completions(s,lastindex(s), m, shift)))\n+test_complete_context_pos(s, m=@__MODULE__; shift::Bool=true) =\n+    map_completion_text(@inferred(completions(replace(s, '|' => \"\"), findfirst('|', s)-1, m, shift)))\n test_complete_foo(s; shift::Bool=true) = test_complete_context(s, Main.CompletionFoo; shift)\n test_complete_noshift(s) = map_completion_text(@inferred(completions(s, lastindex(s), Main, false)))\n \n@@ -2720,3 +2723,10 @@ let s = \"foo58296(findfi\"\n     @test \"findfirst\" in c\n     @test r == 10:15\n end\n+\n+# #58833 - Autocompletion of keyword arguments with do-blocks is broken\n+let s = \"kwtest6(123; som|) do x; x + 3 end\"\n+    c, r = test_complete_context_pos(s, Main.CompletionFoo)\n+    @test \"somekwarg=\" in c\n+    @test r == 14:16\n+end"
    },
    {
      "sha": "1356d2d6f27af13f68ba1d1f40e1fbab97dd9d86",
      "filename": "stdlib/libblastrampoline_jll/Project.toml",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2Flibblastrampoline_jll%2FProject.toml",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/stdlib%2Flibblastrampoline_jll%2FProject.toml",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/stdlib%2Flibblastrampoline_jll%2FProject.toml?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1,6 +1,6 @@\n name = \"libblastrampoline_jll\"\n uuid = \"8e850b90-86db-534c-a0d3-1478176c7d93\"\n-version = \"5.13.1+1\"\n+version = \"5.15.0+0\"\n \n [deps]\n Libdl = \"8f399da3-3557-5675-b5ff-fb832c97cbdb\""
    },
    {
      "sha": "310dbde37580a23a8594ea70c2eb88d6903b69df",
      "filename": "sysimage.mk",
      "status": "modified",
      "additions": 36,
      "deletions": 16,
      "changes": 52,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/sysimage.mk",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/sysimage.mk",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/sysimage.mk?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -7,7 +7,7 @@ include $(JULIAHOME)/stdlib/stdlib.mk\n default: sysimg-$(JULIA_BUILD_MODE) # contains either \"debug\" or \"release\"\n all: sysimg-release sysimg-debug\n basecompiler-ji: $(build_private_libdir)/basecompiler.ji\n-sysimg-ji: $(build_private_libdir)/sys.ji\n+sysimg-ji: $(build_private_libdir)/sysbase.ji\n sysimg-bc: $(build_private_libdir)/sys-bc.a\n sysimg-release: $(build_private_libdir)/sys.$(SHLIB_EXT)\n sysimg-debug: $(build_private_libdir)/sys-debug.$(SHLIB_EXT)\n@@ -69,28 +69,45 @@ RELDATADIR := $(call rel_path,$(JULIAHOME)/base,$(build_datarootdir))/ # <-- mak\n \n $(build_private_libdir)/basecompiler.ji: $(COMPILER_SRCS)\n \t@$(call PRINT_JULIA, cd $(JULIAHOME)/base && \\\n-\tJULIA_NUM_THREADS=1 $(call spawn,$(JULIA_EXECUTABLE)) -C \"$(JULIA_CPU_TARGET)\" $(HEAPLIM) --output-ji $(call cygpath_w,$@).tmp \\\n-\t\t--startup-file=no --warn-overwrite=yes --depwarn=error -g$(BOOTSTRAP_DEBUG_LEVEL) -O1 Base_compiler.jl --buildroot $(RELBUILDROOT) --dataroot $(RELDATADIR))\n-\t@mv $@.tmp $@\n-\n-$(build_private_libdir)/basecompiler-o.a $(build_private_libdir)/basecompiler-bc.a: $(build_private_libdir)/basecompiler-%.a : $(COMPILER_SRCS)\n-\t@$(call PRINT_JULIA, cd $(JULIAHOME)/base && \\\n-\tJULIA_NUM_THREADS=1 $(call spawn,$(JULIA_EXECUTABLE)) -C \"$(JULIA_CPU_TARGET)\" $(HEAPLIM) --output-$* $(call cygpath_w,$@).tmp \\\n+\tJULIA_NUM_THREADS=1 $(call spawn,$(JULIA_EXECUTABLE)) $(HEAPLIM) --output-ji $(call cygpath_w,$@).tmp \\\n \t\t--startup-file=no --warn-overwrite=yes -g$(BOOTSTRAP_DEBUG_LEVEL) -O1 Base_compiler.jl --buildroot $(RELBUILDROOT) --dataroot $(RELDATADIR))\n \t@mv $@.tmp $@\n \n-$(build_private_libdir)/sys.ji: $(build_private_libdir)/basecompiler.$(SHLIB_EXT) $(JULIAHOME)/VERSION $(BASE_SRCS) $(STDLIB_SRCS)\n-\t@$(call PRINT_JULIA, cd $(JULIAHOME)/base && \\\n-\tif ! JULIA_BINDIR=$(call cygpath_w,$(build_bindir)) WINEPATH=\"$(call cygpath_w,$(build_bindir));$$WINEPATH\" \\\n-\t\t\tJULIA_NUM_THREADS=1 $(call spawn, $(JULIA_EXECUTABLE)) -g1 -O1 -C \"$(JULIA_CPU_TARGET)\" $(HEAPLIM) --output-ji $(call cygpath_w,$@).tmp $(JULIA_SYSIMG_BUILD_FLAGS) \\\n-\t\t\t--startup-file=no --warn-overwrite=yes --depwarn=error --sysimage $(call cygpath_w,$<) sysimg.jl --buildroot $(RELBUILDROOT) --dataroot $(RELDATADIR); then \\\n-\t\techo '*** This error might be fixed by running `make clean`. If the error persists$(COMMA) try `make cleanall`. ***'; \\\n+define base_builder\n+$$(build_private_libdir)/basecompiler$1-o.a $$(build_private_libdir)/basecompiler$1-bc.a : $$(build_private_libdir)/basecompiler$1-%.a : $(COMPILER_SRCS)\n+\t@$$(call PRINT_JULIA, cd $$(JULIAHOME)/base && \\\n+\tWINEPATH=\"$$(call cygpath_w,$$(build_bindir));$$$$WINEPATH\" \\\n+\tJULIA_NUM_THREADS=1 \\\n+\t\t$$(call spawn, $3) $2 -C \"$$(JULIA_CPU_TARGET)\" $$(HEAPLIM) --output-$$* $$(call cygpath_w,$$@).tmp \\\n+\t\t--startup-file=no --warn-overwrite=yes -g$$(BOOTSTRAP_DEBUG_LEVEL) Base_compiler.jl --buildroot $$(RELBUILDROOT) --dataroot $$(RELDATADIR))\n+\t@mv $$@.tmp $$@\n+$$(build_private_libdir)/sysbase$1.ji: $$(build_private_libdir)/basecompiler$1.$$(SHLIB_EXT) $$(JULIAHOME)/VERSION $$(BASE_SRCS) $$(STDLIB_SRCS)\n+\t@$$(call PRINT_JULIA, cd $$(JULIAHOME)/base && \\\n+\tif ! JULIA_BINDIR=$$(call cygpath_w,$$(build_bindir)) \\\n+\t     WINEPATH=\"$$(call cygpath_w,$$(build_bindir));$$$$WINEPATH\" \\\n+\t\t JULIA_NUM_THREADS=1 \\\n+\t\t\t$$(call spawn, $$(JULIA_EXECUTABLE)) -g1 $2 -C \"$$(JULIA_CPU_TARGET)\" $$(HEAPLIM) --output-ji $$(call cygpath_w,$$@).tmp $$(JULIA_SYSIMG_BUILD_FLAGS) \\\n+\t\t\t--startup-file=no --warn-overwrite=yes --sysimage $$(call cygpath_w,$$<) sysimg.jl --buildroot $$(RELBUILDROOT) --dataroot $$(RELDATADIR); then \\\n+\t\techo '*** This error might be fixed by running `make clean`. If the error persists$$(COMMA) try `make cleanall`. ***'; \\\n \t\tfalse; \\\n \tfi )\n-\t@mv $@.tmp $@\n+\t@mv $$@.tmp $$@\n+.SECONDARY: $$(build_private_libdir)/basecompiler$1-o.a $$(build_private_libdir)/basecompiler$1-bc.a $$(build_private_libdir)/sysbase$1.ji # request Make to keep these files around\n+endef\n \n define sysimg_builder\n-$$(build_private_libdir)/sys$1-o.a $$(build_private_libdir)/sys$1-bc.a : $$(build_private_libdir)/sys$1-%.a : $$(build_private_libdir)/sys.ji $$(JULIAHOME)/contrib/generate_precompile.jl\n+$$(build_private_libdir)/sysbase$1-o.a $$(build_private_libdir)/sysbase$1-bc.a : $$(build_private_libdir)/sysbase$1-%.a : $$(build_private_libdir)/basecompiler$1.$$(SHLIB_EXT) $$(JULIAHOME)/VERSION $$(BASE_SRCS) $$(STDLIB_SRCS)\n+\t@$$(call PRINT_JULIA, cd $$(JULIAHOME)/base && \\\n+\tif ! JULIA_BINDIR=$$(call cygpath_w,$$(build_bindir)) \\\n+\t     WINEPATH=\"$$(call cygpath_w,$$(build_bindir));$$$$WINEPATH\" \\\n+\t\t JULIA_NUM_THREADS=1 \\\n+\t\t\t$$(call spawn, $$(JULIA_EXECUTABLE)) -g1 $2 -C \"$$(JULIA_CPU_TARGET)\" $$(HEAPLIM) --output-$$* $$(call cygpath_w,$$@).tmp $$(JULIA_SYSIMG_BUILD_FLAGS) \\\n+\t\t\t--startup-file=no --warn-overwrite=yes --sysimage $$(call cygpath_w,$$<) sysimg.jl --buildroot $$(RELBUILDROOT) --dataroot $$(RELDATADIR); then \\\n+\t\techo '*** This error might be fixed by running `make clean`. If the error persists$$(COMMA) try `make cleanall`. ***'; \\\n+\t\tfalse; \\\n+\tfi )\n+\t@mv $$@.tmp $$@\n+$$(build_private_libdir)/sys$1-o.a $$(build_private_libdir)/sys$1-bc.a : $$(build_private_libdir)/sys$1-%.a : $$(build_private_libdir)/sysbase$1.$$(SHLIB_EXT) $$(JULIAHOME)/contrib/generate_precompile.jl\n \t@$$(call PRINT_JULIA, cd $$(JULIAHOME)/base && \\\n \tif ! JULIA_BINDIR=$$(call cygpath_w,$(build_bindir)) \\\n \t\t WINEPATH=\"$$(call cygpath_w,$$(build_bindir));$$$$WINEPATH\" \\\n@@ -105,6 +122,9 @@ $$(build_private_libdir)/sys$1-o.a $$(build_private_libdir)/sys$1-bc.a : $$(buil\n \tfi )\n \t@mv $$@.tmp $$@\n .SECONDARY: $$(build_private_libdir)/sys$1-o.a $(build_private_libdir)/sys$1-bc.a # request Make to keep these files around\n+.SECONDARY: $$(build_private_libdir)/sysbase$1-o.a $(build_private_libdir)/sysbase$1-bc.a # request Make to keep these files around\n endef\n+$(eval $(call base_builder,,-O1,$(JULIA_EXECUTABLE_release)))\n+$(eval $(call base_builder,-debug,-O0,$(JULIA_EXECUTABLE_debug)))\n $(eval $(call sysimg_builder,,-O3,$(JULIA_EXECUTABLE_release)))\n $(eval $(call sysimg_builder,-debug,-O0,$(JULIA_EXECUTABLE_debug)))"
    },
    {
      "sha": "d511988dd7a80efdbba5b00e712b61588d513e31",
      "filename": "test/arrayops.jl",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Farrayops.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Farrayops.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Farrayops.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -519,6 +519,12 @@ end\n     v = empty!(collect(1:100))\n     pushfirst!(v, 1)\n     @test length(v.ref.mem) == 100\n+\n+    # test that insert! at position 1 doesn't allocate for empty arrays with capacity (issue #58640)\n+    v = empty!(Vector{Int}(undef, 5))\n+    insert!(v, 1, 10)\n+    @test v == [10]\n+    @test length(v.ref.mem) == 5\n end\n \n @testset \"popat!(::Vector, i, [default])\" begin"
    },
    {
      "sha": "75e338ea5d51849ea97aef01a125d33ee4db5c89",
      "filename": "test/cmdlineargs.jl",
      "status": "modified",
      "additions": 26,
      "deletions": 0,
      "changes": 26,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fcmdlineargs.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fcmdlineargs.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fcmdlineargs.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -60,6 +60,32 @@ let\n     @test format_filename(\"%a%%b\") == \"a%b\"\n end\n \n+if Sys.isunix()\n+    @testset \"SIGQUIT prints task backtraces\" begin\n+        script = \"\"\"\n+            mutable struct RLimit\n+                cur::Int64\n+                max::Int64\n+            end\n+            const RLIMIT_CORE = 4 # from /usr/include/sys/resource.h\n+            ccall(:setrlimit, Cint, (Cint, Ref{RLimit}), RLIMIT_CORE, Ref(RLimit(0, 0)))\n+            write(stdout, \"r\")\n+            wait()\n+        \"\"\"\n+        exename = `$(Base.julia_cmd()) --startup-file=no --color=no`\n+        errp = PipeBuffer()\n+        # disable coredumps for this process\n+        p = open(pipeline(`$exename -e $script`, stderr=errp), \"r\")\n+        @test read(p, UInt8) == UInt8('r')\n+        Base.kill(p, Base.SIGQUIT)\n+        wait(p)\n+        err_s = readchomp(errp)\n+        @test Base.process_signaled(p) && p.termsignal == Base.SIGQUIT\n+        @test occursin(\"==== Thread \", err_s)\n+        @test occursin(\"==== Done\", err_s)\n+    end\n+end\n+\n @testset \"julia_cmd\" begin\n     julia_basic = Base.julia_cmd()\n     function get_julia_cmd(arg)"
    },
    {
      "sha": "726cadbba68c86a3607ed54a62b97c299d71ca95",
      "filename": "test/compileall.jl",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fcompileall.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fcompileall.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fcompileall.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -2,8 +2,10 @@\n # We make it a separate test target here, so that it can run in parallel\n # with the rest of the tests.\n \n+include(\"tempdepot.jl\")\n+\n function precompile_test_harness(@nospecialize(f))\n-    load_path = mktempdir()\n+    load_path = mkdepottempdir()\n     try\n         pushfirst!(LOAD_PATH, load_path)\n         pushfirst!(DEPOT_PATH, load_path)"
    },
    {
      "sha": "d18f7fe8136b6156da0dfe6980fa56715dede422",
      "filename": "test/core.jl",
      "status": "modified",
      "additions": 7,
      "deletions": 10,
      "changes": 17,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fcore.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fcore.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fcore.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -9,6 +9,8 @@ const Bottom = Union{}\n # For curmod_*\n include(\"testenv.jl\")\n \n+include(\"tempdepot.jl\")\n+\n ## tests that `const` field declarations\n \n # sanity tests that our built-in types are marked correctly for const fields\n@@ -6830,9 +6832,6 @@ Base._growat!(A, 4, 1)\n Base._growat!(A, 2, 3)\n @test getindex(A, 1) === 0x01\n @test getindex(A, 2) === missing\n-@test getindex(A, 3) === missing\n-@test getindex(A, 4) === missing\n-@test getindex(A, 5) === missing\n @test getindex(A, 6) === 0x03\n @test getindex(A, 7) === missing\n @test getindex(A, 8) === missing\n@@ -8134,7 +8133,10 @@ end\n     setglobal!(m, :x, 2, :release)\n     @test m.x === 2\n     @test_throws ConcurrencyViolationError setglobal!(m, :x, 3, :not_atomic)\n-    @test_throws ErrorException setglobal!(m, :x, 4., :release)\n+    @test_throws TypeError setglobal!(m, :x, 4., :release)\n+\n+    f_set_bad_type(m) = setglobal!(m, :x, 4., :release)\n+    @test_throws TypeError f_set_bad_type(m)\n \n     m.x = 1\n     @test m.x === 1\n@@ -8422,7 +8424,7 @@ end\n \n # precompilation\n let load_path = mktempdir()\n-    depot_path = mktempdir()\n+    depot_path = mkdepottempdir()\n     try\n         pushfirst!(LOAD_PATH, load_path)\n         pushfirst!(DEPOT_PATH, depot_path)\n@@ -8464,11 +8466,6 @@ let load_path = mktempdir()\n         filter!((\u2260)(load_path), LOAD_PATH)\n         filter!((\u2260)(depot_path), DEPOT_PATH)\n         rm(load_path, recursive=true, force=true)\n-        try\n-            rm(depot_path, force=true, recursive=true)\n-        catch err\n-            @show err\n-        end\n     end\n end\n "
    },
    {
      "sha": "0744cac6796988e3a24bffe5019822bb1850e4a3",
      "filename": "test/embedding/embedding-test.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fembedding%2Fembedding-test.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fembedding%2Fembedding-test.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fembedding%2Fembedding-test.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -32,5 +32,5 @@ end\n     @test lines[9] == \"called bar\"\n     @test lines[10] == \"calling new bar\"\n     @test lines[11] == \"      From worker 2:\\tTaking over the world...\"\n-    @test readline(err) == \"exception caught from C\"\n+    @test \"exception caught from C\" in readlines(err)\n end"
    },
    {
      "sha": "dc800a3a00b08b29f3f7d705b58ed1e25e5a9783",
      "filename": "test/intfuncs.jl",
      "status": "modified",
      "additions": 32,
      "deletions": 0,
      "changes": 32,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fintfuncs.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fintfuncs.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fintfuncs.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -216,6 +216,35 @@ end\n     x, y = Int8(-12), UInt(100)\n     d, u, v = gcdx(x, y)\n     @test x*u + y*v == d\n+\n+end\n+\n+# issue #58025\n+@testset \"Mixed signed/unsigned types\" begin\n+    cases = [ # adapted from https://github.com/JuliaLang/julia/pull/59487#issuecomment-3258209203\n+        (UInt16(100), Int8(-101)),\n+        (Int8(-50), UInt16(75)),\n+        (UInt32(12), Int16(-18)),\n+        (Int64(-24), UInt8(36)),\n+        (UInt8(15), Int16(-25)),\n+        (Int32(-42), UInt64(56)),\n+        (UInt128(1000), Int32(-1500)),\n+        (UInt64(0), Int32(-5)),\n+        (Int16(-7), UInt8(0)),\n+        (Int8(-14), UInt8(13)),\n+    ]\n+    for (a, b) in cases\n+        g1 = gcd(a, b)\n+        g2, s, t = gcdx(a, b)\n+        @test g1 === g2\n+        @test s*a + t*b == g2\n+        @test g2 >= 0\n+        @test lcm(a, b) === convert(typeof(g1), lcm(widen(a), widen(b)))\n+    end\n+\n+    @test gcdx(Int16(-32768), Int8(-128)) === (Int16(128), Int16(0), Int16(-1))\n+    @test gcdx(Int8(-128), UInt16(256)) === (0x0080, 0xffff, 0x0000)\n+    @test_broken gcd(Int8(-128), UInt16(256)) === 0x0080\n end\n \n @testset \"gcd/lcm/gcdx for custom types\" begin\n@@ -323,6 +352,9 @@ end\n     @test powermod(2, big(3), -5) == -2\n     @inferred  powermod(2, -2, -5)\n     @inferred  powermod(big(2), -2, UInt(5))\n+\n+    @test powermod(-3, 0x80, 7) === 2\n+    @test powermod(0x03, 0x80, 0x07) === 0x02\n end\n \n @testset \"nextpow/prevpow\" begin"
    },
    {
      "sha": "49db010ce1adc498a82a8e2ffea1b1a802d0ecb9",
      "filename": "test/loading.jl",
      "status": "modified",
      "additions": 20,
      "deletions": 33,
      "changes": 53,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Floading.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Floading.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Floading.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -34,6 +34,7 @@ end\n @test @nested_LINE_expansion2() == ((@__LINE__() - 5, @__LINE__() - 9), @__LINE__())\n \n original_depot_path = copy(Base.DEPOT_PATH)\n+include(\"tempdepot.jl\")\n include(\"precompile_utils.jl\")\n \n loaded_files = String[]\n@@ -226,7 +227,6 @@ end\n     end\n end\n \n-\n ## functional testing of package identification, location & loading ##\n \n saved_load_path = copy(LOAD_PATH)\n@@ -236,8 +236,9 @@ watcher_counter = Ref(0)\n push!(Base.active_project_callbacks, () -> watcher_counter[] += 1)\n push!(Base.active_project_callbacks, () -> error(\"broken\"))\n \n+const testdefaultdepot = mkdepottempdir()\n push!(empty!(LOAD_PATH), joinpath(@__DIR__, \"project\"))\n-append!(empty!(DEPOT_PATH), [mktempdir(), joinpath(@__DIR__, \"depot\")])\n+append!(empty!(DEPOT_PATH), [testdefaultdepot, joinpath(@__DIR__, \"depot\")])\n @test watcher_counter[] == 0\n @test_logs (:error, r\"active project callback .* failed\") Base.set_active_project(nothing)\n @test watcher_counter[] == 1\n@@ -461,7 +462,7 @@ function make_env(flat, root, roots, graph, paths, dummies)\n     )\n end\n \n-const depots = [mktempdir() for _ = 1:3]\n+const depots = [mkdepottempdir() for _ = 1:3]\n const envs = Dict{String,Any}()\n \n append!(empty!(DEPOT_PATH), depots)\n@@ -755,13 +756,6 @@ end\n for env in keys(envs)\n     rm(env, force=true, recursive=true)\n end\n-for depot in depots\n-    try\n-        rm(depot, force=true, recursive=true)\n-    catch err\n-        @show err\n-    end\n-end\n \n append!(empty!(LOAD_PATH), saved_load_path)\n append!(empty!(DEPOT_PATH), saved_depot_path)\n@@ -1043,9 +1037,10 @@ end\n         _pkgversion == pkgversion(parent) || error(\"unexpected extension \\$ext version: \\$_pkgversion\")\n     end\n     \"\"\"\n-    depot_path = mktempdir()\n-    try\n-        proj = joinpath(@__DIR__, \"project\", \"Extensions\", \"HasDepWithExtensions.jl\")\n+    depot_path = mkdepottempdir()\n+    proj = joinpath(@__DIR__, \"project\", \"Extensions\", \"HasDepWithExtensions.jl\")\n+\n+    begin\n \n         function gen_extension_cmd(compile, distr=false)\n             load_distr = distr ? \"using Distributed; addprocs(1)\" : \"\"\n@@ -1155,7 +1150,7 @@ end\n \n         # Extension-to-extension dependencies\n \n-        mktempdir() do depot # Parallel pre-compilation\n+        mkdepottempdir() do depot # Parallel pre-compilation\n             code = \"\"\"\n             Base.disable_parallel_precompile = false\n             using ExtToExtDependency\n@@ -1171,7 +1166,7 @@ end\n             )\n             @test occursin(\"Hello ext-to-ext!\", String(read(cmd)))\n         end\n-        mktempdir() do depot # Serial pre-compilation\n+        mkdepottempdir() do depot # Serial pre-compilation\n             code = \"\"\"\n             Base.disable_parallel_precompile = true\n             using ExtToExtDependency\n@@ -1188,7 +1183,7 @@ end\n             @test occursin(\"Hello ext-to-ext!\", String(read(cmd)))\n         end\n \n-        mktempdir() do depot # Parallel pre-compilation\n+        mkdepottempdir() do depot # Parallel pre-compilation\n             code = \"\"\"\n             Base.disable_parallel_precompile = false\n             using CrossPackageExtToExtDependency\n@@ -1204,7 +1199,7 @@ end\n             )\n             @test occursin(\"Hello x-package ext-to-ext!\", String(read(cmd)))\n         end\n-        mktempdir() do depot # Serial pre-compilation\n+        mkdepottempdir() do depot # Serial pre-compilation\n             code = \"\"\"\n             Base.disable_parallel_precompile = true\n             using CrossPackageExtToExtDependency\n@@ -1224,7 +1219,7 @@ end\n         # Extensions for \"parent\" dependencies\n         # (i.e. an `ExtAB`  where A depends on / loads B, but B provides the extension)\n \n-        mktempdir() do depot # Parallel pre-compilation\n+        mkdepottempdir() do depot # Parallel pre-compilation\n             code = \"\"\"\n             Base.disable_parallel_precompile = false\n             using Parent\n@@ -1239,7 +1234,7 @@ end\n             )\n             @test occursin(\"Hello parent!\", String(read(cmd)))\n         end\n-        mktempdir() do depot # Serial pre-compilation\n+        mkdepottempdir() do depot # Serial pre-compilation\n             code = \"\"\"\n             Base.disable_parallel_precompile = true\n             using Parent\n@@ -1254,13 +1249,6 @@ end\n             )\n             @test occursin(\"Hello parent!\", String(read(cmd)))\n         end\n-\n-    finally\n-        try\n-            rm(depot_path, force=true, recursive=true)\n-        catch err\n-            @show err\n-        end\n     end\n end\n \n@@ -1361,7 +1349,7 @@ end\n end\n \n @testset \"relocatable upgrades #51989\" begin\n-    mktempdir() do depot\n+    mkdepottempdir() do depot\n         # realpath is needed because Pkg is used for one of the precompile paths below, and Pkg calls realpath on the\n         # project path so the cache file slug will be different if the tempdir is given as a symlink\n         # (which it often is on MacOS) which would break the test.\n@@ -1435,7 +1423,7 @@ end\n end\n \n @testset \"code coverage disabled during precompilation\" begin\n-    mktempdir() do depot\n+    mkdepottempdir() do depot\n         cov_test_dir = joinpath(@__DIR__, \"project\", \"deps\", \"CovTest.jl\")\n         cov_cache_dir = joinpath(depot, \"compiled\", \"v$(VERSION.major).$(VERSION.minor)\", \"CovTest\")\n         function rm_cov_files()\n@@ -1479,7 +1467,7 @@ end\n end\n \n @testset \"command-line flags\" begin\n-    mktempdir() do depot_path mktempdir() do dir\n+    mkdepottempdir() do depot_path mktempdir() do dir\n         # generate a Parent.jl and Child.jl package, with Parent depending on Child\n         open(joinpath(dir, \"Child.jl\"), \"w\") do io\n             println(io, \"\"\"\n@@ -1495,7 +1483,7 @@ end\n \n         # helper function to load a package and return the output\n         function load_package(name, args=``)\n-            code = \"using $name\"\n+            code = \"Base.disable_parallel_precompile = true; using $name\"\n             cmd = addenv(`$(Base.julia_cmd()) -e $code $args`,\n                         \"JULIA_LOAD_PATH\" => dir,\n                         \"JULIA_DEPOT_PATH\" => depot_path,\n@@ -1562,7 +1550,7 @@ end\n end\n \n @testset \"including non-existent file throws proper error #52462\" begin\n-    mktempdir() do depot\n+    mkdepottempdir() do depot\n         project_path = joinpath(depot, \"project\")\n         mkpath(project_path)\n \n@@ -1704,7 +1692,7 @@ end\n end\n \n @testset \"require_stdlib loading duplication\" begin\n-    depot_path = mktempdir()\n+    depot_path = mkdepottempdir()\n     oldBase64 = nothing\n     try\n         push!(empty!(DEPOT_PATH), depot_path)\n@@ -1728,6 +1716,5 @@ end\n     finally\n         oldBase64 === nothing || Base.register_root_module(oldBase64)\n         copy!(DEPOT_PATH, original_depot_path)\n-        rm(depot_path, force=true, recursive=true)\n     end\n end"
    },
    {
      "sha": "6ea0ce25f9a73201c609e7d244c5e335e7d7faaa",
      "filename": "test/math.jl",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fmath.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fmath.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fmath.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -390,6 +390,15 @@ end\n     @test isnan(exp(reinterpret(Float64, 0x7ffbb14880000000)))\n end\n \n+@testset \"issue #57463\" begin\n+    for T in (Int16, Int32, Int64, Int128)\n+        @test iszero(1.1^typemin(T))\n+        @test iszero(0.9^typemax(T))\n+        @test isinf(1.1^typemax(T))\n+        @test isinf(0.9^typemin(T))\n+    end\n+end\n+\n @testset \"test abstractarray trig functions\" begin\n     TAA = rand(2,2)\n     TAA = (TAA + TAA')/2."
    },
    {
      "sha": "627d49935795d5262e22c504ffe000605bbe0f2d",
      "filename": "test/mpfr.jl",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fmpfr.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fmpfr.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fmpfr.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -35,6 +35,9 @@ import Base.MPFR\n \n     @test typeof(BigFloat(1//1)) == BigFloat\n     @test typeof(BigFloat(one(Rational{BigInt}))) == BigFloat\n+    rat = 1 // (big(2)^300 + 1)\n+    @test BigFloat(rat, RoundDown) < rat < BigFloat(rat, RoundUp)\n+    @test BigFloat(-rat, RoundUp) < -rat < BigFloat(-rat, RoundDown)\n \n     # BigFloat constructor respects global precision when not specified\n     let prec = precision(BigFloat) < 16 ? 256 : precision(BigFloat) \u00f7 2"
    },
    {
      "sha": "0d8a8b1d867c09110ec0267a059bd1b382e7e5e2",
      "filename": "test/numbers.jl",
      "status": "modified",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fnumbers.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fnumbers.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fnumbers.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1739,6 +1739,27 @@ end\n         @test cld(-1.1, 0.1) == div(-1.1, 0.1, RoundUp)   ==  ceil(big(-1.1)/big(0.1)) == -11.0\n         @test fld(-1.1, 0.1) == div(-1.1, 0.1, RoundDown) == floor(big(-1.1)/big(0.1)) == -12.0\n     end\n+    @testset \"issue  #49450\" begin\n+        @test div(514, Float16(0.75)) === Float16(685)\n+        @test fld(514, Float16(0.75)) === Float16(685)\n+        @test cld(515, Float16(0.75)) === Float16(687)\n+\n+        @test cld(1, Float16(0.000999)) === Float16(1001)\n+        @test cld(2, Float16(0.001999)) === Float16(1001)\n+        @test cld(3, Float16(0.002934)) === Float16(1023)\n+        @test cld(4, Float16(0.003998)) === Float16(1001)\n+        @test fld(5, Float16(0.004925)) === Float16(1015)\n+\n+        @test div(4_194_307, Float32(0.75)) === Float32(5_592_409)\n+        @test fld(4_194_307, Float32(0.75)) === Float32(5_592_409)\n+        @test cld(4_194_308, Float32(0.75)) === Float32(5_592_411)\n+\n+        @test fld(5, Float32(6.556511e-7)) === Float32(7_626_007)\n+        @test fld(10, Float32(1.3113022e-6)) === Float32(7_626_007)\n+        @test fld(11, Float32(1.4305115e-6)) === Float32(7_689_557)\n+        @test cld(16, Float32(2.8014183e-6)) === Float32(5_711_393)\n+        @test cld(17, Float32(2.2053719e-6)) === Float32(7_708_451)\n+    end\n end\n @testset \"return types\" begin\n     for T in (Int8,Int16,Int32,Int64,Int128, UInt8,UInt16,UInt32,UInt64,UInt128)"
    },
    {
      "sha": "2de5193ec4f35ee1c922988df12195355c02a337",
      "filename": "test/opaque_closure.jl",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fopaque_closure.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fopaque_closure.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fopaque_closure.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -297,6 +297,20 @@ let src = code_typed((Int,Int)) do x, y...\n         @test oc(1,2) === (1,(2,))\n         @test_throws MethodError oc(1,2,3)\n     end\n+\n+    # with manually constructed IRCode, without round-trip to CodeInfo\n+    f59222(xs...) = length(xs)\n+    ir = Base.code_ircode_by_type(Tuple{typeof(f59222), Symbol, Symbol})[1][1]\n+    ir.argtypes[1] = Tuple{}\n+    let oc = OpaqueClosure(ir; isva=true)\n+        @test oc(:a, :b) == 2\n+    end\n+    ir = Base.code_ircode_by_type(Tuple{typeof(f59222), Symbol, Vararg{Symbol}})[1][1]\n+    ir.argtypes[1] = Tuple{}\n+    let oc = OpaqueClosure(ir; isva=true)\n+        @test oc(:a) == 1\n+        @test oc(:a, :b, :c) == 3\n+    end\n end\n \n # Check for correct handling in case of broken return type."
    },
    {
      "sha": "b83d675862ce5206228111d7ec9ddfa5eaae0bd8",
      "filename": "test/precompile.jl",
      "status": "modified",
      "additions": 58,
      "deletions": 22,
      "changes": 80,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fprecompile.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fprecompile.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fprecompile.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -4,6 +4,7 @@ using Test, Distributed, Random, Logging, Libdl\n using REPL # testing the doc lookup function should be outside of the scope of this file, but is currently tested here\n \n include(\"precompile_utils.jl\")\n+include(\"tempdepot.jl\")\n \n Foo_module = :Foo4b3a94a1a081a8cb\n foo_incl_dep = :foo4b3a94a1a081a8cb\n@@ -686,16 +687,15 @@ precompile_test_harness(false) do dir\n           error(\"break me\")\n           end\n           \"\"\")\n-    @test_warn r\"LoadError: break me\\nStacktrace:\\n[ ]*\\[1\\] [\\e01m\\[]*error\" try\n-            Base.require(Main, :FooBar2)\n-            error(\"the \\\"break me\\\" test failed\")\n-        catch exc\n-            isa(exc, ErrorException) || rethrow()\n-            # The LoadError shouldn't be surfaced but is printed to stderr, hence the `@test_warn` capture tests\n-            occursin(\"LoadError: break me\", exc.msg) && rethrow()\n-            # The actual error that is thrown\n-            occursin(\"Failed to precompile FooBar2\", exc.msg) || rethrow()\n-        end\n+    try\n+        Base.require(Main, :FooBar2)\n+        error(\"the \\\"break me\\\" test failed\")\n+    catch exc\n+        isa(exc, Base.Precompilation.PkgPrecompileError) || rethrow()\n+        occursin(\"Failed to precompile FooBar2\", exc.msg) || rethrow()\n+        # The LoadError is printed to stderr in the precompilepkgs worker and captured in the PkgPrecompileError msg\n+        occursin(\"LoadError: break me\", exc.msg) || rethrow()\n+    end\n \n     # Test that trying to eval into closed modules during precompilation is an error\n     FooBar3_file = joinpath(dir, \"FooBar3.jl\")\n@@ -707,11 +707,12 @@ precompile_test_harness(false) do dir\n         $code\n         end\n         \"\"\")\n-        @test_warn \"Evaluation into the closed module `Base` breaks incremental compilation\" try\n-                Base.require(Main, :FooBar3)\n-            catch exc\n-                isa(exc, ErrorException) || rethrow()\n-            end\n+        try\n+            Base.require(Main, :FooBar3)\n+        catch exc\n+            isa(exc, Base.Precompilation.PkgPrecompileError) || rethrow()\n+            occursin(\"Evaluation into the closed module `Base` breaks incremental compilation\", exc.msg) || rethrow()\n+        end\n     end\n \n     # Test transitive dependency for #21266\n@@ -1524,11 +1525,11 @@ end\n     test_workers = addprocs(1)\n     push!(test_workers, myid())\n     save_cwd = pwd()\n-    temp_path = mktempdir()\n+    temp_path = mkdepottempdir()\n     try\n         cd(temp_path)\n         load_path = mktempdir(temp_path)\n-        load_cache_path = mktempdir(temp_path)\n+        load_cache_path = mkdepottempdir(temp_path)\n \n         ModuleA = :Issue19960A\n         ModuleB = :Issue19960B\n@@ -1576,11 +1577,6 @@ end\n         end\n     finally\n         cd(save_cwd)\n-        try\n-            rm(temp_path, recursive=true)\n-        catch err\n-            @show err\n-        end\n         pop!(test_workers) # remove myid\n         rmprocs(test_workers)\n     end\n@@ -2496,6 +2492,46 @@ precompile_test_harness(\"Package top-level load itself\") do load_path\n     end\n end\n \n+precompile_test_harness(\"Package precompilation works without manifest\") do load_path\n+    pkg_dir = joinpath(load_path, \"TestPkgNoManifest\")\n+    mkpath(pkg_dir)\n+\n+    # Create Project.toml with stdlib dependencies\n+    write(joinpath(pkg_dir, \"Project.toml\"), \"\"\"\n+        name = \"TestPkgNoManifest\"\n+        uuid = \"f47a8e44-5f82-4c5c-9076-4b4e8b7e8e8e\"\n+        version = \"0.1.0\"\n+\n+        [deps]\n+        Test = \"8dfed614-e22c-5e08-85e1-65c5234f0b40\"\n+        Random = \"9a3f8284-a2c9-5f02-9a11-845980a1fd5c\"\n+        \"\"\")\n+\n+    # Create src directory and main module file\n+    src_dir = joinpath(pkg_dir, \"src\")\n+    mkpath(src_dir)\n+    write(joinpath(src_dir, \"TestPkgNoManifest.jl\"), \"\"\"\n+        module TestPkgNoManifest\n+        end\n+        \"\"\")\n+\n+    old_active_project = Base.active_project()\n+    try\n+        # Activate the new package environment\n+        Base.set_active_project(joinpath(pkg_dir, \"Project.toml\"))\n+\n+        # Ensure there's no manifest file (this is the key to the test)\n+        manifest_path = joinpath(pkg_dir, \"Manifest.toml\")\n+        isfile(manifest_path) && rm(manifest_path)\n+\n+        # This should work without errors - precompiling a package with no manifest\n+        @eval using TestPkgNoManifest\n+    finally\n+        # Restore original load path and active project\n+        Base.set_active_project(old_active_project)\n+    end\n+end\n+\n # Verify that inference / caching was not performed for any macros in the sysimage\n let m = only(methods(Base.var\"@big_str\"))\n     @test m.specializations === Core.svec() || !isdefined(m.specializations, :cache)"
    },
    {
      "sha": "c9a7c98d262e049e23bc46d24985b2363edaa8a5",
      "filename": "test/precompile_utils.jl",
      "status": "modified",
      "additions": 4,
      "deletions": 14,
      "changes": 18,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fprecompile_utils.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fprecompile_utils.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fprecompile_utils.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -1,28 +1,18 @@\n # This file is a part of Julia. License is MIT: https://julialang.org/license\n \n+include(\"tempdepot.jl\")\n+\n function precompile_test_harness(@nospecialize(f), testset::String)\n     @testset \"$testset\" precompile_test_harness(f, true)\n end\n function precompile_test_harness(@nospecialize(f), separate::Bool=true)\n-    load_path = mktempdir()\n-    load_cache_path = separate ? mktempdir() : load_path\n+    load_path = mkdepottempdir()\n+    load_cache_path = separate ? mkdepottempdir() : load_path\n     try\n         pushfirst!(LOAD_PATH, load_path)\n         pushfirst!(DEPOT_PATH, load_cache_path)\n         f(load_path)\n     finally\n-        try\n-            rm(load_path, force=true, recursive=true)\n-        catch err\n-            @show err\n-        end\n-        if separate\n-            try\n-                rm(load_cache_path, force=true, recursive=true)\n-            catch err\n-                @show err\n-            end\n-        end\n         filter!((\u2260)(load_path), LOAD_PATH)\n         separate && filter!((\u2260)(load_cache_path), DEPOT_PATH)\n     end"
    },
    {
      "sha": "e8758365e3ff49ec79611894e036bc3ba24665f4",
      "filename": "test/relocatedepot.jl",
      "status": "modified",
      "additions": 7,
      "deletions": 6,
      "changes": 13,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Frelocatedepot.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Frelocatedepot.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Frelocatedepot.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -4,6 +4,7 @@ using Test\n \n \n include(\"testenv.jl\")\n+include(\"tempdepot.jl\")\n \n \n function test_harness(@nospecialize(fn); empty_load_path=true, empty_depot_path=true)\n@@ -32,7 +33,7 @@ if !test_relocated_depot\n \n         # insert @depot only once for first match\n         test_harness() do\n-            mktempdir() do dir\n+            mkdepottempdir() do dir\n                 pushfirst!(DEPOT_PATH, dir)\n                 if Sys.iswindows()\n                     # dirs start with a drive letter instead of a path separator\n@@ -46,7 +47,7 @@ if !test_relocated_depot\n \n             # 55340\n             empty!(DEPOT_PATH)\n-            mktempdir() do dir\n+            mkdepottempdir() do dir\n                 jlrc = joinpath(dir, \"julia-rc2\")\n                 jl   = joinpath(dir, \"julia\")\n                 mkdir(jl)\n@@ -61,7 +62,7 @@ if !test_relocated_depot\n \n         # deal with and without trailing path separators\n         test_harness() do\n-            mktempdir() do dir\n+            mkdepottempdir() do dir\n                 pushfirst!(DEPOT_PATH, dir)\n                 path = joinpath(dir, \"foo\")\n                 if isdirpath(DEPOT_PATH[1])\n@@ -176,7 +177,7 @@ if !test_relocated_depot\n         # add them as include_dependency()s to a new pkg Foo, which will be precompiled into depot3.\n         # After loading the include_dependency()s of Foo should refer to depot1 depot2 each.\n         test_harness() do\n-            mktempdir() do depot1\n+            mkdepottempdir() do depot1\n                 # precompile Example in depot1\n                 example1_root = joinpath(depot1, \"Example1\")\n                 mkpath(joinpath(example1_root, \"src\"))\n@@ -196,7 +197,7 @@ if !test_relocated_depot\n                 end\n                 pushfirst!(LOAD_PATH, depot1); pushfirst!(DEPOT_PATH, depot1)\n                 pkg = Base.identify_package(\"Example1\"); Base.require(pkg)\n-                mktempdir() do depot2\n+                mkdepottempdir() do depot2\n                     # precompile Example in depot2\n                     example2_root = joinpath(depot2, \"Example2\")\n                     mkpath(joinpath(example2_root, \"src\"))\n@@ -216,7 +217,7 @@ if !test_relocated_depot\n                     end\n                     pushfirst!(LOAD_PATH, depot2); pushfirst!(DEPOT_PATH, depot2)\n                     pkg = Base.identify_package(\"Example2\"); Base.require(pkg)\n-                    mktempdir() do depot3\n+                    mkdepottempdir() do depot3\n                         # precompile Foo in depot3\n                         open(joinpath(depot3, \"Module52161.jl\"), write=true) do io\n                             println(io, \"\"\""
    },
    {
      "sha": "833ecf232ed44096dfe22367eaebb103f1114c92",
      "filename": "test/syntax.jl",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fsyntax.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fsyntax.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fsyntax.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -2529,6 +2529,15 @@ end\n     @test ncalls_in_lowered(:((.+)(a, b .- (.^)(c, 2))), GlobalRef(Base, :BroadcastFunction)) == 0\n end\n \n+module M59008 # dotop with global LHS in macro\n+using Test\n+global a = 1\n+macro counter()\n+    :(a += 1)\n+end\n+@test @counter() === 2 === a\n+end\n+\n # issue #37656\n @test :(if true 'a' else 1 end) == Expr(:if, true, quote 'a' end, quote 1 end)\n "
    },
    {
      "sha": "18fad0cf15346209c2292951eafc466d135e0af1",
      "filename": "test/tempdepot.jl",
      "status": "added",
      "additions": 43,
      "deletions": 0,
      "changes": 43,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Ftempdepot.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Ftempdepot.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Ftempdepot.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -0,0 +1,43 @@\n+# This file is a part of Julia. License is MIT: https://julialang.org/license\n+\n+# This includes the `mkdepottempdir` and `rmdepot` functions, used to\n+# respectively create and remove temporary depots to use in tests.\n+# `mktempdir` and `rm` cannot be used because, on Windows, the DLLs generated by\n+# precompilation in the depots cannot be removed by the program that uses them.\n+# This file can be included multiple times in the same module if necessary,\n+# which can happen with unisolated test runs.\n+\n+if Sys.iswindows() && !@isdefined(DEPOTS_TOREMOVE)\n+    const DEPOTS_TOREMOVE = String[]\n+    atexit(() -> Base.Filesystem.temp_cleanup_postprocess(DEPOTS_TOREMOVE))\n+end\n+\n+function rmdepot(depot)\n+    try\n+        @static if Sys.iswindows() # on Windows, delay the rm\n+            push!(DEPOTS_TOREMOVE, depot)\n+        else # on the other systems, do it immediately\n+            rm(depot, force=true, recursive=true)\n+        end\n+    catch err\n+        @show err\n+    end\n+end\n+\n+function mkdepottempdir(f::Function, parent=tempdir(); prefix=\"jltestdepot_\")\n+    tmpdir = mktempdir(parent; prefix, cleanup=false)\n+    try\n+        f(tmpdir)\n+    finally\n+        rmdepot(tmpdir)\n+    end\n+end\n+function mkdepottempdir(parent=tempdir(); prefix=\"jltestdepot_\", cleanup=true)\n+    @static if Sys.iswindows()\n+        tmpdir = mktempdir(parent; prefix, cleanup=false)\n+        cleanup && push!(DEPOTS_TOREMOVE, tmpdir)\n+        tmpdir\n+    else\n+        mktempdir(parent; prefix, cleanup)\n+    end\n+end"
    },
    {
      "sha": "403f4f6c3a79886a52aa3dd22c10ce1a3151db5f",
      "filename": "test/trimming/trimmability.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Ftrimming%2Ftrimmability.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Ftrimming%2Ftrimmability.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Ftrimming%2Ftrimmability.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -50,5 +50,7 @@ function @main(args::Vector{String})::Cint\n     catch\n     end\n \n+    Base.donotdelete(reshape([1,2,3],:,1,1))\n+\n     return 0\n end"
    },
    {
      "sha": "2bd1bcab353c6d5185a3f14eb24f88d6d05b89bb",
      "filename": "test/worlds.jl",
      "status": "modified",
      "additions": 18,
      "deletions": 0,
      "changes": 18,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fworlds.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4f05d8d9f6691960662407c8f063faf65f765b05/test%2Fworlds.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fworlds.jl?ref=4f05d8d9f6691960662407c8f063faf65f765b05",
      "patch": "@@ -589,3 +589,21 @@ module C57316; import ..X57316.Y57316 as Z, .Z.Y57316 as W; end\n @test !isdefined(B57316, :X57316)\n @test !isdefined(C57316, :X57316)\n @test !isdefined(C57316, :Y57316)\n+\n+# issue #59429 - world age semantics with toplevel in macros\n+module M59429\n+using Test\n+macro new_enum(T::Symbol, args...)\n+   esc(quote\n+      @enum $T $(args...)\n+      function Base.hash(x::$T, h::UInt)\n+        rand(UInt)\n+      end\n+    end)\n+end\n+\n+@new_enum Foo59429 bar59429 baz59429\n+\n+# Test that the hash function works without world age issues\n+@test hash(bar59429, UInt(0)) isa UInt\n+end"
    }
  ]
}