{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/59972",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/59972/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/59972/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/59972/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/59972",
  "id": 3558296807,
  "node_id": "PR_kwDOABkWpM6v-VQU",
  "number": 59972,
  "title": "Get rid of all PointerType::get call with element type",
  "user": {
    "login": "yuyichao",
    "id": 712232,
    "node_id": "MDQ6VXNlcjcxMjIzMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/712232?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yuyichao",
    "html_url": "https://github.com/yuyichao",
    "followers_url": "https://api.github.com/users/yuyichao/followers",
    "following_url": "https://api.github.com/users/yuyichao/following{/other_user}",
    "gists_url": "https://api.github.com/users/yuyichao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yuyichao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yuyichao/subscriptions",
    "organizations_url": "https://api.github.com/users/yuyichao/orgs",
    "repos_url": "https://api.github.com/users/yuyichao/repos",
    "events_url": "https://api.github.com/users/yuyichao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yuyichao/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "vtjnash",
    "id": 330950,
    "node_id": "MDQ6VXNlcjMzMDk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/330950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vtjnash",
    "html_url": "https://github.com/vtjnash",
    "followers_url": "https://api.github.com/users/vtjnash/followers",
    "following_url": "https://api.github.com/users/vtjnash/following{/other_user}",
    "gists_url": "https://api.github.com/users/vtjnash/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vtjnash/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vtjnash/subscriptions",
    "organizations_url": "https://api.github.com/users/vtjnash/orgs",
    "repos_url": "https://api.github.com/users/vtjnash/repos",
    "events_url": "https://api.github.com/users/vtjnash/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vtjnash/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "vtjnash",
      "id": 330950,
      "node_id": "MDQ6VXNlcjMzMDk1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330950?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vtjnash",
      "html_url": "https://github.com/vtjnash",
      "followers_url": "https://api.github.com/users/vtjnash/followers",
      "following_url": "https://api.github.com/users/vtjnash/following{/other_user}",
      "gists_url": "https://api.github.com/users/vtjnash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vtjnash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vtjnash/subscriptions",
      "organizations_url": "https://api.github.com/users/vtjnash/orgs",
      "repos_url": "https://api.github.com/users/vtjnash/repos",
      "events_url": "https://api.github.com/users/vtjnash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vtjnash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2025-10-27T19:30:35Z",
  "updated_at": "2025-10-28T17:46:22Z",
  "closed_at": "2025-10-28T17:46:21Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/59972",
    "html_url": "https://github.com/JuliaLang/julia/pull/59972",
    "diff_url": "https://github.com/JuliaLang/julia/pull/59972.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/59972.patch",
    "merged_at": "2025-10-28T17:46:20Z"
  },
  "body": "This is now deprecated on LLVM 21.",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/59972/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/59972/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "f67268b1a0007a1efbd3cb72d87fd9e406ce6a9f",
      "filename": "src/ccall.cpp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/JuliaLang/julia/blob/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fccall.cpp",
      "raw_url": "https://github.com/JuliaLang/julia/raw/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fccall.cpp",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fccall.cpp?ref=32e1f4873e488e157daccf0c9a58ef04b8374b8d",
      "patch": "@@ -1299,7 +1299,7 @@ std::string generate_func_sig(const char *fname)\n             }\n             retattrs.addAttribute(Attribute::NoAlias);\n             paramattrs.push_back(AttributeSet::get(LLVMCtx, retattrs));\n-            fargt_sig.push_back(PointerType::get(lrt, 0));\n+            fargt_sig.push_back(PointerType::get(LLVMCtx, 0));\n             sret = 1;\n             prt = lrt;\n         }\n@@ -1357,7 +1357,7 @@ std::string generate_func_sig(const char *fname)\n             pat = t;\n         }\n         else if (byRef) {\n-            pat = PointerType::get(t, AddressSpace::Derived);\n+            pat = PointerType::get(LLVMCtx, AddressSpace::Derived);\n         }\n         else {\n             pat = abi->preferred_llvm_type((jl_datatype_t*)tti, false, LLVMCtx);"
    },
    {
      "sha": "e6e101b353149b8d03225bda8c26ccbb559be502",
      "filename": "src/cgutils.cpp",
      "status": "modified",
      "additions": 8,
      "deletions": 8,
      "changes": 16,
      "blob_url": "https://github.com/JuliaLang/julia/blob/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fcgutils.cpp",
      "raw_url": "https://github.com/JuliaLang/julia/raw/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fcgutils.cpp",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fcgutils.cpp?ref=32e1f4873e488e157daccf0c9a58ef04b8374b8d",
      "patch": "@@ -60,7 +60,7 @@ static Value *decay_derived(jl_codectx_t &ctx, Value *V)\n     if (T->getPointerAddressSpace() == AddressSpace::Derived)\n         return V;\n     // Once llvm deletes pointer element types, we won't need it here any more either.\n-    Type *NewT = PointerType::get(T, AddressSpace::Derived);\n+    Type *NewT = PointerType::get(T->getContext(), AddressSpace::Derived);\n     return ctx.builder.CreateAddrSpaceCast(V, NewT);\n }\n \n@@ -70,15 +70,15 @@ static Value *maybe_decay_tracked(jl_codectx_t &ctx, Value *V)\n     Type *T = V->getType();\n     if (T->getPointerAddressSpace() != AddressSpace::Tracked)\n         return V;\n-    Type *NewT = PointerType::get(T, AddressSpace::Derived);\n+    Type *NewT = PointerType::get(T->getContext(), AddressSpace::Derived);\n     return ctx.builder.CreateAddrSpaceCast(V, NewT);\n }\n \n static Value *mark_callee_rooted(jl_codectx_t &ctx, Value *V)\n {\n     assert(V->getType() == ctx.types().T_pjlvalue || V->getType() == ctx.types().T_prjlvalue);\n     return ctx.builder.CreateAddrSpaceCast(V,\n-        PointerType::get(ctx.types().T_jlvalue, AddressSpace::CalleeRooted));\n+        PointerType::get(V->getContext(), AddressSpace::CalleeRooted));\n }\n \n AtomicOrdering get_llvm_atomic_order(enum jl_memory_order order)\n@@ -707,13 +707,13 @@ static unsigned jl_field_align(jl_datatype_t *dt, size_t i)\n \n static llvm::StructType* get_jlmemoryref(llvm::LLVMContext &C, unsigned AS) {\n     return llvm::StructType::get(C, {\n-            llvm::PointerType::get(llvm::Type::getInt8Ty(C), AS),\n+            llvm::PointerType::get(C, AS),\n             JuliaType::get_prjlvalue_ty(C),\n             });\n }\n static llvm::StructType* get_jlmemoryboxedref(llvm::LLVMContext &C, unsigned AS) {\n     return llvm::StructType::get(C, {\n-            llvm::PointerType::get(JuliaType::get_prjlvalue_ty(C), AS),\n+            llvm::PointerType::get(C, AS),\n             JuliaType::get_prjlvalue_ty(C),\n             });\n }\n@@ -3813,7 +3813,7 @@ static void recursively_adjust_ptr_type(llvm::Value *Val, unsigned FromAS, unsig\n     for (auto *User : Val->users()) {\n         if (isa<GetElementPtrInst>(User)) {\n             GetElementPtrInst *Inst = cast<GetElementPtrInst>(User);\n-            Inst->mutateType(PointerType::get(Inst->getType(), ToAS));\n+            Inst->mutateType(PointerType::get(Inst->getContext(), ToAS));\n             recursively_adjust_ptr_type(Inst, FromAS, ToAS);\n         }\n         else if (isa<IntrinsicInst>(User)) {\n@@ -3822,7 +3822,7 @@ static void recursively_adjust_ptr_type(llvm::Value *Val, unsigned FromAS, unsig\n         }\n         else if (isa<BitCastInst>(User)) {\n             BitCastInst *Inst = cast<BitCastInst>(User);\n-            Inst->mutateType(PointerType::get(Inst->getType(), ToAS));\n+            Inst->mutateType(PointerType::get(Inst->getContext(), ToAS));\n             recursively_adjust_ptr_type(Inst, FromAS, ToAS);\n         }\n     }\n@@ -4956,7 +4956,7 @@ static Value *emit_memoryref_ptr(jl_codectx_t &ctx, const jl_cgval_t &ref, const\n     if (!GEPlist.empty()) {\n         for (auto &GEP : make_range(GEPlist.rbegin(), GEPlist.rend())) {\n             GetElementPtrInst *GEP2 = cast<GetElementPtrInst>(GEP->clone());\n-            GEP2->mutateType(PointerType::get(GEP->getResultElementType(), AS));\n+            GEP2->mutateType(PointerType::get(GEP->getContext(), AS));\n             GEP2->setOperand(GetElementPtrInst::getPointerOperandIndex(), data);\n             GEP2->setIsInBounds(true);\n             ctx.builder.Insert(GEP2);"
    },
    {
      "sha": "b8e1061728127ac39d6f006a6d817ac3f44af587",
      "filename": "src/codegen.cpp",
      "status": "modified",
      "additions": 38,
      "deletions": 42,
      "changes": 80,
      "blob_url": "https://github.com/JuliaLang/julia/blob/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fcodegen.cpp",
      "raw_url": "https://github.com/JuliaLang/julia/raw/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fcodegen.cpp",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fcodegen.cpp?ref=32e1f4873e488e157daccf0c9a58ef04b8374b8d",
      "patch": "@@ -304,23 +304,23 @@ struct jl_typecache_t {\n         // use pointer abi alignment for intptr_t\n         alignof_ptr = DL.getPointerABIAlignment(0);\n         T_jlvalue = JuliaType::get_jlvalue_ty(context);\n-        T_pjlvalue = PointerType::get(T_jlvalue, 0);\n-        T_prjlvalue = PointerType::get(T_jlvalue, AddressSpace::Tracked);\n-        T_ppjlvalue = PointerType::get(T_pjlvalue, 0);\n-        T_pprjlvalue = PointerType::get(T_prjlvalue, 0);\n+        T_pjlvalue = getPointerTy(context);\n+        T_prjlvalue = PointerType::get(context, AddressSpace::Tracked);\n+        T_ppjlvalue = getPointerTy(context);\n+        T_pprjlvalue = getPointerTy(context);\n \n         T_jlfunc = JuliaType::get_jlfunc_ty(context);\n         assert(T_jlfunc != NULL);\n         T_jlfuncparams = JuliaType::get_jlfuncparams_ty(context);\n         assert(T_jlfuncparams != NULL);\n \n         T_jlgenericmemory = StructType::get(context, { T_size, T_pprjlvalue /* [, real-owner] */ });\n-        Type *vaelts[] = { PointerType::get(getInt8Ty(context), AddressSpace::Loaded),\n-                           PointerType::get(T_jlgenericmemory, AddressSpace::Tracked),\n+        Type *vaelts[] = { PointerType::get(context, AddressSpace::Loaded),\n+                           PointerType::get(context, AddressSpace::Tracked),\n                            // dimsize[ndims]\n         };\n         T_jlarray = StructType::get(context, ArrayRef<Type*>(vaelts));\n-        T_pjlarray = PointerType::get(T_jlarray, 0);\n+        T_pjlarray = getPointerTy(context);\n     }\n };\n \n@@ -739,7 +739,7 @@ static const auto jlboxed_uint8_cache = new JuliaVariable{\n \n static const auto jlpgcstack_func = new JuliaFunction<>{\n     \"julia.get_pgcstack\",\n-    [](LLVMContext &C) { return FunctionType::get(PointerType::get(JuliaType::get_ppjlvalue_ty(C), 0), false); },\n+    [](LLVMContext &C) { return FunctionType::get(getPointerTy(C), false); },\n     nullptr,\n };\n \n@@ -770,7 +770,7 @@ static const auto jlsplatnew_func = new JuliaFunction<>{\n static const auto jlthrow_func = new JuliaFunction<>{\n     XSTR(jl_throw),\n     [](LLVMContext &C) { return FunctionType::get(getVoidTy(C),\n-            {PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted)}, false); },\n+            {PointerType::get(C, AddressSpace::CalleeRooted)}, false); },\n     get_attrs_noreturn,\n };\n static const auto jlerror_func = new JuliaFunction<>{\n@@ -794,34 +794,34 @@ static const auto jlatomicerror_func = new JuliaFunction<>{\n static const auto jltypeerror_func = new JuliaFunction<>{\n     XSTR(jl_type_error),\n     [](LLVMContext &C) { return FunctionType::get(getVoidTy(C),\n-            {getPointerTy(C), JuliaType::get_prjlvalue_ty(C), PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted)}, false); },\n+            {getPointerTy(C), JuliaType::get_prjlvalue_ty(C), PointerType::get(C, AddressSpace::CalleeRooted)}, false); },\n     get_attrs_noreturn,\n };\n static const auto jlundefvarerror_func = new JuliaFunction<>{\n     XSTR(jl_undefined_var_error),\n     [](LLVMContext &C) {\n-        Type *T = PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted);\n+        Type *T = PointerType::get(C, AddressSpace::CalleeRooted);\n         return FunctionType::get(getVoidTy(C), {T, T}, false);\n     },\n     get_attrs_noreturn,\n };\n static const auto jlhasnofield_func = new JuliaFunction<>{\n     XSTR(jl_has_no_field_error),\n     [](LLVMContext &C) { return FunctionType::get(getVoidTy(C),\n-            {PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted),\n-             PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted)}, false); },\n+            {PointerType::get(C, AddressSpace::CalleeRooted),\n+             PointerType::get(C, AddressSpace::CalleeRooted)}, false); },\n     get_attrs_noreturn,\n };\n static const auto jlboundserrorv_func = new JuliaFunction<TypeFnContextAndSizeT>{\n     XSTR(jl_bounds_error_ints),\n     [](LLVMContext &C, Type *T_size) { return FunctionType::get(getVoidTy(C),\n-            {PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted), PointerType::getUnqual(T_size->getContext()), T_size}, false); },\n+            {PointerType::get(C, AddressSpace::CalleeRooted), getPointerTy(C), T_size}, false); },\n     get_attrs_noreturn,\n };\n static const auto jlboundserror_func = new JuliaFunction<TypeFnContextAndSizeT>{\n     XSTR(jl_bounds_error_int),\n     [](LLVMContext &C, Type *T_size) { return FunctionType::get(getVoidTy(C),\n-            {PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted), T_size}, false); },\n+            {PointerType::get(C, AddressSpace::CalleeRooted), T_size}, false); },\n     get_attrs_noreturn,\n };\n static const auto jlvboundserror_func = new JuliaFunction<TypeFnContextAndSizeT>{\n@@ -834,15 +834,15 @@ static const auto jluboundserror_func = new JuliaFunction<TypeFnContextAndSizeT>\n     XSTR(jl_bounds_error_unboxed_int),\n     [](LLVMContext &C, Type *T_size) {\n         return FunctionType::get(getVoidTy(C),\n-            {PointerType::get(getInt8Ty(C), AddressSpace::Derived), JuliaType::get_pjlvalue_ty(C), T_size}, false); },\n+            {PointerType::get(C, AddressSpace::Derived), JuliaType::get_pjlvalue_ty(C), T_size}, false); },\n     get_attrs_noreturn,\n };\n static const auto jlcheckassign_func = new JuliaFunction<>{\n     XSTR(jl_checked_assignment),\n     [](LLVMContext &C) {\n         auto T_pjlvalue = JuliaType::get_pjlvalue_ty(C);\n         return FunctionType::get(getVoidTy(C),\n-            {T_pjlvalue, T_pjlvalue, T_pjlvalue, PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted)}, false); },\n+            {T_pjlvalue, T_pjlvalue, T_pjlvalue, PointerType::get(C, AddressSpace::CalleeRooted)}, false); },\n     nullptr,\n };\n static const auto jlcheckreplace_func = new JuliaFunction<>{\n@@ -869,7 +869,7 @@ static const auto jlcheckswap_func = new JuliaFunction<>{\n         auto T_pjlvalue = JuliaType::get_pjlvalue_ty(C);\n         auto T_prjlvalue = JuliaType::get_prjlvalue_ty(C);\n         return FunctionType::get(T_prjlvalue,\n-            {T_pjlvalue, T_pjlvalue, T_pjlvalue, PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted)}, false); },\n+            {T_pjlvalue, T_pjlvalue, T_pjlvalue, PointerType::get(C, AddressSpace::CalleeRooted)}, false); },\n     nullptr,\n };\n static const auto jlcheckassignonce_func = new JuliaFunction<>{\n@@ -878,7 +878,7 @@ static const auto jlcheckassignonce_func = new JuliaFunction<>{\n         auto T_pjlvalue = JuliaType::get_pjlvalue_ty(C);\n         auto T_prjlvalue = JuliaType::get_prjlvalue_ty(C);\n         return FunctionType::get(T_prjlvalue,\n-            {T_pjlvalue, T_pjlvalue, T_pjlvalue, PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted)}, false); },\n+            {T_pjlvalue, T_pjlvalue, T_pjlvalue, PointerType::get(C, AddressSpace::CalleeRooted)}, false); },\n     nullptr,\n };\n static const auto jldeclareglobal_func = new JuliaFunction<>{\n@@ -973,9 +973,8 @@ static const auto jlopaque_closure_call_func = new JuliaFunction<>{\n static const auto jlmethod_func = new JuliaFunction<>{\n     XSTR(jl_method_def),\n     [](LLVMContext &C) {\n-        auto T_jlvalue = JuliaType::get_jlvalue_ty(C);\n-        auto T_pjlvalue = PointerType::get(T_jlvalue, 0);\n-        auto T_prjlvalue = PointerType::get(T_jlvalue, AddressSpace::Tracked);\n+        auto T_pjlvalue = getPointerTy(C);\n+        auto T_prjlvalue = PointerType::get(C, AddressSpace::Tracked);\n         return FunctionType::get(T_prjlvalue,\n                 {T_prjlvalue, T_prjlvalue, T_prjlvalue, T_pjlvalue}, false);\n     },\n@@ -984,17 +983,16 @@ static const auto jlmethod_func = new JuliaFunction<>{\n static const auto jlgenericfunction_func = new JuliaFunction<>{\n     XSTR(jl_declare_const_gf),\n     [](LLVMContext &C) {\n-        auto T_jlvalue = JuliaType::get_jlvalue_ty(C);\n-        auto T_pjlvalue = PointerType::get(T_jlvalue, 0);\n-        auto T_prjlvalue = PointerType::get(T_jlvalue, AddressSpace::Tracked);\n+        auto T_pjlvalue = getPointerTy(C);\n+        auto T_prjlvalue = PointerType::get(C, AddressSpace::Tracked);\n         return FunctionType::get(T_prjlvalue, {T_pjlvalue, T_pjlvalue}, false);\n     },\n     nullptr,\n };\n static const auto jllockvalue_func = new JuliaFunction<>{\n     XSTR(jl_lock_value),\n     [](LLVMContext &C) { return FunctionType::get(getVoidTy(C),\n-            {PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted)}, false); },\n+            {PointerType::get(C, AddressSpace::CalleeRooted)}, false); },\n     [](LLVMContext &C) { return AttributeList::get(C,\n             AttributeSet(),\n             AttributeSet(),\n@@ -1003,7 +1001,7 @@ static const auto jllockvalue_func = new JuliaFunction<>{\n static const auto jlunlockvalue_func = new JuliaFunction<>{\n     XSTR(jl_unlock_value),\n     [](LLVMContext &C) { return FunctionType::get(getVoidTy(C),\n-            {PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::CalleeRooted)}, false); },\n+            {PointerType::get(C, AddressSpace::CalleeRooted)}, false); },\n     [](LLVMContext &C) { return AttributeList::get(C,\n             AttributeSet(),\n             AttributeSet(),\n@@ -1012,7 +1010,7 @@ static const auto jlunlockvalue_func = new JuliaFunction<>{\n static const auto jllockfield_func = new JuliaFunction<>{\n     XSTR(jl_lock_field),\n     [](LLVMContext &C) { return FunctionType::get(getVoidTy(C),\n-            {PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::Loaded)}, false); },\n+            {PointerType::get(C, AddressSpace::Loaded)}, false); },\n     [](LLVMContext &C) { return AttributeList::get(C,\n             AttributeSet(),\n             AttributeSet(),\n@@ -1021,7 +1019,7 @@ static const auto jllockfield_func = new JuliaFunction<>{\n static const auto jlunlockfield_func = new JuliaFunction<>{\n     XSTR(jl_unlock_field),\n     [](LLVMContext &C) { return FunctionType::get(getVoidTy(C),\n-            {PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::Loaded)}, false); },\n+            {PointerType::get(C, AddressSpace::Loaded)}, false); },\n     [](LLVMContext &C) { return AttributeList::get(C,\n             AttributeSet(),\n             AttributeSet(),\n@@ -1092,7 +1090,7 @@ static const auto jl_excstack_state_func = new JuliaFunction<TypeFnContextAndSiz\n static const auto jlegalx_func = new JuliaFunction<TypeFnContextAndSizeT>{\n     XSTR(jl_egal__unboxed),\n     [](LLVMContext &C, Type *T_size) {\n-        Type *T = PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::Derived);\n+        Type *T = PointerType::get(C, AddressSpace::Derived);\n         return FunctionType::get(getInt32Ty(C), {T, T, T_size}, false); },\n     [](LLVMContext &C) {\n         AttrBuilder FnAttrs(C);\n@@ -1106,9 +1104,8 @@ static const auto jlegalx_func = new JuliaFunction<TypeFnContextAndSizeT>{\n static const auto jl_alloc_obj_func = new JuliaFunction<TypeFnContextAndSizeT>{\n     \"julia.gc_alloc_obj\",\n     [](LLVMContext &C, Type *T_size) {\n-        auto T_jlvalue = JuliaType::get_jlvalue_ty(C);\n-        auto T_prjlvalue = PointerType::get(T_jlvalue, AddressSpace::Tracked);\n-        auto T_pjlvalue = PointerType::get(T_jlvalue, 0);\n+        auto T_pjlvalue = getPointerTy(C);\n+        auto T_prjlvalue = PointerType::get(C, AddressSpace::Tracked);\n         return FunctionType::get(T_prjlvalue,\n                 {T_pjlvalue, T_size, T_prjlvalue}, false);\n     },\n@@ -1131,9 +1128,8 @@ static const auto jl_alloc_obj_func = new JuliaFunction<TypeFnContextAndSizeT>{\n static const auto jl_alloc_genericmemory_unchecked_func = new JuliaFunction<TypeFnContextAndSizeT>{\n     XSTR(jl_alloc_genericmemory_unchecked),\n     [](LLVMContext &C, Type *T_size) {\n-        auto T_jlvalue = JuliaType::get_jlvalue_ty(C);\n-        auto T_prjlvalue = PointerType::get(T_jlvalue, AddressSpace::Tracked);\n-        auto T_pjlvalue = PointerType::get(T_jlvalue, 0);\n+        auto T_pjlvalue = getPointerTy(C);\n+        auto T_prjlvalue = PointerType::get(C, AddressSpace::Tracked);\n         return FunctionType::get(T_prjlvalue,\n                 {T_pjlvalue, T_size, T_pjlvalue}, false);\n     },\n@@ -1240,7 +1236,7 @@ static const auto jlapplytype_func = new JuliaFunction<>{\n static const auto jl_object_id__func = new JuliaFunction<TypeFnContextAndSizeT>{\n     XSTR(jl_object_id_),\n     [](LLVMContext &C, Type *T_size) { return FunctionType::get(T_size,\n-            {T_size, PointerType::get(getInt8Ty(C), AddressSpace::Derived)}, false); },\n+            {T_size, PointerType::get(C, AddressSpace::Derived)}, false); },\n     nullptr,\n };\n static const auto setjmp_func = new JuliaFunction<TypeFnContextAndTriple>{\n@@ -1336,7 +1332,7 @@ static const auto jlfieldisdefinedchecked_func = new JuliaFunction<TypeFnContext\n static const auto jlgetcfunctiontrampoline_func = new JuliaFunction<>{\n     XSTR(jl_get_cfunction_trampoline),\n     [](LLVMContext &C) {\n-        auto T_pjlvalue = PointerType::get(C, 0);\n+        auto T_pjlvalue = getPointerTy(C);\n         auto T_prjlvalue = PointerType::get(C, AddressSpace::Tracked);\n         auto T_derived = PointerType::get(C, AddressSpace::Derived);\n         return FunctionType::get(T_prjlvalue,\n@@ -1458,7 +1454,7 @@ static const auto gc_preserve_end_func = new JuliaFunction<> {\n static const auto pointer_from_objref_func = new JuliaFunction<>{\n     \"julia.pointer_from_objref\",\n     [](LLVMContext &C) { return FunctionType::get(JuliaType::get_pjlvalue_ty(C),\n-            {PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::Derived)}, false); },\n+            {PointerType::get(C, AddressSpace::Derived)}, false); },\n     [](LLVMContext &C) {\n         AttrBuilder FnAttrs(C);\n         FnAttrs.addMemoryAttr(MemoryEffects::none());\n@@ -1479,8 +1475,8 @@ static const auto gc_loaded_func = new JuliaFunction<>{\n     //  top:\n     //   %metadata GC base pointer is ptr(Tracked)\n     //   ret addrspacecast ptr to ptr(Loaded)\n-    [](LLVMContext &C) { return FunctionType::get(PointerType::get(JuliaType::get_prjlvalue_ty(C), AddressSpace::Loaded),\n-            {JuliaType::get_prjlvalue_ty(C), PointerType::get(JuliaType::get_prjlvalue_ty(C), 0)}, false); },\n+    [](LLVMContext &C) { return FunctionType::get(PointerType::get(C, AddressSpace::Loaded),\n+            {JuliaType::get_prjlvalue_ty(C), getPointerTy(C)}, false); },\n     [](LLVMContext &C) {\n         AttrBuilder FnAttrs(C);\n         FnAttrs.addAttribute(Attribute::NoSync);\n@@ -1539,7 +1535,7 @@ static const auto julia_call3 = new JuliaFunction<>{\n     \"julia.call3\",\n     [](LLVMContext &C) {\n         auto T_prjlvalue = JuliaType::get_prjlvalue_ty(C);\n-        Type *T = PointerType::get(JuliaType::get_jlvalue_ty(C), AddressSpace::Derived);\n+        Type *T = PointerType::get(C, AddressSpace::Derived);\n         return FunctionType::get(T_prjlvalue,\n             {getPointerTy(C),\n              T}, // %f"
    },
    {
      "sha": "48705e0c6934a0b946ee08dd437b6cba72ce9ca7",
      "filename": "src/llvm-final-gc-lowering.cpp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fllvm-final-gc-lowering.cpp",
      "raw_url": "https://github.com/JuliaLang/julia/raw/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fllvm-final-gc-lowering.cpp",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fllvm-final-gc-lowering.cpp?ref=32e1f4873e488e157daccf0c9a58ef04b8374b8d",
      "patch": "@@ -51,7 +51,7 @@ void FinalLowerGC::lowerPushGCFrame(CallInst *target, Function &F)\n             builder.CreateAlignedLoad(T_ppjlvalue, pgcstack, Align(sizeof(void*)), \"task.gcstack\"),\n             builder.CreatePointerCast(\n                     builder.CreateConstInBoundsGEP1_32(T_prjlvalue, gcframe, 1, \"frame.prev\"),\n-                    PointerType::get(T_ppjlvalue, 0)),\n+                    PointerType::get(T_ppjlvalue->getContext(), 0)),\n             Align(sizeof(void*)));\n     inst->setMetadata(LLVMContext::MD_tbaa, tbaa_gcframe);\n     builder.CreateAlignedStore("
    },
    {
      "sha": "9763837122cdc39ea8e12941706f778f9efc1d31",
      "filename": "src/llvm-propagate-addrspaces.cpp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/JuliaLang/julia/blob/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fllvm-propagate-addrspaces.cpp",
      "raw_url": "https://github.com/JuliaLang/julia/raw/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fllvm-propagate-addrspaces.cpp",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fllvm-propagate-addrspaces.cpp?ref=32e1f4873e488e157daccf0c9a58ef04b8374b8d",
      "patch": "@@ -163,14 +163,14 @@ Value *PropagateJuliaAddrspacesVisitor::LiftPointer(Module *M, Value *V, Instruc\n             Instruction *InstV = cast<Instruction>(V);\n             Instruction *NewV = InstV->clone();\n             ToInsert.push_back(std::make_pair(NewV, InstV));\n-            Type *NewRetTy = PointerType::get(InstV->getType(), allocaAddressSpace);\n+            Type *NewRetTy = PointerType::get(InstV->getContext(), allocaAddressSpace);\n             NewV->mutateType(NewRetTy);\n             LiftingMap[InstV] = NewV;\n             ToRevisit.push_back(NewV);\n         }\n     }\n     auto CollapseCastsAndLift = [&](Value *CurrentV, Instruction *InsertPt) -> Value * {\n-        PointerType *TargetType = PointerType::get(CurrentV->getType(), allocaAddressSpace);\n+        PointerType *TargetType = PointerType::get(CurrentV->getContext(), allocaAddressSpace);\n         while (!LiftingMap.count(CurrentV)) {\n             if (isa<BitCastInst>(CurrentV))\n                 CurrentV = cast<BitCastInst>(CurrentV)->getOperand(0);"
    },
    {
      "sha": "da63f73ea87f3b2d42ee6fa86e995b2ece40921b",
      "filename": "src/llvmcalltest.cpp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fllvmcalltest.cpp",
      "raw_url": "https://github.com/JuliaLang/julia/raw/32e1f4873e488e157daccf0c9a58ef04b8374b8d/src%2Fllvmcalltest.cpp",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fllvmcalltest.cpp?ref=32e1f4873e488e157daccf0c9a58ef04b8374b8d",
      "patch": "@@ -26,7 +26,7 @@ extern \"C\" {\n DLLEXPORT const char *MakeIdentityFunction(jl_value_t* jl_AnyTy) {\n     LLVMContext Ctx;\n     // FIXME: get TrackedTy via jl_type_to_llvm(Ctx, jl_AnyTy)\n-    Type *TrackedTy = PointerType::get(StructType::get(Ctx), AddressSpace::Tracked);\n+    Type *TrackedTy = PointerType::get(Ctx, AddressSpace::Tracked);\n     Module *M = new llvm::Module(\"shadow\", Ctx);\n     Function *F = Function::Create(\n         FunctionType::get("
    }
  ]
}