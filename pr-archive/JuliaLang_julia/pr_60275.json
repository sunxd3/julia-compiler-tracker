{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60275",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60275/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60275/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60275/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60275",
  "id": 3675744434,
  "node_id": "PR_kwDOABkWpM62FFTB",
  "number": 60275,
  "title": "loading: Clamp Julia syntax version from Manifest as well",
  "user": {
    "login": "Keno",
    "id": 1291671,
    "node_id": "MDQ6VXNlcjEyOTE2NzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1291671?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Keno",
    "html_url": "https://github.com/Keno",
    "followers_url": "https://api.github.com/users/Keno/followers",
    "following_url": "https://api.github.com/users/Keno/following{/other_user}",
    "gists_url": "https://api.github.com/users/Keno/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Keno/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Keno/subscriptions",
    "organizations_url": "https://api.github.com/users/Keno/orgs",
    "repos_url": "https://api.github.com/users/Keno/repos",
    "events_url": "https://api.github.com/users/Keno/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Keno/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2025-11-28T19:25:47Z",
  "updated_at": "2025-11-29T07:37:08Z",
  "closed_at": "2025-11-29T07:37:06Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60275",
    "html_url": "https://github.com/JuliaLang/julia/pull/60275",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60275.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60275.patch",
    "merged_at": "2025-11-29T07:37:06Z"
  },
  "body": "This is really a Pkg bug, where I forgot to implement the clamping when generating the manifest (and will submit a PR), but since we clamp and override when loading from a Project.toml, it seems reasonable to do the same for Manifest.toml. We never want to use a syntax version less than 1.13, so cut off that path as well, without assuming that Pkg.jl gets it right (too much manual editing of Manifest files happening with AI assistants).\r\n\r\nFixes #60273\r\nWritten by Claude.",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60275/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60275/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "32617b77ad72bc9417333f12d214aa2c6630c640",
      "filename": "base/loading.jl",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4b8350891aef6fa024a6996145abad2f23d9719b/base%2Floading.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4b8350891aef6fa024a6996145abad2f23d9719b/base%2Floading.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/base%2Floading.jl?ref=4b8350891aef6fa024a6996145abad2f23d9719b",
      "patch": "@@ -1222,6 +1222,10 @@ function explicit_manifest_entry_load_spec(manifest_file::String, pkg::PkgId, en\n     syntax_table = get(entry, \"syntax\", nothing)\n     if syntax_table !== nothing\n         syntax_version = VersionNumber(get(syntax_table, \"julia_version\", nothing))\n+        # Clamp to minimum supported syntax version\n+        if syntax_version <= NON_VERSIONED_SYNTAX\n+            syntax_version = NON_VERSIONED_SYNTAX\n+        end\n     end\n \n     # Resolve path"
    },
    {
      "sha": "4c0fe81876783a8877d0dbc623998ff34e3b17b4",
      "filename": "test/loading.jl",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4b8350891aef6fa024a6996145abad2f23d9719b/test%2Floading.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4b8350891aef6fa024a6996145abad2f23d9719b/test%2Floading.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Floading.jl?ref=4b8350891aef6fa024a6996145abad2f23d9719b",
      "patch": "@@ -1910,6 +1910,8 @@ module M58272_to end\n         @test invokelatest(getglobal, (@eval (using VersionedDep1; VersionedDep1)), :ver) == v\"1.13\"\n         # syntax.julia_version from Manifest = \"1.14\"\n         @test invokelatest(getglobal, (@eval (using VersionedDep2; VersionedDep2)), :ver) == v\"1.14\"\n+        # syntax.julia_version from Manifest = \"1.0\" should be clamped to \"1.13\"\n+        @test invokelatest(getglobal, (@eval (using VersionedDep3; VersionedDep3)), :ver) == v\"1.13\"\n     finally\n         Base.ACTIVE_PROJECT[] = old_active_project\n         copy!(LOAD_PATH, old_load_path)"
    },
    {
      "sha": "eeeedf53296c83be59e124e23f37ec534d6f7b23",
      "filename": "test/project/SyntaxVersioning/explicit/Manifest.toml",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4b8350891aef6fa024a6996145abad2f23d9719b/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FManifest.toml",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4b8350891aef6fa024a6996145abad2f23d9719b/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FManifest.toml",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FManifest.toml?ref=4b8350891aef6fa024a6996145abad2f23d9719b",
      "patch": "@@ -12,3 +12,8 @@ syntax.julia_version = \"1.13.0\"\n path = \"VersionedDep2\"\n uuid = \"e127e659-a899-4a00-b565-5b74face18ba\"\n syntax.julia_version = \"1.14.0\"\n+\n+[[deps.VersionedDep3]]\n+path = \"VersionedDep3\"\n+uuid = \"6ae26a88-8a9e-4c29-a00a-ea2b9a48e6e1\"\n+syntax.julia_version = \"1.0.0\""
    },
    {
      "sha": "52501f4979bf1ff99bd63d63ff352a2e46f2f75b",
      "filename": "test/project/SyntaxVersioning/explicit/Project.toml",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4b8350891aef6fa024a6996145abad2f23d9719b/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FProject.toml",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4b8350891aef6fa024a6996145abad2f23d9719b/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FProject.toml",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FProject.toml?ref=4b8350891aef6fa024a6996145abad2f23d9719b",
      "patch": "@@ -1,3 +1,4 @@\n [deps]\n VersionedDep1 = \"f08855a0-36cb-4a32-8ae5-a227b709c612\"\n VersionedDep2 = \"e127e659-a899-4a00-b565-5b74face18ba\"\n+VersionedDep3 = \"6ae26a88-8a9e-4c29-a00a-ea2b9a48e6e1\""
    },
    {
      "sha": "0fc0cf7d2189501bcb0eb534452726b353cfc444",
      "filename": "test/project/SyntaxVersioning/explicit/VersionedDep3/Project.toml",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4b8350891aef6fa024a6996145abad2f23d9719b/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FVersionedDep3%2FProject.toml",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4b8350891aef6fa024a6996145abad2f23d9719b/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FVersionedDep3%2FProject.toml",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FVersionedDep3%2FProject.toml?ref=4b8350891aef6fa024a6996145abad2f23d9719b",
      "patch": "@@ -0,0 +1,3 @@\n+name = \"VersionedDep3\"\n+uuid = \"6ae26a88-8a9e-4c29-a00a-ea2b9a48e6e1\"\n+syntax.julia_version = \"1.0\""
    },
    {
      "sha": "7ad86a56308c65c1d3a2b1f2b48bc3e69785a3a1",
      "filename": "test/project/SyntaxVersioning/explicit/VersionedDep3/src/VersionedDep3.jl",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/JuliaLang/julia/blob/4b8350891aef6fa024a6996145abad2f23d9719b/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FVersionedDep3%2Fsrc%2FVersionedDep3.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/4b8350891aef6fa024a6996145abad2f23d9719b/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FVersionedDep3%2Fsrc%2FVersionedDep3.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/test%2Fproject%2FSyntaxVersioning%2Fexplicit%2FVersionedDep3%2Fsrc%2FVersionedDep3.jl?ref=4b8350891aef6fa024a6996145abad2f23d9719b",
      "patch": "@@ -0,0 +1,3 @@\n+module VersionedDep3\n+    const ver = (@Base.Experimental.VERSION).syntax\n+end"
    }
  ]
}