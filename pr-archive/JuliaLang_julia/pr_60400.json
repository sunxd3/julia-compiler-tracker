{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60400",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60400/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60400/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60400/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60400",
  "id": 3735378176,
  "node_id": "PR_kwDOABkWpM65Lzdd",
  "number": 60400,
  "title": "syntax-versioning: Define behavior in scripts and REPL",
  "user": {
    "login": "Keno",
    "id": 1291671,
    "node_id": "MDQ6VXNlcjEyOTE2NzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1291671?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Keno",
    "html_url": "https://github.com/Keno",
    "followers_url": "https://api.github.com/users/Keno/followers",
    "following_url": "https://api.github.com/users/Keno/following{/other_user}",
    "gists_url": "https://api.github.com/users/Keno/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Keno/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Keno/subscriptions",
    "organizations_url": "https://api.github.com/users/Keno/orgs",
    "repos_url": "https://api.github.com/users/Keno/repos",
    "events_url": "https://api.github.com/users/Keno/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Keno/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2025-12-16T15:53:52Z",
  "updated_at": "2025-12-25T17:54:51Z",
  "closed_at": "2025-12-25T17:54:50Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60400",
    "html_url": "https://github.com/JuliaLang/julia/pull/60400",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60400.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60400.patch",
    "merged_at": "2025-12-25T17:54:49Z"
  },
  "body": "Syntax versioning is cued off of the `syntax.julia_version` entry in a package's Project.toml. But how should it behave in the REPL and in scripts? Unlike a package, the `Main` module does not have a well-defined Project associated with it - rather its loading behavior depends on the current active project.\r\n\r\nIt seems fairly clear that syntax versioning should also follow the active project, but what are the exact semantics? One possibility would be to check the active project's Project.toml every time we need to parse something. However, I think it would be somewhat surprising if the syntax version changed in the middle of a script due to a concurrent edit to the active Project.toml (at least in the absence of something like Revise).\r\n\r\nThis PR instead implements a ScopedValue-based latching mechanism that reads the syntax version:\r\n 1. At startup\r\n 2. For every REPL prompt\r\n\r\nOrdinary ScopedValue behavior determines what happens for e.g. tasks (i.e. a task started from one REPL prompt will continue using that prompt's syntax version for e.g. `include`'s), even if the active project changes in the meanwhile.\r\n\r\nNote that as a consequence of this, changing the active project in the middle of a script does not change the syntax version (not that it would anyway, because we parse the whole script before we eval it - but this makes it not take effect for `include` either).\r\n\r\nI think this is the most sane behavior. Other frontends that want to evaluate into Main can use the same mechanism as the REPL to decide on a policy that makes sense for their use cases.\r\n\r\nIt is possible we may want to extend the scoped value behavior to the active project itself as well, but it doesn't have the same TOCTOU issues that the syntax version has and scripts are relying on it being side-effecting, so it's not straightforward.\r\n\r\nFinally, this adjusts the creation of named environments to implicitly record the syntax version of the julia process that created the named environment. Of course, this is primarily supposed to catch the creation of the `v1.x` global default environments. That said, it's a bit odd that, if we launch 1.14 with an implicit `--project=@v1.13` and that environment does not exist, it would create that as a `1.14` syntax environment. Currently these versioned environments are not special, but maybe we should make them?",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60400/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60400/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0
}