{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60587",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60587/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60587/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60587/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60587",
  "id": 3789054080,
  "node_id": "PR_kwDOABkWpM677GCN",
  "number": 60587,
  "title": "[JuliaLowering] Mark internal lowering bindings as is_internal",
  "user": {
    "login": "aviatesk",
    "id": 40514306,
    "node_id": "MDQ6VXNlcjQwNTE0MzA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/40514306?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aviatesk",
    "html_url": "https://github.com/aviatesk",
    "followers_url": "https://api.github.com/users/aviatesk/followers",
    "following_url": "https://api.github.com/users/aviatesk/following{/other_user}",
    "gists_url": "https://api.github.com/users/aviatesk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aviatesk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aviatesk/subscriptions",
    "organizations_url": "https://api.github.com/users/aviatesk/orgs",
    "repos_url": "https://api.github.com/users/aviatesk/repos",
    "events_url": "https://api.github.com/users/aviatesk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aviatesk/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 250223102,
      "node_id": "MDU6TGFiZWwyNTAyMjMxMDI=",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/compiler:lowering",
      "name": "compiler:lowering",
      "color": "5319e7",
      "default": false,
      "description": "Syntax lowering (compiler front end, 2nd stage)"
    },
    {
      "id": 9763847389,
      "node_id": "LA_kwDOABkWpM8AAAACRfh83Q",
      "url": "https://api.github.com/repos/JuliaLang/julia/labels/JuliaLowering",
      "name": "JuliaLowering",
      "color": "144fbf",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2026-01-07T14:43:49Z",
  "updated_at": "2026-01-08T15:25:52Z",
  "closed_at": "2026-01-08T15:25:51Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60587",
    "html_url": "https://github.com/JuliaLang/julia/pull/60587",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60587.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60587.patch",
    "merged_at": "2026-01-08T15:25:50Z"
  },
  "body": "EDIT: It turned out that the struct local bindings are actually not \"internal\" after all, since it can appear on source level as well in cases like `struct A; x::Ref{A}; end`. This PR now only adds `is_internal` flag for the kwname binding.\r\n\r\nKeyword functions and struct definitions introduce local bindings for internal purposes that are never actually used in source code. This complicates binding usage computation in JETLS.\r\nMark these bindings as `is_internal` so the language server can safely ignore them.\r\n\r\n- kwcall reflection bindings: declared for reflection but never assigned\r\n- struct local bindings: temporary variable for struct type definition",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60587/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60587/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "e224b8f0fcd22d123c422162e571f69d4ed21a27",
      "filename": "JuliaLowering/src/desugaring.jl",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/84fd6d0ad20f95c48ac5c53f83c9b35766712616/JuliaLowering%2Fsrc%2Fdesugaring.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/84fd6d0ad20f95c48ac5c53f83c9b35766712616/JuliaLowering%2Fsrc%2Fdesugaring.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/JuliaLowering%2Fsrc%2Fdesugaring.jl?ref=84fd6d0ad20f95c48ac5c53f83c9b35766712616",
      "patch": "@@ -2797,7 +2797,7 @@ function keyword_function_defs(ctx, srcref, callex_srcref, name_str, typevar_nam\n         for n in kw_names\n             # If not using slots for the keyword argument values, still declare\n             # them for reflection purposes.\n-            push!(kw_val_stmts, @ast ctx n [K\"local\" n])\n+            push!(kw_val_stmts, @ast ctx n [K\"local\"(meta=CompileHints(:is_internal, true)) n])\n         end\n         kw_val_vars = SyntaxList(ctx)\n         for val in kw_values"
    },
    {
      "sha": "cb709796e97e15b9c3d7d3e924e104adcfac0c86",
      "filename": "JuliaLowering/src/scope_analysis.jl",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/JuliaLang/julia/blob/84fd6d0ad20f95c48ac5c53f83c9b35766712616/JuliaLowering%2Fsrc%2Fscope_analysis.jl",
      "raw_url": "https://github.com/JuliaLang/julia/raw/84fd6d0ad20f95c48ac5c53f83c9b35766712616/JuliaLowering%2Fsrc%2Fscope_analysis.jl",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/JuliaLowering%2Fsrc%2Fscope_analysis.jl?ref=84fd6d0ad20f95c48ac5c53f83c9b35766712616",
      "patch": "@@ -194,7 +194,11 @@ function _find_scope_decls!(ctx, scope, ex)\n     if k === K\"local\" && kind(ex[1]) === K\"Identifier\"\n         var_k = getmeta(ex, :is_destructured_arg, false) ?\n             :destructured_arg : :local\n-        maybe_declare_in_scope!(ctx, scope, ex[1], var_k)\n+        if getmeta(ex, :is_internal, false)\n+            declare_in_scope!(ctx, scope, ex[1], var_k; is_internal=true)\n+        else\n+            maybe_declare_in_scope!(ctx, scope, ex[1], var_k)\n+        end\n     elseif k === K\"global\" && kind(ex[1]) === K\"Identifier\"\n         maybe_declare_in_scope!(ctx, scope, ex[1], :global)\n     elseif k in KSet\"= constdecl assign_or_constdecl_if_global function_decl\""
    }
  ]
}