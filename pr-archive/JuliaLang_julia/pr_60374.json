{
  "url": "https://api.github.com/repos/JuliaLang/julia/issues/60374",
  "repository_url": "https://api.github.com/repos/JuliaLang/julia",
  "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/60374/labels{/name}",
  "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/60374/comments",
  "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/60374/events",
  "html_url": "https://github.com/JuliaLang/julia/pull/60374",
  "id": 3724819575,
  "node_id": "PR_kwDOABkWpM64pD7p",
  "number": 60374,
  "title": "release-1.12:  Revert \"build: More msys2 fixes (#59028)\"",
  "user": {
    "login": "KristofferC",
    "id": 1282691,
    "node_id": "MDQ6VXNlcjEyODI2OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1282691?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/KristofferC",
    "html_url": "https://github.com/KristofferC",
    "followers_url": "https://api.github.com/users/KristofferC/followers",
    "following_url": "https://api.github.com/users/KristofferC/following{/other_user}",
    "gists_url": "https://api.github.com/users/KristofferC/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/KristofferC/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/KristofferC/subscriptions",
    "organizations_url": "https://api.github.com/users/KristofferC/orgs",
    "repos_url": "https://api.github.com/users/KristofferC/repos",
    "events_url": "https://api.github.com/users/KristofferC/events{/privacy}",
    "received_events_url": "https://api.github.com/users/KristofferC/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2025-12-12T21:00:21Z",
  "updated_at": "2025-12-15T11:20:40Z",
  "closed_at": "2025-12-15T11:20:38Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/JuliaLang/julia/pulls/60374",
    "html_url": "https://github.com/JuliaLang/julia/pull/60374",
    "diff_url": "https://github.com/JuliaLang/julia/pull/60374.diff",
    "patch_url": "https://github.com/JuliaLang/julia/pull/60374.patch",
    "merged_at": "2025-12-15T11:20:38Z"
  },
  "body": "causes `USE_BINARYBUILDER=0` to fail.",
  "reactions": {
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/60374/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/60374/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "score": 1.0,
  "files": [
    {
      "sha": "81b7e47cdf2cfad290ee17da7e44a231d6c82ebf",
      "filename": "contrib/mac/app/Makefile",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/JuliaLang/julia/blob/543cd2ebaecd0005a06f24f9581d28ee519c6091/contrib%2Fmac%2Fapp%2FMakefile",
      "raw_url": "https://github.com/JuliaLang/julia/raw/543cd2ebaecd0005a06f24f9581d28ee519c6091/contrib%2Fmac%2Fapp%2FMakefile",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/contrib%2Fmac%2Fapp%2FMakefile?ref=543cd2ebaecd0005a06f24f9581d28ee519c6091",
      "patch": "@@ -47,8 +47,8 @@ dmg/$(APP_NAME): startup.applescript julia.icns\n \tplutil -insert  CFBundleVersion            -string \"$(JULIA_VERSION_OPT_COMMIT)\" $@/Contents/Info.plist\n \tplutil -insert  NSHumanReadableCopyright   -string \"$(APP_COPYRIGHT)\" $@/Contents/Info.plist\n \t-mkdir -p $@/Contents/Resources/julia\n-\t$(MAKE) -C $(JULIAHOME) binary-dist\n-\t$(TAR) -xzf $(JULIAHOME)/$(JULIA_BINARYDIST_FILENAME).tar.gz -C $@/Contents/Resources/julia --strip-components 1\n+\tmake -C $(JULIAHOME) binary-dist\n+\ttar zxf $(JULIAHOME)/$(JULIA_BINARYDIST_FILENAME).tar.gz -C $@/Contents/Resources/julia --strip-components 1\n \tfind $@/Contents/Resources/julia -type f -exec chmod -w {} \\;\n \t# Even though the tarball may already be signed, we re-sign here to make it easier to add\n \t# unsigned executables (like the app launcher) and whatnot, without needing to maintain lists"
    },
    {
      "sha": "8b17ae6d70424f7449aa9cce7ba4d6993b4f9baf",
      "filename": "deps/libgit2.mk",
      "status": "modified",
      "additions": 1,
      "deletions": 10,
      "changes": 11,
      "blob_url": "https://github.com/JuliaLang/julia/blob/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Flibgit2.mk",
      "raw_url": "https://github.com/JuliaLang/julia/raw/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Flibgit2.mk",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Flibgit2.mk?ref=543cd2ebaecd0005a06f24f9581d28ee519c6091",
      "patch": "@@ -4,7 +4,6 @@ ifneq ($(USE_BINARYBUILDER_LIBGIT2),1)\n LIBGIT2_GIT_URL := https://github.com/libgit2/libgit2.git\n LIBGIT2_TAR_URL = https://api.github.com/repos/libgit2/libgit2/tarball/$1\n $(eval $(call git-external,libgit2,LIBGIT2,CMakeLists.txt,,$(SRCCACHE)))\n-$(SRCCACHE)/$(LIBGIT2_SRC_DIR)/source-extracted: $(MSYS_NONEXISTENT_SYMLINK_TARGET_FIX)\n \n ifeq ($(USE_SYSTEM_LIBSSH2), 0)\n $(BUILDDIR)/$(LIBGIT2_SRC_DIR)/build-configured: | $(build_prefix)/manifest/libssh2\n@@ -14,15 +13,7 @@ ifeq ($(USE_SYSTEM_OPENSSL), 0)\n $(BUILDDIR)/$(LIBGIT2_SRC_DIR)/build-configured: | $(build_prefix)/manifest/openssl\n endif\n \n-ifeq ($(USE_SYSTEM_PCRE), 0)\n-$(BUILDDIR)/$(LIBGIT2_SRC_DIR)/build-configured: | $(build_prefix)/manifest/pcre\n-endif\n-\n-ifeq ($(USE_SYSTEM_ZLIB), 0)\n-$(BUILDDIR)/$(LIBGIT2_SRC_DIR)/build-configured: | $(build_prefix)/manifest/zlib\n-endif\n-\n-LIBGIT2_OPTS := $(CMAKE_COMMON) -DCMAKE_BUILD_TYPE=Release -DUSE_THREADS=ON -DUSE_BUNDLED_ZLIB=OFF -DUSE_SSH=ON -DREGEX_BACKEND=pcre2 -DBUILD_CLI=OFF -DBUILD_TESTS=OFF\n+LIBGIT2_OPTS := $(CMAKE_COMMON) -DCMAKE_BUILD_TYPE=Release -DUSE_THREADS=ON -DUSE_BUNDLED_ZLIB=ON -DUSE_SSH=ON -DBUILD_CLI=OFF\n ifeq ($(OS),WINNT)\n LIBGIT2_OPTS += -DWIN32=ON -DMINGW=ON\n ifeq ($(USE_SYSTEM_LIBSSH2), 0)"
    },
    {
      "sha": "661e26516c828ade94931debcad364ac40732786",
      "filename": "deps/libssh2.mk",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/JuliaLang/julia/blob/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Flibssh2.mk",
      "raw_url": "https://github.com/JuliaLang/julia/raw/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Flibssh2.mk",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Flibssh2.mk?ref=543cd2ebaecd0005a06f24f9581d28ee519c6091",
      "patch": "@@ -17,6 +17,9 @@ endif\n \n ifeq ($(OS),WINNT)\n LIBSSH2_OPTS += -DCRYPTO_BACKEND=WinCNG -DENABLE_ZLIB_COMPRESSION=OFF\n+ifeq ($(BUILD_OS),WINNT)\n+LIBSSH2_OPTS += -G\"MSYS Makefiles\"\n+endif\n else\n LIBSSH2_OPTS += -DCRYPTO_BACKEND=OpenSSL -DENABLE_ZLIB_COMPRESSION=OFF\n LIBSSH2_OPTS += -DOPENSSL_ROOT_DIR=$(build_prefix)\n@@ -35,7 +38,7 @@ LIBSSH2_SRC_PATH := $(SRCCACHE)/$(LIBSSH2_SRC_DIR)\n $(BUILDDIR)/$(LIBSSH2_SRC_DIR)/build-configured: $(LIBSSH2_SRC_PATH)/source-extracted\n \tmkdir -p $(dir $@)\n \tcd $(dir $@) && \\\n-\t$(CMAKE) $(CMAKE_GENERATOR_COMMAND) $(dir $<) $(LIBSSH2_OPTS)\n+\t$(CMAKE) $(dir $<) $(LIBSSH2_OPTS)\n \techo 1 > $@\n \n $(BUILDDIR)/$(LIBSSH2_SRC_DIR)/build-compiled: $(BUILDDIR)/$(LIBSSH2_SRC_DIR)/build-configured"
    },
    {
      "sha": "eacabac55e34fc7093de9e6fbe313e2b40887eae",
      "filename": "deps/libuv.mk",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Flibuv.mk",
      "raw_url": "https://github.com/JuliaLang/julia/raw/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Flibuv.mk",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Flibuv.mk?ref=543cd2ebaecd0005a06f24f9581d28ee519c6091",
      "patch": "@@ -4,7 +4,7 @@ LIBUV_GIT_URL:=https://github.com/JuliaLang/libuv.git\n LIBUV_TAR_URL=https://api.github.com/repos/JuliaLang/libuv/tarball/$1\n $(eval $(call git-external,libuv,LIBUV,configure,,$(SRCCACHE)))\n \n-UV_CFLAGS := -O2 -DBUILDING_UV_SHARED=1\n+UV_CFLAGS := -O2\n \n UV_FLAGS := LDFLAGS=\"$(LDFLAGS) $(CLDFLAGS) -v\"\n UV_FLAGS += CFLAGS=\"$(CFLAGS) $(UV_CFLAGS) $(SANITIZE_OPTS)\""
    },
    {
      "sha": "09dd4f187d6113b128438224ae171d2d8cf62144",
      "filename": "deps/llvm.mk",
      "status": "modified",
      "additions": 0,
      "deletions": 8,
      "changes": 8,
      "blob_url": "https://github.com/JuliaLang/julia/blob/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Fllvm.mk",
      "raw_url": "https://github.com/JuliaLang/julia/raw/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Fllvm.mk",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Fllvm.mk?ref=543cd2ebaecd0005a06f24f9581d28ee519c6091",
      "patch": "@@ -7,14 +7,6 @@ ifneq ($(USE_BINARYBUILDER_LLVM), 1)\n LLVM_GIT_URL:=https://github.com/JuliaLang/llvm-project.git\n LLVM_TAR_URL=https://api.github.com/repos/JuliaLang/llvm-project/tarball/$1\n $(eval $(call git-external,llvm,LLVM,CMakeLists.txt,,$(SRCCACHE)))\n-# LLVM's tarball contains symlinks to non-existent targets. This breaks the\n-# the default msys strategy `deepcopy` symlink strategy. To workaround this,\n-# switch to `native` which tries native windows symlinks (possible if the\n-# machine is in developer mode) - or if not, falls back to cygwin-style\n-# symlinks. We don't particularly care either way - we just need to symlinks\n-# to succeed. We could guard this by a uname check, but it's harmless elsewhere,\n-# so let's not incur the additional overhead.\n-$(SRCCACHE)/$(LLVM_SRC_DIR)/source-extracted: $(MSYS_NONEXISTENT_SYMLINK_TARGET_FIX)\n \n LLVM_BUILDDIR := $(BUILDDIR)/$(LLVM_SRC_DIR)\n LLVM_BUILDDIR_withtype := $(LLVM_BUILDDIR)/build_$(LLVM_BUILDTYPE)"
    },
    {
      "sha": "705303432c2c6c1a13b697d75204fdc4ba02ae47",
      "filename": "deps/openssl.mk",
      "status": "modified",
      "additions": 10,
      "deletions": 8,
      "changes": 18,
      "blob_url": "https://github.com/JuliaLang/julia/blob/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Fopenssl.mk",
      "raw_url": "https://github.com/JuliaLang/julia/raw/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Fopenssl.mk",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Fopenssl.mk?ref=543cd2ebaecd0005a06f24f9581d28ee519c6091",
      "patch": "@@ -59,7 +59,7 @@ $(BUILDDIR)/openssl-$(OPENSSL_VER)/build-configured: $(SRCCACHE)/openssl-$(OPENS\n \tmkdir -p $(dir $@)\n \tcd $(dir $@) && \\\n         CC=\"$(CC) $(SANITIZE_OPTS)\" CXX=\"$(CXX) $(SANITIZE_OPTS)\" LDFLAGS=\"$(LDFLAGS) $(RPATH_ESCAPED_ORIGIN) $(SANITIZE_LDFLAGS)\" \\\n-\t$(dir $<)/Configure shared --prefix=$(abspath $(build_prefix)) --libdir=$(abspath $(build_libdir)) $(OPENSSL_TARGET)\n+\t$(dir $<)/Configure shared --prefix=$(abspath $(build_prefix)) $(OPENSSL_TARGET)\n \techo 1 > $@\n \n $(BUILDDIR)/openssl-$(OPENSSL_VER)/build-compiled: $(BUILDDIR)/openssl-$(OPENSSL_VER)/build-configured\n@@ -75,16 +75,18 @@ endif\n # Override bindir and only install runtime libraries, otherwise they'll go into build_depsbindir.\n OPENSSL_INSTALL = \\\n \tmkdir -p $2$$(build_shlibdir) && \\\n-\t$$(MAKE) -C $1 install_runtime_libs $$(MAKE_COMMON) bindir=$$(build_shlibdir) $3 DESTDIR=\"$2\"\n+\t$$(MAKE) -C $1 install_dev $$(MAKE_COMMON) bindir=$$(build_shlibdir) $3 DESTDIR=\"$2\"\n+\n+OPENSSL_POST_INSTALL := \\\n+\t$(WIN_MAKE_HARD_LINK) $(build_bindir)/libcrypto-*.dll $(build_bindir)/libcrypto.dll && \\\n+\t$(WIN_MAKE_HARD_LINK) $(build_bindir)/libssl-*.dll $(build_bindir)/libssl.dll && \\\n+\t$(INSTALL_NAME_CMD)libcrypto.$(SHLIB_EXT) $(build_shlibdir)/libcrypto.$(SHLIB_EXT) && \\\n+\t$(INSTALL_NAME_CMD)libssl.$(SHLIB_EXT) $(build_shlibdir)/libssl.$(SHLIB_EXT) && \\\n+\t$(INSTALL_NAME_CHANGE_CMD) $(build_shlibdir)/libcrypto.3.dylib @rpath/libcrypto.$(SHLIB_EXT) $(build_shlibdir)/libssl.$(SHLIB_EXT)\n \n $(eval $(call staged-install, \\\n \topenssl,openssl-$(OPENSSL_VER), \\\n-\tOPENSSL_INSTALL,,, \\\n-\t$$(WIN_MAKE_HARD_LINK) $(build_bindir)/libcrypto-*.dll $(build_bindir)/libcrypto.dll && \\\n-\t$$(WIN_MAKE_HARD_LINK) $(build_bindir)/libssl-*.dll $(build_bindir)/libssl.dll && \\\n-\t$$(INSTALL_NAME_CMD)libcrypto.$$(SHLIB_EXT) $$(build_shlibdir)/libcrypto.$$(SHLIB_EXT) && \\\n-\t$$(INSTALL_NAME_CMD)libssl.$$(SHLIB_EXT) $$(build_shlibdir)/libssl.$$(SHLIB_EXT) && \\\n-\t$$(INSTALL_NAME_CHANGE_CMD) $$(build_shlibdir)/libcrypto.3.dylib @rpath/libcrypto.$$(SHLIB_EXT) $$(build_shlibdir)/libssl.$$(SHLIB_EXT)))\n+\tOPENSSL_INSTALL,,,$(OPENSSL_POST_INSTALL)))\n \n clean-openssl:\n \t-rm -f $(BUILDDIR)/-openssl-$(OPENSSL_VER)/build-configured $(BUILDDIR)/-openssl-$(OPENSSL_VER)/build-compiled"
    },
    {
      "sha": "01b57316f9d1a5ff69def5f45588d21eacc50b70",
      "filename": "deps/tools/common.mk",
      "status": "modified",
      "additions": 2,
      "deletions": 22,
      "changes": 24,
      "blob_url": "https://github.com/JuliaLang/julia/blob/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Ftools%2Fcommon.mk",
      "raw_url": "https://github.com/JuliaLang/julia/raw/543cd2ebaecd0005a06f24f9581d28ee519c6091/deps%2Ftools%2Fcommon.mk",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/deps%2Ftools%2Fcommon.mk?ref=543cd2ebaecd0005a06f24f9581d28ee519c6091",
      "patch": "@@ -59,6 +59,7 @@ CMAKE_COMMON += -DCMAKE_SYSTEM_NAME=Windows\n CMAKE_COMMON += -DCMAKE_RC_COMPILER=\"$$(which $(CROSS_COMPILE)windres)\"\n endif\n \n+# For now this is LLVM specific, but I expect it won't be in the future\n ifeq ($(CMAKE_GENERATOR),Ninja)\n CMAKE_GENERATOR_COMMAND := -G Ninja\n else ifeq ($(CMAKE_GENERATOR),make)\n@@ -67,27 +68,6 @@ else\n $(error Unknown CMake generator '$(CMAKE_GENERATOR)'. Options are 'Ninja' and 'make')\n endif\n \n-ifneq (,$(findstring MINGW,$(RAW_BUILD_OS)))\n-ifneq (,$(shell ldd $(shell which cmake) | grep msys-2.0.dll))\n-# Detect MSYS2 with cygwin CMake rather than MinGW cmake - the former fails to\n-# properly drive MinGW tools\n-override CMAKE := echo \"ERROR: CMake is Cygwin CMake, not MinGW CMake. Build will fail. Use 'pacman -S mingw-w64-{i686,x86_64}-cmake'.\"; exit 1; $(CMAKE)\n-endif\n-# In our setup, CMAKE_INSTALL_PREFIX is a relative path inside usr-staging.\n-# We do not want this converted to a windows path, because our make system\n-# assumes it to be relative to msys `/`.\n-override CMAKE := MSYS2_ARG_CONV_EXCL=\"-DCMAKE_INSTALL_PREFIX\" $(CMAKE)\n-endif\n-\n-# Some dependencies' tarballs contains symlinks to non-existent targets. This breaks the\n-# the default msys strategy `deepcopy` symlink strategy. To workaround this,\n-# switch to `native` which tries native windows symlinks (possible if the\n-# machine is in developer mode) - or if not, falls back to cygwin-style\n-# symlinks. We don't particularly care either way - we just need to symlinks\n-# to succeed. We could guard this by a uname check, but it's harmless elsewhere,\n-# so let's not incur the additional overhead.\n-MSYS_NONEXISTENT_SYMLINK_TARGET_FIX := export MSYS=winsymlinks:native\n-\n # If the top-level Makefile is called with environment variables,\n # they will override the values passed above to ./configure\n MAKE_COMMON := DESTDIR=\"\" prefix=$(build_prefix) bindir=$(build_depsbindir) libdir=$(build_libdir) shlibdir=$(build_shlibdir) libexecdir=$(build_libexecdir) datarootdir=$(build_datarootdir) includedir=$(build_includedir) sysconfdir=$(build_sysconfdir) O=\n@@ -164,7 +144,7 @@ upper = $(shell echo $1 | tr a-z A-Z)\n # this rule ensures that make install is more nearly atomic\n # so it's harder to get half-installed (or half-reinstalled) dependencies\n # # and enables sharing deps compiles, uninstall, and fast reinstall\n-MAKE_INSTALL = MSYS2_ARG_CONV_EXCL=\"prefix=\" $$(MAKE) -C $1 install $$(MAKE_COMMON) $3 DESTDIR=\"$2\"\n+MAKE_INSTALL = +$$(MAKE) -C $1 install $$(MAKE_COMMON) $3 DESTDIR=\"$2\"\n \n define SHLIBFILE_INSTALL\n \tmkdir -p $2/$$(build_shlibdir)"
    },
    {
      "sha": "e859acc765354b412ea21b6efac446529ac2cb5d",
      "filename": "src/Makefile",
      "status": "modified",
      "additions": 5,
      "deletions": 7,
      "changes": 12,
      "blob_url": "https://github.com/JuliaLang/julia/blob/543cd2ebaecd0005a06f24f9581d28ee519c6091/src%2FMakefile",
      "raw_url": "https://github.com/JuliaLang/julia/raw/543cd2ebaecd0005a06f24f9581d28ee519c6091/src%2FMakefile",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2FMakefile?ref=543cd2ebaecd0005a06f24f9581d28ee519c6091",
      "patch": "@@ -75,7 +75,7 @@ GC_CODEGEN_SRCS += llvm-late-gc-lowering-stock\n endif\n CODEGEN_SRCS := codegen jitlayers aotcompile debuginfo disasm llvm-simdloop \\\n \tllvm-pass-helpers llvm-ptls \\\n-\tllvm-lower-handlers llvm-propagate-addrspaces \\\n+\tllvm-lower-handlers llvm-propagate-addrspaces null_sysimage \\\n \tllvm-multiversioning llvm-alloc-opt llvm-alloc-helpers cgmemmgr llvm-remove-addrspaces \\\n \tllvm-remove-ni llvm-julia-licm llvm-demote-float16 llvm-cpufeatures pipeline llvm_api \\\n \t$(GC_CODEGEN_SRCS)\n@@ -192,9 +192,7 @@ endif\n \n COMMON_LIBPATHS := -L$(build_libdir) -L$(build_shlibdir)\n RT_LIBS := $(WHOLE_ARCHIVE) $(LIBUV) $(WHOLE_ARCHIVE) $(LIBUTF8PROC) $(NO_WHOLE_ARCHIVE) $(LIBUNWIND) $(RT_LLVMLINK) $(OSLIBS) $(LIBTRACYCLIENT) $(LIBITTAPI) $(MMTK_LIB)\n-# NB: CG needs uv_mutex_* symbols, but we expect to export them from libjulia-internal\n CG_LIBS := $(LIBUNWIND) $(CG_LLVMLINK) $(OSLIBS) $(LIBTRACYCLIENT) $(LIBITTAPI) $(MMTK_LIB)\n-\n RT_DEBUG_LIBS := $(COMMON_LIBPATHS) $(WHOLE_ARCHIVE) $(BUILDDIR)/flisp/libflisp-debug.a $(WHOLE_ARCHIVE) $(BUILDDIR)/support/libsupport-debug.a -ljulia-debug $(RT_LIBS)\n CG_DEBUG_LIBS := $(COMMON_LIBPATHS) $(CG_LIBS) -ljulia-debug -ljulia-internal-debug\n RT_RELEASE_LIBS := $(COMMON_LIBPATHS) $(WHOLE_ARCHIVE) $(BUILDDIR)/flisp/libflisp.a $(WHOLE_ARCHIVE) $(BUILDDIR)/support/libsupport.a -ljulia $(RT_LIBS)\n@@ -471,10 +469,10 @@ libjulia-codegen-debug: $(build_shlibdir)/libjulia-codegen-debug.$(JL_MAJOR_MINO\n libjulia-codegen-debug libjulia-codegen-release: $(PUBLIC_HEADER_TARGETS)\n \n # set the exports for the source files based on where they are getting linked\n-$(OBJS): SHIPFLAGS += -DJL_LIBRARY_EXPORTS_INTERNAL -DBUILDING_UV_SHARED\n-$(DOBJS): DEBUGFLAGS += -DJL_LIBRARY_EXPORTS_INTERNAL -DBUILDING_UV_SHARED\n-$(CODEGEN_OBJS): SHIPFLAGS += -DJL_LIBRARY_EXPORTS_CODEGEN -DUSING_UV_SHARED\n-$(CODEGEN_DOBJS): DEBUGFLAGS += -DJL_LIBRARY_EXPORTS_CODEGEN -DUSING_UV_SHARED\n+$(OBJS): SHIPFLAGS += -DJL_LIBRARY_EXPORTS_INTERNAL\n+$(DOBJS): DEBUGFLAGS += -DJL_LIBRARY_EXPORTS_INTERNAL\n+$(CODEGEN_OBJS): SHIPFLAGS += -DJL_LIBRARY_EXPORTS_CODEGEN\n+$(CODEGEN_DOBJS): DEBUGFLAGS += -DJL_LIBRARY_EXPORTS_CODEGEN\n \n clean:\n \t-rm -fr $(build_shlibdir)/libjulia-internal* $(build_shlibdir)/libjulia-codegen* $(build_shlibdir)/libccalltest* $(build_shlibdir)/libllvmcalltest*"
    },
    {
      "sha": "eca1de86e588a5e250f75867c6ff43a298632858",
      "filename": "src/flisp/Makefile",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/JuliaLang/julia/blob/543cd2ebaecd0005a06f24f9581d28ee519c6091/src%2Fflisp%2FMakefile",
      "raw_url": "https://github.com/JuliaLang/julia/raw/543cd2ebaecd0005a06f24f9581d28ee519c6091/src%2Fflisp%2FMakefile",
      "contents_url": "https://api.github.com/repos/JuliaLang/julia/contents/src%2Fflisp%2FMakefile?ref=543cd2ebaecd0005a06f24f9581d28ee519c6091",
      "patch": "@@ -117,7 +117,7 @@ $(BUILDDIR)/host/Makefile:\n \t@printf \"%s\\n\" 'include $(SRCDIR)/Makefile' >> $@\n \n $(BUILDDIR)/host/$(EXENAME): $(BUILDDIR)/host/Makefile | ${BUILDDIR}/host/flisp.boot\n-\t$(MAKE) -C $(BUILDDIR)/host $(EXENAME)\n+\tmake -C $(BUILDDIR)/host $(EXENAME)\n \n \n $(BUILDDIR)/host/flisp.boot: $(SRCDIR)/flisp.boot | $(BUILDDIR)/host/Makefile"
    }
  ]
}